{"file_contents":{"client/src/components/SideDrawer.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { \n  X, \n  Home, \n  TrendingUp, \n  Clock, \n  Star, \n  Grid3X3,\n  Users,\n  Heart,\n  Film,\n  Sparkles,\n  Code,\n  Settings,\n  User,\n  HelpCircle,\n  Info,\n  Shield,\n  FileText,\n  Mail,\n  MessageSquare,\n  Accessibility,\n  Play,\n  Download,\n  WifiOff,\n  Bell,\n  Bookmark,\n  History,\n  List,\n  Tag,\n  Folder,\n  Smartphone\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport type { Category } from \"@shared/schema\";\n\ninterface SideDrawerProps {\n  isOpen: boolean;\n  onClose: () => void;\n  categories: Category[];\n  selectedCategory: string | null;\n  onCategorySelect: (categoryId: string | null) => void;\n  favoritesCount?: number;\n}\n\nconst browseItems = [\n  { id: \"home\", name: \"Home\", icon: Home, href: \"/\" },\n  { id: \"trending\", name: \"Trending\", icon: TrendingUp, href: \"/trending\" },\n  { id: \"recent\", name: \"Recently Added\", icon: Clock, href: \"/?filter=recent\" },\n  { id: \"top-rated\", name: \"Top Rated\", icon: Star, href: \"/?filter=top-rated\" },\n  { id: \"categories\", name: \"Categories\", icon: Folder, href: \"/categories\" },\n  { id: \"performers\", name: \"Performers\", icon: Users, href: \"/performers\" },\n  { id: \"tags\", name: \"Tags\", icon: Tag, href: \"/tags\" },\n];\n\nconst libraryItems = [\n  { id: \"favorites\", name: \"Favorites\", icon: Heart, href: \"/favorites\" },\n  { id: \"watch-later\", name: \"Watch Later\", icon: Bookmark, href: \"/watch-later\" },\n  { id: \"history\", name: \"History\", icon: History, href: \"/history\" },\n  { id: \"playlists\", name: \"Playlists\", icon: List, href: \"/playlists\" },\n  { id: \"downloads\", name: \"Downloads\", icon: Download, href: \"/downloads\" },\n];\n\nconst settingsItems = [\n  { id: \"profile\", name: \"Profile\", icon: User, href: \"/profile\" },\n  { id: \"settings\", name: \"Settings\", icon: Settings, href: \"/settings\" },\n  { id: \"playback\", name: \"Playback Settings\", icon: Play, href: \"/playback-settings\" },\n  { id: \"accessibility\", name: \"Accessibility\", icon: Accessibility, href: \"/accessibility\" },\n  { id: \"notifications\", name: \"Notifications\", icon: Bell, href: \"/notifications\" },\n  { id: \"offline\", name: \"Offline Mode\", icon: WifiOff, href: \"/offline\" },\n];\n\nconst supportItems = [\n  { id: \"help\", name: \"Help Center\", icon: HelpCircle, href: \"/help\" },\n  { id: \"feedback\", name: \"Send Feedback\", icon: MessageSquare, href: \"/feedback\" },\n  { id: \"about\", name: \"About\", icon: Info, href: \"/about\" },\n  { id: \"contact\", name: \"Contact Us\", icon: Mail, href: \"/contact\" },\n];\n\nconst legalItems = [\n  { id: \"privacy\", name: \"Privacy Policy\", icon: Shield, href: \"/privacy\" },\n  { id: \"terms\", name: \"Terms of Service\", icon: FileText, href: \"/terms\" },\n];\n\nexport function SideDrawer({ \n  isOpen, \n  onClose, \n  categories,\n  selectedCategory,\n  onCategorySelect,\n  favoritesCount = 0\n}: SideDrawerProps) {\n  const [location] = useLocation();\n\n  const getCategoryIcon = (iconName: string) => {\n    const icons: Record<string, typeof Home> = {\n      film: Film,\n      users: Users,\n      heart: Heart,\n      sparkles: Sparkles,\n      star: Star,\n      grid: Grid3X3,\n    };\n    return icons[iconName] || Grid3X3;\n  };\n\n  const NavSection = ({ \n    title, \n    items \n  }: { \n    title: string; \n    items: { id: string; name: string; icon: typeof Home; href: string }[] \n  }) => (\n    <div className=\"px-3 mb-4\">\n      <h3 className=\"text-xs font-medium text-muted-foreground uppercase tracking-wider px-3 mb-2\">\n        {title}\n      </h3>\n      <nav className=\"space-y-0.5\">\n        {items.map((item) => {\n          const Icon = item.icon;\n          const isActive = location === item.href || \n            (item.href.includes(\"filter=\") && location.includes(item.href.split(\"=\")[1]));\n          \n          return (\n            <Link key={item.id} href={item.href} onClick={onClose}>\n              <div\n                className={`flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-150 hover-elevate ${\n                  isActive \n                    ? \"bg-primary/20 text-primary\" \n                    : \"text-foreground/80 hover:text-foreground\"\n                }`}\n                data-testid={`nav-item-${item.id}`}\n              >\n                <Icon className=\"w-4 h-4\" />\n                <span className=\"text-sm font-medium\">{item.name}</span>\n                {item.id === \"favorites\" && favoritesCount > 0 && (\n                  <span className=\"ml-auto text-xs text-muted-foreground bg-red-500/20 text-red-400 px-2 py-0.5 rounded-full\">\n                    {favoritesCount}\n                  </span>\n                )}\n              </div>\n            </Link>\n          );\n        })}\n      </nav>\n    </div>\n  );\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-50\"\n            onClick={onClose}\n            data-testid=\"drawer-overlay\"\n          />\n\n          <motion.div\n            initial={{ x: \"100%\" }}\n            animate={{ x: 0 }}\n            exit={{ x: \"100%\" }}\n            transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\n            className=\"fixed top-0 right-0 h-full w-[300px] glass-heavy z-50 flex flex-col\"\n            data-testid=\"side-drawer\"\n          >\n            <div className=\"flex items-center justify-between p-4 border-b border-white/10\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center\">\n                  <span className=\"text-white font-bold font-['Poppins']\">B</span>\n                </div>\n                <div>\n                  <h2 className=\"font-semibold font-['Poppins'] text-foreground\">Blueberry</h2>\n                  <p className=\"text-xs text-muted-foreground\">126,000+ Videos</p>\n                </div>\n              </div>\n              <Button\n                size=\"icon\"\n                variant=\"ghost\"\n                onClick={onClose}\n                className=\"rounded-full\"\n                data-testid=\"button-close-drawer\"\n              >\n                <X className=\"w-5 h-5\" />\n              </Button>\n            </div>\n\n            <ScrollArea className=\"flex-1\">\n              <div className=\"py-4\">\n                <NavSection title=\"Browse\" items={browseItems} />\n                \n                <Separator className=\"my-2 mx-6 bg-white/10\" />\n                \n                <NavSection title=\"Your Library\" items={libraryItems} />\n\n                <Separator className=\"my-2 mx-6 bg-white/10\" />\n\n                <div className=\"px-3 mb-4\">\n                  <h3 className=\"text-xs font-medium text-muted-foreground uppercase tracking-wider px-3 mb-2\">\n                    Categories\n                  </h3>\n                  <nav className=\"space-y-0.5\">\n                    <div\n                      onClick={() => {\n                        onCategorySelect(null);\n                        onClose();\n                      }}\n                      className={`flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-150 cursor-pointer hover-elevate ${\n                        selectedCategory === null \n                          ? \"bg-primary/20 text-primary\" \n                          : \"text-foreground/80 hover:text-foreground\"\n                      }`}\n                      data-testid=\"nav-category-all\"\n                    >\n                      <Grid3X3 className=\"w-4 h-4\" />\n                      <span className=\"text-sm font-medium\">All Videos</span>\n                    </div>\n                    {categories.slice(0, 15).map((category) => {\n                      const Icon = getCategoryIcon(category.icon);\n                      const isActive = selectedCategory === category.id;\n                      \n                      return (\n                        <div\n                          key={category.id}\n                          onClick={() => {\n                            onCategorySelect(category.id);\n                            onClose();\n                          }}\n                          className={`flex items-center justify-between px-3 py-2 rounded-lg transition-all duration-150 cursor-pointer hover-elevate ${\n                            isActive \n                              ? \"bg-primary/20 text-primary\" \n                              : \"text-foreground/80 hover:text-foreground\"\n                          }`}\n                          data-testid={`nav-category-${category.id}`}\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <Icon className=\"w-4 h-4\" />\n                            <span className=\"text-sm font-medium\">{category.name}</span>\n                          </div>\n                          <span className=\"text-xs text-muted-foreground bg-white/5 px-2 py-0.5 rounded-full\">\n                            {category.count.toLocaleString()}\n                          </span>\n                        </div>\n                      );\n                    })}\n                    {categories.length > 15 && (\n                      <Link href=\"/categories\" onClick={onClose}>\n                        <div className=\"flex items-center gap-3 px-3 py-2 text-primary text-sm hover-elevate rounded-lg\">\n                          <Folder className=\"w-4 h-4\" />\n                          <span>View all {categories.length} categories</span>\n                        </div>\n                      </Link>\n                    )}\n                  </nav>\n                </div>\n\n                <Separator className=\"my-2 mx-6 bg-white/10\" />\n\n                <NavSection title=\"Settings\" items={settingsItems} />\n\n                <Separator className=\"my-2 mx-6 bg-white/10\" />\n\n                <NavSection title=\"Support\" items={supportItems} />\n\n                <Separator className=\"my-2 mx-6 bg-white/10\" />\n\n                <NavSection title=\"Legal\" items={legalItems} />\n              </div>\n            </ScrollArea>\n\n            <div className=\"p-4 border-t border-white/10 bg-black/20\">\n              <div className=\"flex items-center gap-2 mb-2 text-muted-foreground\">\n                <Code className=\"w-4 h-4\" />\n                <span className=\"text-xs font-medium uppercase tracking-wider\">Developed by</span>\n              </div>\n              <div className=\"space-y-1\">\n                <p className=\"text-sm text-foreground/80\">Roshan Sahu</p>\n                <p className=\"text-sm text-foreground/80\">Papun Sahu</p>\n                <p className=\"text-sm text-foreground/80\">Rohan Sahu</p>\n              </div>\n              <div className=\"flex items-center gap-2 mt-3 text-xs text-muted-foreground\">\n                <Smartphone className=\"w-3 h-3\" />\n                <span>PWA Available</span>\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-2\">\n                {new Date().getFullYear()} Blueberry. All rights reserved.\n              </p>\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n","path":null,"size_bytes":11395,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"client/src/components/LanguageSelector.tsx":{"content":"import { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { Globe } from 'lucide-react';\nimport type { Language } from '@/lib/i18n/translations';\n\ninterface LanguageSelectorProps {\n  variant?: 'icon' | 'full';\n}\n\nexport function LanguageSelector({ variant = 'icon' }: LanguageSelectorProps) {\n  const { language, setLanguage, languageNames, availableLanguages } = useLanguage();\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button \n          variant=\"ghost\" \n          size={variant === 'icon' ? 'icon' : 'default'}\n          className=\"gap-2\"\n          data-testid=\"button-language-selector\"\n        >\n          <Globe className=\"w-4 h-4\" />\n          {variant === 'full' && <span>{languageNames[language]}</span>}\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" data-testid=\"menu-language-options\">\n        {availableLanguages.map((lang) => (\n          <DropdownMenuItem\n            key={lang}\n            onClick={() => setLanguage(lang)}\n            className={language === lang ? 'bg-accent' : ''}\n            data-testid={`menu-item-language-${lang}`}\n          >\n            <span className=\"font-medium\">{languageNames[lang]}</span>\n            {language === lang && (\n              <span className=\"ml-auto text-xs text-muted-foreground\">Active</span>\n            )}\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","path":null,"size_bytes":1629,"size_tokens":null},"client/src/components/VideoCard.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Link } from \"wouter\";\nimport { Play, Clock, Eye, Heart } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useFavoritesContext } from \"@/context/FavoritesContext\";\nimport type { Video } from \"@shared/schema\";\n\ninterface VideoCardProps {\n  video: Video;\n  index?: number;\n  sectionId?: string;\n}\n\nexport function VideoCard({ video, index = 0, sectionId = \"default\" }: VideoCardProps) {\n  const { isFavorite, toggleFavorite } = useFavoritesContext();\n  const isLiked = isFavorite(video.id);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isVisible, setIsVisible] = useState(false);\n  const cardRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const element = cardRef.current;\n    if (!element) return;\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsVisible(true);\n          observer.disconnect();\n        }\n      },\n      {\n        threshold: 0.1,\n        rootMargin: \"200px\",\n      }\n    );\n\n    observer.observe(element);\n\n    return () => observer.disconnect();\n  }, []);\n\n  const handleFavoriteClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    toggleFavorite(video.id);\n  };\n\n  return (\n    <article\n      ref={cardRef}\n      className=\"group cursor-pointer video-card-hover rounded-xl overflow-visible\"\n      style={{ \n        animationDelay: `${index * 50}ms`,\n        animation: \"fadeUp 0.4s ease-out forwards\",\n        opacity: 0\n      }}\n      data-testid={`video-card-${sectionId}-${video.id}`}\n    >\n      <Link href={`/video/${video.id}`}>\n        {/* Thumbnail container */}\n        <div className=\"relative aspect-video rounded-xl overflow-hidden bg-card\">\n          {/* Skeleton placeholder */}\n          {(!isVisible || !isLoaded) && (\n            <div className=\"absolute inset-0 bg-gradient-to-br from-card to-muted animate-pulse\">\n              <div className=\"absolute inset-0 flex items-center justify-center\">\n                <div className=\"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center\">\n                  <Play className=\"w-5 h-5 text-muted-foreground/50\" />\n                </div>\n              </div>\n            </div>\n          )}\n          \n          {/* Thumbnail image - only load when visible */}\n          {isVisible && (\n            <img\n              src={video.thumbnailUrl}\n              alt={video.title}\n              className={`w-full h-full object-cover transition-all duration-500 group-hover:scale-105 ${\n                isLoaded ? \"opacity-100\" : \"opacity-0\"\n              }`}\n              loading=\"lazy\"\n              onLoad={() => setIsLoaded(true)}\n              data-testid={`video-thumbnail-${video.id}`}\n            />\n          )}\n          \n          {/* Gradient overlay */}\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200\" />\n          \n          {/* Play button overlay */}\n          <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\n            <div className=\"w-14 h-14 rounded-full glass-heavy flex items-center justify-center\">\n              <Play className=\"w-6 h-6 text-white fill-white\" />\n            </div>\n          </div>\n          \n          {/* Favorite button - top right */}\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            onClick={handleFavoriteClick}\n            className={`absolute top-2 right-2 h-8 w-8 rounded-full transition-all duration-200 ${\n              isLiked \n                ? \"bg-red-500/90 text-white opacity-100\" \n                : \"glass opacity-0 group-hover:opacity-100\"\n            }`}\n            data-testid={`button-favorite-${video.id}`}\n          >\n            <Heart className={`w-4 h-4 ${isLiked ? \"fill-current\" : \"\"}`} />\n          </Button>\n          \n          {/* Duration badge */}\n          <div className=\"absolute bottom-2 right-2 glass px-2 py-1 rounded-md flex items-center gap-1\">\n            <Clock className=\"w-3 h-3 text-white/80\" />\n            <span className=\"text-xs font-medium text-white\" data-testid={`video-duration-${video.id}`}>\n              {video.duration}\n            </span>\n          </div>\n        </div>\n      </Link>\n\n      {/* Video info */}\n      <Link href={`/video/${video.id}`}>\n        <div className=\"pt-3 px-1\">\n          <h3 \n            className=\"font-medium text-foreground line-clamp-2 leading-snug group-hover:text-primary transition-colors duration-150\"\n            data-testid={`video-title-${video.id}`}\n          >\n            {video.title}\n          </h3>\n          \n          <div className=\"flex items-center gap-3 mt-2 text-sm text-muted-foreground\">\n            <div className=\"flex items-center gap-1\">\n              <Eye className=\"w-3.5 h-3.5\" />\n              <span data-testid={`video-views-${video.id}`}>{video.views}</span>\n            </div>\n            {video.category && (\n              <>\n                <span className=\"w-1 h-1 rounded-full bg-muted-foreground/50\" />\n                <span data-testid={`video-category-${video.id}`} className=\"truncate\">{video.category}</span>\n              </>\n            )}\n          </div>\n        </div>\n      </Link>\n    </article>\n  );\n}\n\nexport function VideoCardSkeleton() {\n  return (\n    <div className=\"animate-pulse\">\n      <div className=\"aspect-video rounded-xl bg-gradient-to-br from-card to-muted\">\n        <div className=\"w-full h-full flex items-center justify-center\">\n          <div className=\"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center\">\n            <Play className=\"w-5 h-5 text-muted-foreground/50\" />\n          </div>\n        </div>\n      </div>\n      <div className=\"pt-3 px-1\">\n        <div className=\"h-4 bg-card rounded w-full mb-2\" />\n        <div className=\"h-4 bg-card rounded w-2/3 mb-2\" />\n        <div className=\"h-3 bg-card rounded w-1/2\" />\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6127,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"client/src/pages/Privacy.tsx":{"content":"import { Link } from 'wouter';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { ArrowLeft, Shield, Eye, Lock, Bell, Trash2, Globe } from 'lucide-react';\n\nexport default function Privacy() {\n  const { t } = useLanguage();\n\n  const sections = [\n    {\n      icon: Eye,\n      title: 'Information We Collect',\n      content: `We collect information you provide directly to us, such as when you create an account, update your profile, or contact us for support. This may include:\n      \n      - Account information (username, email, password hash)\n      - Usage data (videos watched, preferences, settings)\n      - Device information (browser type, operating system)\n      - Cookies and similar tracking technologies`,\n    },\n    {\n      icon: Lock,\n      title: 'How We Use Your Information',\n      content: `We use the information we collect to:\n      \n      - Provide, maintain, and improve our services\n      - Personalize your experience and content recommendations\n      - Send you technical notices and support messages\n      - Monitor and analyze trends and usage\n      - Detect and prevent fraud and abuse`,\n    },\n    {\n      icon: Globe,\n      title: 'Information Sharing',\n      content: `We do not sell, trade, or otherwise transfer your personal information to third parties except:\n      \n      - With your consent\n      - To comply with legal obligations\n      - To protect our rights and prevent fraud\n      - With service providers who assist in our operations`,\n    },\n    {\n      icon: Bell,\n      title: 'Cookies and Tracking',\n      content: `We use cookies and similar technologies to:\n      \n      - Keep you logged in\n      - Remember your preferences\n      - Understand how you use our service\n      - Deliver relevant advertisements\n      \n      You can control cookie preferences through our cookie consent banner or your browser settings.`,\n    },\n    {\n      icon: Shield,\n      title: 'Data Security',\n      content: `We implement appropriate security measures to protect your personal information:\n      \n      - Encryption of data in transit and at rest\n      - Secure password hashing\n      - Regular security audits\n      - Access controls and authentication\n      \n      However, no method of transmission over the Internet is 100% secure.`,\n    },\n    {\n      icon: Trash2,\n      title: 'Your Rights',\n      content: `You have the right to:\n      \n      - Access your personal data\n      - Correct inaccurate information\n      - Delete your account and data\n      - Export your data\n      - Opt-out of marketing communications\n      - Manage cookie preferences\n      \n      Contact us to exercise these rights.`,\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background to-muted\">\n      <div className=\"max-w-4xl mx-auto p-6 space-y-8\">\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Button variant=\"ghost\" size=\"icon\" asChild>\n            <Link href=\"/\" data-testid=\"button-back-home\">\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Link>\n          </Button>\n          <div>\n            <h1 className=\"text-3xl font-bold\" data-testid=\"text-privacy-title\">\n              {t.legal.privacyPolicy}\n            </h1>\n            <p className=\"text-sm text-muted-foreground\">Last updated: December 2024</p>\n          </div>\n        </div>\n\n        <Card data-testid=\"card-privacy-intro\">\n          <CardContent className=\"pt-6\">\n            <p className=\"text-muted-foreground leading-relaxed\">\n              Your privacy is important to us. This Privacy Policy explains how Blueberry (\"we\", \"us\", or \"our\") collects, uses, shares, and protects your personal information when you use our adult video streaming service.\n            </p>\n            <p className=\"text-muted-foreground leading-relaxed mt-4\">\n              By using our service, you agree to the collection and use of information in accordance with this policy. This service is intended for users aged 18 and above only.\n            </p>\n          </CardContent>\n        </Card>\n\n        {sections.map((section, index) => (\n          <Card key={index} data-testid={`card-privacy-section-${index}`}>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <section.icon className=\"w-5 h-5 text-primary\" />\n                {section.title}\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground whitespace-pre-line leading-relaxed\">\n                {section.content}\n              </p>\n            </CardContent>\n          </Card>\n        ))}\n\n        <Card data-testid=\"card-contact-privacy\">\n          <CardHeader>\n            <CardTitle>Contact Us</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <p className=\"text-muted-foreground\">\n              If you have questions about this Privacy Policy or your personal data, please contact us:\n            </p>\n            <Button asChild>\n              <Link href=\"/contact\" data-testid=\"link-contact\">\n                Contact Support\n              </Link>\n            </Button>\n          </CardContent>\n        </Card>\n\n        <div className=\"text-center text-sm text-muted-foreground py-8\">\n          <p>&copy; 2024 Blueberry. All rights reserved.</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":5517,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\n\nexport async function registerRoutes(\n  httpServer: Server,\n  app: Express\n): Promise<Server> {\n\n  app.get(\"/api/health\", (req, res) => {\n    res.json({ status: \"ok\" });\n  });\n\n  app.get(\"/api/videos\", async (req, res) => {\n    try {\n      const page = parseInt(req.query.page as string) || 1;\n      const { search, category, performer, tag } = req.query;\n\n      let result;\n      if (typeof search === \"string\" && search.trim()) {\n        result = await storage.searchVideos(search.trim(), page);\n      } else if (typeof category === \"string\" && category.trim()) {\n        result = await storage.getVideosByCategory(category.trim(), page);\n      } else if (typeof performer === \"string\" && performer.trim()) {\n        result = await storage.getVideosByPerformer(performer.trim(), page);\n      } else if (typeof tag === \"string\" && tag.trim()) {\n        result = await storage.getVideosByTag(tag.trim(), page);\n      } else {\n        result = await storage.getVideosPage(page);\n      }\n\n      res.json(result);\n    } catch (error) {\n      console.error(\"Error fetching videos:\", error);\n      res.status(500).json({ error: \"Failed to fetch videos\" });\n    }\n  });\n\n  app.get(\"/api/videos/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const video = await storage.getVideoByGlobalId(id);\n\n      if (!video) {\n        return res.status(404).json({ error: \"Video not found\" });\n      }\n\n      res.json(video);\n    } catch (error) {\n      console.error(\"Error fetching video:\", error);\n      res.status(500).json({ error: \"Failed to fetch video\" });\n    }\n  });\n\n  app.get(\"/api/categories\", async (req, res) => {\n    try {\n      const categories = await storage.getCategories();\n      res.json(categories);\n    } catch (error) {\n      console.error(\"Error fetching categories:\", error);\n      res.status(500).json({ error: \"Failed to fetch categories\" });\n    }\n  });\n\n  app.get(\"/api/performers\", async (req, res) => {\n    try {\n      const performers = await storage.getPerformers();\n      res.json(performers);\n    } catch (error) {\n      console.error(\"Error fetching performers:\", error);\n      res.status(500).json({ error: \"Failed to fetch performers\" });\n    }\n  });\n\n  app.get(\"/api/tags\", async (req, res) => {\n    try {\n      const tags = await storage.getTags();\n      res.json(tags);\n    } catch (error) {\n      console.error(\"Error fetching tags:\", error);\n      res.status(500).json({ error: \"Failed to fetch tags\" });\n    }\n  });\n\n  app.get(\"/api/stats\", async (req, res) => {\n    try {\n      res.json({\n        totalPages: storage.getTotalPages(),\n        totalVideos: storage.getTotalVideos(),\n      });\n    } catch (error) {\n      console.error(\"Error fetching stats:\", error);\n      res.status(500).json({ error: \"Failed to fetch stats\" });\n    }\n  });\n\n  app.get(\"/api/auth/me\", (req, res) => {\n    res.status(401).json({ error: \"Not authenticated\" });\n  });\n\n  app.post(\"/api/auth/login\", (req, res) => {\n    const { email, password } = req.body;\n    if (!email || !password) {\n      return res.status(400).json({ message: \"Email and password required\" });\n    }\n    res.status(401).json({ message: \"Invalid credentials\" });\n  });\n\n  app.post(\"/api/auth/register\", (req, res) => {\n    const { username, email, password } = req.body;\n    if (!username || !email || !password) {\n      return res.status(400).json({ message: \"All fields are required\" });\n    }\n    res.status(201).json({ \n      user: { \n        id: \"demo-user\",\n        username,\n        email,\n      } \n    });\n  });\n\n  app.post(\"/api/auth/logout\", (req, res) => {\n    res.json({ success: true });\n  });\n\n  app.post(\"/api/auth/forgot-password\", (req, res) => {\n    const { email } = req.body;\n    if (!email) {\n      return res.status(400).json({ message: \"Email is required\" });\n    }\n    res.json({ success: true, message: \"Reset link sent\" });\n  });\n\n  app.post(\"/api/auth/reset-password\", (req, res) => {\n    const { token, password } = req.body;\n    if (!token || !password) {\n      return res.status(400).json({ message: \"Token and password required\" });\n    }\n    res.json({ success: true });\n  });\n\n  return httpServer;\n}\n","path":null,"size_bytes":4272,"size_tokens":null},"client/src/pages/Settings.tsx":{"content":"import { useState } from 'react';\nimport { Link } from 'wouter';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { useAuth } from '@/context/AuthContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Separator } from '@/components/ui/separator';\nimport { useToast } from '@/hooks/use-toast';\nimport { LanguageSelector } from '@/components/LanguageSelector';\nimport { \n  ArrowLeft, Settings as SettingsIcon, Moon, Sun, Play, Monitor,\n  Bell, Mail, Shield, Trash2, LogOut, User, ChevronRight\n} from 'lucide-react';\n\nexport default function Settings() {\n  const { t, language } = useLanguage();\n  const { user, isAuthenticated, logout } = useAuth();\n  const { toast } = useToast();\n\n  const [darkMode, setDarkMode] = useState(() => \n    document.documentElement.classList.contains('dark')\n  );\n  const [autoplay, setAutoplay] = useState(true);\n  const [quality, setQuality] = useState('auto');\n  const [pushNotifications, setPushNotifications] = useState(false);\n  const [emailNotifications, setEmailNotifications] = useState(true);\n\n  const handleDarkModeChange = (enabled: boolean) => {\n    setDarkMode(enabled);\n    if (enabled) {\n      document.documentElement.classList.add('dark');\n      localStorage.setItem('theme', 'dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n      localStorage.setItem('theme', 'light');\n    }\n  };\n\n  const handleClearHistory = () => {\n    localStorage.removeItem('blueberry_watch_history');\n    toast({\n      title: 'History cleared',\n      description: 'Your watch history has been cleared.',\n    });\n  };\n\n  const handleLogout = async () => {\n    await logout();\n    toast({\n      title: 'Logged out',\n      description: 'You have been successfully logged out.',\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background to-muted\">\n      <div className=\"max-w-2xl mx-auto p-6 space-y-6\">\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Button variant=\"ghost\" size=\"icon\" asChild>\n            <Link href=\"/\" data-testid=\"button-back-home\">\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Link>\n          </Button>\n          <div>\n            <h1 className=\"text-3xl font-bold\" data-testid=\"text-settings-title\">\n              {t.settings.title}\n            </h1>\n            <p className=\"text-sm text-muted-foreground\">Manage your preferences</p>\n          </div>\n        </div>\n\n        {isAuthenticated && user && (\n          <Card data-testid=\"card-profile\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <User className=\"w-5 h-5 text-primary\" />\n                Profile\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"font-medium\">{user.username}</p>\n                  <p className=\"text-sm text-muted-foreground\">{user.email}</p>\n                </div>\n                <Button variant=\"outline\" size=\"sm\" data-testid=\"button-edit-profile\">\n                  Edit\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        <Card data-testid=\"card-appearance\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Monitor className=\"w-5 h-5 text-primary\" />\n              {t.settings.appearance}\n            </CardTitle>\n            <CardDescription>Customize how the app looks</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                {darkMode ? <Moon className=\"w-4 h-4\" /> : <Sun className=\"w-4 h-4\" />}\n                <Label htmlFor=\"darkMode\">{t.settings.darkMode}</Label>\n              </div>\n              <Switch\n                id=\"darkMode\"\n                checked={darkMode}\n                onCheckedChange={handleDarkModeChange}\n                data-testid=\"switch-dark-mode\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-playback\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Play className=\"w-5 h-5 text-primary\" />\n              Playback\n            </CardTitle>\n            <CardDescription>Video playback preferences</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <Label htmlFor=\"autoplay\">{t.settings.autoplay}</Label>\n              <Switch\n                id=\"autoplay\"\n                checked={autoplay}\n                onCheckedChange={setAutoplay}\n                data-testid=\"switch-autoplay\"\n              />\n            </div>\n            <Separator />\n            <div className=\"flex items-center justify-between\">\n              <Label>{t.settings.quality}</Label>\n              <Select value={quality} onValueChange={setQuality}>\n                <SelectTrigger className=\"w-32\" data-testid=\"select-quality\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"auto\">Auto</SelectItem>\n                  <SelectItem value=\"1080p\">1080p</SelectItem>\n                  <SelectItem value=\"720p\">720p</SelectItem>\n                  <SelectItem value=\"480p\">480p</SelectItem>\n                  <SelectItem value=\"360p\">360p</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-language\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <SettingsIcon className=\"w-5 h-5 text-primary\" />\n              {t.settings.languageSettings}\n            </CardTitle>\n            <CardDescription>Choose your preferred language</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center justify-between\">\n              <Label>{t.common.language}</Label>\n              <LanguageSelector variant=\"full\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-notifications\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Bell className=\"w-5 h-5 text-primary\" />\n              {t.settings.notifications}\n            </CardTitle>\n            <CardDescription>Manage notification preferences</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                <Bell className=\"w-4 h-4\" />\n                <Label htmlFor=\"push\">{t.settings.pushNotifications}</Label>\n              </div>\n              <Switch\n                id=\"push\"\n                checked={pushNotifications}\n                onCheckedChange={setPushNotifications}\n                data-testid=\"switch-push-notifications\"\n              />\n            </div>\n            <Separator />\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                <Mail className=\"w-4 h-4\" />\n                <Label htmlFor=\"email\">{t.settings.emailNotifications}</Label>\n              </div>\n              <Switch\n                id=\"email\"\n                checked={emailNotifications}\n                onCheckedChange={setEmailNotifications}\n                data-testid=\"switch-email-notifications\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-privacy\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Shield className=\"w-5 h-5 text-primary\" />\n              {t.settings.privacy}\n            </CardTitle>\n            <CardDescription>Privacy and data settings</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Button\n              variant=\"outline\"\n              className=\"w-full justify-between\"\n              onClick={handleClearHistory}\n              data-testid=\"button-clear-history\"\n            >\n              <div className=\"flex items-center gap-2\">\n                <Trash2 className=\"w-4 h-4\" />\n                {t.settings.clearHistory}\n              </div>\n              <ChevronRight className=\"w-4 h-4\" />\n            </Button>\n            \n            {isAuthenticated && (\n              <>\n                <Separator />\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full justify-between text-destructive hover:text-destructive\"\n                  data-testid=\"button-delete-account\"\n                >\n                  <div className=\"flex items-center gap-2\">\n                    <Trash2 className=\"w-4 h-4\" />\n                    {t.settings.deleteAccount}\n                  </div>\n                  <ChevronRight className=\"w-4 h-4\" />\n                </Button>\n              </>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-legal\">\n          <CardHeader>\n            <CardTitle>Legal</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-2\">\n            <Button variant=\"ghost\" className=\"w-full justify-between\" asChild>\n              <Link href=\"/privacy\" data-testid=\"link-privacy-settings\">\n                {t.legal.privacyPolicy}\n                <ChevronRight className=\"w-4 h-4\" />\n              </Link>\n            </Button>\n            <Button variant=\"ghost\" className=\"w-full justify-between\" asChild>\n              <Link href=\"/terms\" data-testid=\"link-terms-settings\">\n                {t.legal.termsOfService}\n                <ChevronRight className=\"w-4 h-4\" />\n              </Link>\n            </Button>\n            <Button variant=\"ghost\" className=\"w-full justify-between\" asChild>\n              <Link href=\"/about\" data-testid=\"link-about-settings\">\n                {t.legal.aboutUs}\n                <ChevronRight className=\"w-4 h-4\" />\n              </Link>\n            </Button>\n          </CardContent>\n        </Card>\n\n        {isAuthenticated && (\n          <Button\n            variant=\"destructive\"\n            className=\"w-full\"\n            onClick={handleLogout}\n            data-testid=\"button-logout\"\n          >\n            <LogOut className=\"w-4 h-4 mr-2\" />\n            {t.common.logout}\n          </Button>\n        )}\n\n        <div className=\"text-center text-xs text-muted-foreground py-4\">\n          <p>Blueberry v1.0.0</p>\n          <p className=\"mt-1\">&copy; 2024 Blueberry. All rights reserved.</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":11243,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"@neondatabase/serverless\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1439,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"client/src/components/ErrorState.tsx":{"content":"import { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { AlertTriangle, RefreshCw, Home, Search, WifiOff, ServerCrash, FileX } from 'lucide-react';\nimport { Link } from 'wouter';\n\ninterface ErrorStateProps {\n  type?: 'general' | 'notFound' | 'offline' | 'server' | 'empty';\n  title?: string;\n  message?: string;\n  onRetry?: () => void;\n  showHomeButton?: boolean;\n}\n\nexport function ErrorState({ \n  type = 'general', \n  title, \n  message, \n  onRetry, \n  showHomeButton = true \n}: ErrorStateProps) {\n  const { t } = useLanguage();\n\n  const configs = {\n    general: {\n      icon: AlertTriangle,\n      iconColor: 'text-destructive',\n      defaultTitle: t.errors.somethingWentWrong,\n      defaultMessage: 'An unexpected error occurred. Please try again.',\n    },\n    notFound: {\n      icon: FileX,\n      iconColor: 'text-muted-foreground',\n      defaultTitle: t.errors.pageNotFound,\n      defaultMessage: 'The page you are looking for does not exist or has been moved.',\n    },\n    offline: {\n      icon: WifiOff,\n      iconColor: 'text-warning',\n      defaultTitle: t.errors.offline,\n      defaultMessage: t.errors.offlineMessage,\n    },\n    server: {\n      icon: ServerCrash,\n      iconColor: 'text-destructive',\n      defaultTitle: 'Server Error',\n      defaultMessage: 'Our servers are experiencing issues. Please try again later.',\n    },\n    empty: {\n      icon: Search,\n      iconColor: 'text-muted-foreground',\n      defaultTitle: t.common.noResults,\n      defaultMessage: 'Try adjusting your search or filters to find what you are looking for.',\n    },\n  };\n\n  const config = configs[type];\n  const Icon = config.icon;\n\n  return (\n    <Card className=\"max-w-md mx-auto\" data-testid={`error-state-${type}`}>\n      <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\n        <div className={`w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4 ${config.iconColor}`}>\n          <Icon className=\"w-8 h-8\" />\n        </div>\n        \n        <h3 className=\"text-xl font-semibold mb-2\" data-testid=\"text-error-title\">\n          {title || config.defaultTitle}\n        </h3>\n        \n        <p className=\"text-sm text-muted-foreground max-w-xs mb-6\" data-testid=\"text-error-message\">\n          {message || config.defaultMessage}\n        </p>\n        \n        <div className=\"flex flex-wrap gap-3 justify-center\">\n          {onRetry && (\n            <Button onClick={onRetry} data-testid=\"button-retry\">\n              <RefreshCw className=\"w-4 h-4 mr-2\" />\n              {t.errors.tryAgain}\n            </Button>\n          )}\n          \n          {showHomeButton && (\n            <Button variant=\"outline\" asChild>\n              <Link href=\"/\" data-testid=\"link-go-home\">\n                <Home className=\"w-4 h-4 mr-2\" />\n                {t.errors.goHome}\n              </Link>\n            </Button>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":3032,"size_tokens":null},"client/src/context/AuthContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, type ReactNode } from 'react';\nimport { User as FirebaseUser } from 'firebase/auth';\nimport { firebaseAuth, getUserProfile, type UserProfile } from '@/lib/firebase';\nimport { apiRequest } from '@/lib/queryClient';\n\ninterface User {\n  id: string;\n  username: string;\n  email: string;\n  createdAt?: string;\n  preferences?: {\n    darkMode: boolean;\n    autoplay: boolean;\n    quality: string;\n    notifications: boolean;\n  };\n}\n\ninterface AuthContextType {\n  user: User | null;\n  firebaseUser: FirebaseUser | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<{ success: boolean; error?: string }>;\n  register: (username: string, email: string, password: string) => Promise<{ success: boolean; error?: string }>;\n  logout: () => Promise<void>;\n  forgotPassword: (email: string) => Promise<{ success: boolean; error?: string }>;\n  resetPassword: (token: string, password: string) => Promise<{ success: boolean; error?: string }>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [firebaseUser, setFirebaseUser] = useState<FirebaseUser | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const unsubscribe = firebaseAuth.onAuthChange(async (fbUser) => {\n      if (fbUser) {\n        setFirebaseUser(fbUser);\n        try {\n          const profile = await getUserProfile(fbUser.uid);\n          if (profile) {\n            setUser({\n              id: profile.uid,\n              username: profile.username,\n              email: profile.email,\n              createdAt: profile.createdAt,\n              preferences: profile.preferences,\n            });\n          } else {\n            setUser({\n              id: fbUser.uid,\n              username: fbUser.displayName || fbUser.email?.split('@')[0] || 'User',\n              email: fbUser.email || '',\n            });\n          }\n        } catch (error) {\n          console.error('Failed to get user profile:', error);\n          setUser({\n            id: fbUser.uid,\n            username: fbUser.displayName || fbUser.email?.split('@')[0] || 'User',\n            email: fbUser.email || '',\n          });\n        }\n      } else {\n        setFirebaseUser(null);\n        setUser(null);\n      }\n      setIsLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    try {\n      const result = await firebaseAuth.signIn(email, password);\n      if (result.success && result.user) {\n        const profile = await getUserProfile(result.user.uid);\n        if (profile) {\n          setUser({\n            id: profile.uid,\n            username: profile.username,\n            email: profile.email,\n            createdAt: profile.createdAt,\n            preferences: profile.preferences,\n          });\n        }\n        return { success: true };\n      }\n      return { success: false, error: result.error || 'Login failed' };\n    } catch (error: any) {\n      return { success: false, error: error.message || 'Network error' };\n    }\n  };\n\n  const register = async (username: string, email: string, password: string) => {\n    try {\n      const result = await firebaseAuth.signUp(email, password, username);\n      if (result.success && result.user) {\n        setUser({\n          id: result.user.uid,\n          username,\n          email,\n          createdAt: new Date().toISOString(),\n          preferences: {\n            darkMode: true,\n            autoplay: true,\n            quality: 'auto',\n            notifications: true,\n          },\n        });\n        return { success: true };\n      }\n      return { success: false, error: result.error || 'Registration failed' };\n    } catch (error: any) {\n      return { success: false, error: error.message || 'Network error' };\n    }\n  };\n\n  const logout = async (): Promise<void> => {\n    try {\n      const result = await firebaseAuth.signOut();\n      if (result.success) {\n        setUser(null);\n        setFirebaseUser(null);\n      } else {\n        console.error('Logout failed:', result.error);\n      }\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n\n  const forgotPassword = async (email: string) => {\n    try {\n      const result = await firebaseAuth.resetPassword(email);\n      if (result.success) {\n        return { success: true };\n      }\n      return { success: false, error: result.error || 'Failed to send reset email' };\n    } catch (error: any) {\n      return { success: false, error: error.message || 'Request failed' };\n    }\n  };\n\n  const resetPassword = async (_token: string, _password: string) => {\n    return { \n      success: false, \n      error: 'Password reset is handled via the email link. Please check your inbox and click the link to reset your password.' \n    };\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        firebaseUser,\n        isAuthenticated: !!user,\n        isLoading,\n        login,\n        register,\n        logout,\n        forgotPassword,\n        resetPassword,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n","path":null,"size_bytes":5471,"size_tokens":null},"client/src/context/FavoritesContext.tsx":{"content":"import { createContext, useContext, type ReactNode } from \"react\";\nimport { useFavorites } from \"@/hooks/use-favorites\";\n\ninterface FavoritesContextType {\n  favorites: string[];\n  addFavorite: (videoId: string) => void;\n  removeFavorite: (videoId: string) => void;\n  toggleFavorite: (videoId: string) => void;\n  isFavorite: (videoId: string) => boolean;\n  count: number;\n}\n\nconst FavoritesContext = createContext<FavoritesContextType | null>(null);\n\nexport function FavoritesProvider({ children }: { children: ReactNode }) {\n  const favoritesState = useFavorites();\n\n  return (\n    <FavoritesContext.Provider value={favoritesState}>\n      {children}\n    </FavoritesContext.Provider>\n  );\n}\n\nexport function useFavoritesContext() {\n  const context = useContext(FavoritesContext);\n  if (!context) {\n    throw new Error(\"useFavoritesContext must be used within FavoritesProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":903,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\n\nconst app = express();\nconst httpServer = createServer(app);\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\napp.use(\n  express.json({\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":2560,"size_tokens":null},"client/src/components/CookieConsentBanner.tsx":{"content":"import { useState } from 'react';\nimport { useCookieConsent } from '@/context/CookieConsentContext';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport { Cookie, Settings2, X } from 'lucide-react';\nimport { Link } from 'wouter';\n\nexport function CookieConsentBanner() {\n  const { showBanner, acceptAll, acceptNecessary, savePreferences, preferences } = useCookieConsent();\n  const { t } = useLanguage();\n  const [showCustomize, setShowCustomize] = useState(false);\n  const [customPrefs, setCustomPrefs] = useState(preferences);\n\n  if (!showBanner) return null;\n\n  const handleSaveCustom = () => {\n    savePreferences(customPrefs);\n    setShowCustomize(false);\n  };\n\n  return (\n    <div \n      className=\"fixed bottom-0 left-0 right-0 z-50 p-4 bg-gradient-to-t from-background via-background to-transparent\"\n      data-testid=\"banner-cookie-consent\"\n    >\n      <Card className=\"max-w-4xl mx-auto\">\n        <CardContent className=\"p-4 md:p-6\">\n          {!showCustomize ? (\n            <div className=\"flex flex-col md:flex-row items-start md:items-center gap-4\">\n              <div className=\"flex items-start gap-3 flex-1\">\n                <div className=\"p-2 rounded-full bg-primary/10 shrink-0\">\n                  <Cookie className=\"w-5 h-5 text-primary\" />\n                </div>\n                <div className=\"space-y-1\">\n                  <h3 className=\"font-semibold text-sm\" data-testid=\"text-cookie-title\">\n                    {t.cookies.title}\n                  </h3>\n                  <p className=\"text-xs text-muted-foreground leading-relaxed\">\n                    {t.cookies.message}\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"flex flex-wrap items-center gap-2 w-full md:w-auto\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setShowCustomize(true)}\n                  className=\"flex-1 md:flex-none\"\n                  data-testid=\"button-customize-cookies\"\n                >\n                  <Settings2 className=\"w-4 h-4 mr-1\" />\n                  {t.cookies.customize}\n                </Button>\n                <Button\n                  variant=\"secondary\"\n                  size=\"sm\"\n                  onClick={acceptNecessary}\n                  className=\"flex-1 md:flex-none\"\n                  data-testid=\"button-accept-necessary\"\n                >\n                  {t.cookies.acceptNecessary}\n                </Button>\n                <Button\n                  size=\"sm\"\n                  onClick={acceptAll}\n                  className=\"flex-1 md:flex-none\"\n                  data-testid=\"button-accept-all-cookies\"\n                >\n                  {t.cookies.acceptAll}\n                </Button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"font-semibold\">{t.cookies.customize}</h3>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  onClick={() => setShowCustomize(false)}\n                  data-testid=\"button-close-customize\"\n                >\n                  <X className=\"w-4 h-4\" />\n                </Button>\n              </div>\n              \n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between py-2\">\n                  <div>\n                    <Label className=\"font-medium\">Necessary</Label>\n                    <p className=\"text-xs text-muted-foreground\">Required for the website to function</p>\n                  </div>\n                  <Switch checked disabled data-testid=\"switch-necessary-cookies\" />\n                </div>\n                \n                <div className=\"flex items-center justify-between py-2\">\n                  <div>\n                    <Label className=\"font-medium\">Analytics</Label>\n                    <p className=\"text-xs text-muted-foreground\">Help us improve our services</p>\n                  </div>\n                  <Switch\n                    checked={customPrefs.analytics}\n                    onCheckedChange={(checked) => setCustomPrefs(prev => ({ ...prev, analytics: checked }))}\n                    data-testid=\"switch-analytics-cookies\"\n                  />\n                </div>\n                \n                <div className=\"flex items-center justify-between py-2\">\n                  <div>\n                    <Label className=\"font-medium\">Marketing</Label>\n                    <p className=\"text-xs text-muted-foreground\">Personalized advertisements</p>\n                  </div>\n                  <Switch\n                    checked={customPrefs.marketing}\n                    onCheckedChange={(checked) => setCustomPrefs(prev => ({ ...prev, marketing: checked }))}\n                    data-testid=\"switch-marketing-cookies\"\n                  />\n                </div>\n                \n                <div className=\"flex items-center justify-between py-2\">\n                  <div>\n                    <Label className=\"font-medium\">Personalization</Label>\n                    <p className=\"text-xs text-muted-foreground\">Remember your preferences</p>\n                  </div>\n                  <Switch\n                    checked={customPrefs.personalization}\n                    onCheckedChange={(checked) => setCustomPrefs(prev => ({ ...prev, personalization: checked }))}\n                    data-testid=\"switch-personalization-cookies\"\n                  />\n                </div>\n              </div>\n              \n              <div className=\"flex items-center justify-between pt-2 border-t\">\n                <Link \n                  href=\"/privacy\" \n                  className=\"text-xs text-primary hover:underline\"\n                  data-testid=\"link-privacy-policy\"\n                >\n                  {t.cookies.privacyPolicy}\n                </Link>\n                <Button onClick={handleSaveCustom} data-testid=\"button-save-cookie-preferences\">\n                  {t.common.save}\n                </Button>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":6444,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"client/src/components/CategoryPills.tsx":{"content":"import { useRef, useState, useEffect } from \"react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface CategoryPillsProps {\n  categories: string[];\n  selectedCategory: string | null;\n  onCategorySelect: (category: string | null) => void;\n}\n\nexport function CategoryPills({ \n  categories, \n  selectedCategory, \n  onCategorySelect \n}: CategoryPillsProps) {\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const [showLeftArrow, setShowLeftArrow] = useState(false);\n  const [showRightArrow, setShowRightArrow] = useState(false);\n\n  const checkScrollButtons = () => {\n    if (scrollRef.current) {\n      const { scrollLeft, scrollWidth, clientWidth } = scrollRef.current;\n      setShowLeftArrow(scrollLeft > 0);\n      setShowRightArrow(scrollLeft < scrollWidth - clientWidth - 10);\n    }\n  };\n\n  useEffect(() => {\n    checkScrollButtons();\n    window.addEventListener(\"resize\", checkScrollButtons);\n    return () => window.removeEventListener(\"resize\", checkScrollButtons);\n  }, []);\n\n  const scroll = (direction: \"left\" | \"right\") => {\n    if (scrollRef.current) {\n      const scrollAmount = 200;\n      scrollRef.current.scrollBy({\n        left: direction === \"left\" ? -scrollAmount : scrollAmount,\n        behavior: \"smooth\",\n      });\n      setTimeout(checkScrollButtons, 300);\n    }\n  };\n\n  const allCategories = [\"All\", ...categories];\n\n  return (\n    <div className=\"relative py-4\" data-testid=\"category-pills\">\n      {/* Left scroll button */}\n      {showLeftArrow && (\n        <div className=\"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-gradient-to-r from-background via-background to-transparent pr-8\">\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            onClick={() => scroll(\"left\")}\n            className=\"rounded-full glass\"\n            data-testid=\"button-scroll-left\"\n          >\n            <ChevronLeft className=\"w-5 h-5\" />\n          </Button>\n        </div>\n      )}\n\n      {/* Scrollable pills container */}\n      <div\n        ref={scrollRef}\n        onScroll={checkScrollButtons}\n        className=\"flex gap-2 overflow-x-auto scrollbar-hide px-4 md:px-8\"\n        data-testid=\"category-pills-scroll\"\n      >\n        {allCategories.map((category) => {\n          const isSelected = \n            (category === \"All\" && selectedCategory === null) ||\n            category === selectedCategory;\n\n          return (\n            <Badge\n              key={category}\n              variant={isSelected ? \"default\" : \"outline\"}\n              className={`flex-shrink-0 px-4 py-2 text-sm font-medium cursor-pointer transition-all duration-150 ${\n                isSelected\n                  ? \"bg-primary text-primary-foreground\"\n                  : \"glass hover:bg-white/10\"\n              }`}\n              onClick={() => onCategorySelect(category === \"All\" ? null : category)}\n              data-testid={`category-pill-${category.toLowerCase().replace(/\\s+/g, \"-\")}`}\n            >\n              {category}\n            </Badge>\n          );\n        })}\n      </div>\n\n      {/* Right scroll button */}\n      {showRightArrow && (\n        <div className=\"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-gradient-to-l from-background via-background to-transparent pl-8\">\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            onClick={() => scroll(\"right\")}\n            className=\"rounded-full glass\"\n            data-testid=\"button-scroll-right\"\n          >\n            <ChevronRight className=\"w-5 h-5\" />\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":3652,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"server/storage.ts":{"content":"import type { Video, Category, Performer, Tag, PaginatedVideos, User } from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\n\nexport interface IStorage {\n  getVideosPage(page: number): Promise<PaginatedVideos>;\n  getVideoById(pageNum: number, videoIndex: number): Promise<Video | undefined>;\n  getVideoByGlobalId(globalId: string): Promise<Video | undefined>;\n  getCategories(): Promise<Category[]>;\n  getPerformers(): Promise<Performer[]>;\n  getTags(): Promise<Tag[]>;\n  searchVideos(query: string, page?: number): Promise<PaginatedVideos>;\n  getVideosByCategory(category: string, page?: number): Promise<PaginatedVideos>;\n  getVideosByPerformer(performer: string, page?: number): Promise<PaginatedVideos>;\n  getVideosByTag(tag: string, page?: number): Promise<PaginatedVideos>;\n  getTotalPages(): number;\n  getTotalVideos(): number;\n}\n\ninterface RawVideoData {\n  embed: string;\n  thumbnail: string;\n  thumbnail2?: string;\n  screenshots?: string;\n  screenshots2?: string;\n  title: string;\n  tags: string;\n  categories: string;\n  actors: string;\n  duration: string;\n  views: string;\n  likes: string;\n  dislikes: string;\n}\n\nfunction parseVideoData(raw: RawVideoData, pageNum: number, index: number): Video {\n  const embedMatch = raw.embed.match(/src=\"([^\"]+)\"/);\n  const embedUrl = embedMatch ? embedMatch[1] : '';\n  \n  const durationSeconds = parseInt(raw.duration) || 0;\n  const minutes = Math.floor(durationSeconds / 60);\n  const seconds = durationSeconds % 60;\n  const durationFormatted = `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  \n  const viewsCount = parseInt(raw.views) || 0;\n  let viewsFormatted = viewsCount.toString();\n  if (viewsCount >= 1000000) {\n    viewsFormatted = (viewsCount / 1000000).toFixed(1) + 'M';\n  } else if (viewsCount >= 1000) {\n    viewsFormatted = (viewsCount / 1000).toFixed(1) + 'K';\n  }\n  \n  const categories = raw.categories ? raw.categories.split(';').map(c => c.trim()).filter(Boolean) : [];\n  const tags = raw.tags ? raw.tags.split(';').map(t => t.trim()).filter(Boolean) : [];\n  const actors = raw.actors ? raw.actors.split(';').map(a => a.trim()).filter(Boolean) : [];\n  const screenshots = raw.screenshots ? raw.screenshots.split(';').filter(Boolean) : [];\n  \n  return {\n    id: `${pageNum}-${index}`,\n    title: raw.title || 'Untitled Video',\n    thumbnailUrl: raw.thumbnail || '',\n    thumbnail2Url: raw.thumbnail2,\n    embedCode: raw.embed,\n    embedUrl,\n    duration: durationFormatted,\n    durationSeconds,\n    views: viewsFormatted,\n    viewsCount,\n    likes: parseInt(raw.likes) || 0,\n    dislikes: parseInt(raw.dislikes) || 0,\n    category: categories[0] || 'Uncategorized',\n    categories,\n    tags,\n    actors,\n    screenshots,\n  };\n}\n\nfunction formatNumber(num: number): string {\n  if (num >= 1000000) {\n    return (num / 1000000).toFixed(1) + 'M';\n  } else if (num >= 1000) {\n    return (num / 1000).toFixed(1) + 'K';\n  }\n  return num.toString();\n}\n\nexport class VideoStorage implements IStorage {\n  private dataDir: string;\n  private totalPages: number = 0;\n  private categoriesCache: Map<string, number> = new Map();\n  private performersCache: Map<string, number> = new Map();\n  private tagsCache: Map<string, number> = new Map();\n  private initialized: boolean = false;\n  private videosPerPage: number = 0;\n\n  constructor() {\n    this.dataDir = path.join(process.cwd(), 'data');\n    this.initialize();\n  }\n\n  private initialize() {\n    try {\n      const files = fs.readdirSync(this.dataDir);\n      const jsonFiles = files.filter(f => f.startsWith('videos_page_') && f.endsWith('.json'));\n      this.totalPages = jsonFiles.length;\n      \n      if (this.totalPages > 0) {\n        const firstPagePath = path.join(this.dataDir, 'videos_page_1.json');\n        if (fs.existsSync(firstPagePath)) {\n          const data = JSON.parse(fs.readFileSync(firstPagePath, 'utf-8'));\n          this.videosPerPage = Array.isArray(data) ? data.length : 0;\n        }\n      }\n      \n      this.buildMetadataCache();\n      this.initialized = true;\n      console.log(`VideoStorage initialized: ${this.totalPages} pages found`);\n    } catch (error) {\n      console.error('Failed to initialize VideoStorage:', error);\n      this.totalPages = 0;\n    }\n  }\n\n  private buildMetadataCache() {\n    const pagesToSample = Math.min(50, this.totalPages);\n    \n    for (let i = 1; i <= pagesToSample; i++) {\n      try {\n        const filePath = path.join(this.dataDir, `videos_page_${i}.json`);\n        if (!fs.existsSync(filePath)) continue;\n        \n        const data: RawVideoData[] = JSON.parse(fs.readFileSync(filePath, 'utf-8'));\n        \n        for (const video of data) {\n          if (video.categories) {\n            const cats = video.categories.split(';').map(c => c.trim()).filter(Boolean);\n            for (const cat of cats) {\n              this.categoriesCache.set(cat, (this.categoriesCache.get(cat) || 0) + 1);\n            }\n          }\n          \n          if (video.actors) {\n            const performers = video.actors.split(';').map(a => a.trim()).filter(Boolean);\n            for (const performer of performers) {\n              this.performersCache.set(performer, (this.performersCache.get(performer) || 0) + 1);\n            }\n          }\n          \n          if (video.tags) {\n            const tagsList = video.tags.split(';').map(t => t.trim()).filter(Boolean);\n            for (const tag of tagsList) {\n              this.tagsCache.set(tag, (this.tagsCache.get(tag) || 0) + 1);\n            }\n          }\n        }\n      } catch (error) {\n        console.error(`Error reading page ${i}:`, error);\n      }\n    }\n  }\n\n  private loadPage(pageNum: number): Video[] {\n    try {\n      const filePath = path.join(this.dataDir, `videos_page_${pageNum}.json`);\n      if (!fs.existsSync(filePath)) {\n        return [];\n      }\n      \n      const data: RawVideoData[] = JSON.parse(fs.readFileSync(filePath, 'utf-8'));\n      return data.map((raw, index) => parseVideoData(raw, pageNum, index));\n    } catch (error) {\n      console.error(`Error loading page ${pageNum}:`, error);\n      return [];\n    }\n  }\n\n  async getVideosPage(page: number): Promise<PaginatedVideos> {\n    const validPage = Math.max(1, Math.min(page, this.totalPages));\n    const videos = this.loadPage(validPage);\n    \n    return {\n      videos,\n      page: validPage,\n      totalPages: this.totalPages,\n      totalVideos: this.totalPages * this.videosPerPage,\n      hasNext: validPage < this.totalPages,\n      hasPrevious: validPage > 1,\n    };\n  }\n\n  async getVideoById(pageNum: number, videoIndex: number): Promise<Video | undefined> {\n    const videos = this.loadPage(pageNum);\n    return videos[videoIndex];\n  }\n\n  async getVideoByGlobalId(globalId: string): Promise<Video | undefined> {\n    const parts = globalId.split('-');\n    if (parts.length !== 2) return undefined;\n    \n    const pageNum = parseInt(parts[0]);\n    const videoIndex = parseInt(parts[1]);\n    \n    if (isNaN(pageNum) || isNaN(videoIndex)) return undefined;\n    \n    return this.getVideoById(pageNum, videoIndex);\n  }\n\n  async getCategories(): Promise<Category[]> {\n    const iconMap: Record<string, string> = {\n      'Amateur': 'camera',\n      'Asian': 'globe',\n      'Babe': 'star',\n      'BBW': 'circle',\n      'Big Ass': 'circle',\n      'Big Tits': 'circle',\n      'Blonde': 'sun',\n      'Blowjob': 'circle',\n      'Brunette': 'moon',\n      'Creampie': 'circle',\n      'Cumshot': 'circle',\n      'Ebony': 'circle',\n      'Fetish': 'zap',\n      'Hardcore': 'flame',\n      'HD': 'monitor',\n      'Interracial': 'users',\n      'Latina': 'globe',\n      'Lesbian': 'heart',\n      'MILF': 'star',\n      'POV': 'eye',\n      'Pornstar': 'star',\n      'Public': 'globe',\n      'Reality': 'video',\n      'Redhead': 'flame',\n      'Teen': 'user',\n      'Threesome': 'users',\n      'Toys': 'box',\n      'Verified Models': 'check-circle',\n      'Vintage': 'clock',\n    };\n    \n    return Array.from(this.categoriesCache.entries())\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 50)\n      .map(([name, count]) => ({\n        id: name.toLowerCase().replace(/\\s+/g, '-'),\n        name,\n        icon: iconMap[name] || 'folder',\n        count: count * Math.ceil(this.totalPages / 50),\n      }));\n  }\n\n  async getPerformers(): Promise<Performer[]> {\n    return Array.from(this.performersCache.entries())\n      .filter(([name]) => name.length > 0)\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 100)\n      .map(([name, count]) => ({\n        id: name.toLowerCase().replace(/\\s+/g, '-'),\n        name,\n        videoCount: count * Math.ceil(this.totalPages / 50),\n      }));\n  }\n\n  async getTags(): Promise<Tag[]> {\n    return Array.from(this.tagsCache.entries())\n      .filter(([name]) => name.length > 0)\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 100)\n      .map(([name, count]) => ({\n        id: name.toLowerCase().replace(/\\s+/g, '-'),\n        name,\n        count: count * Math.ceil(this.totalPages / 50),\n      }));\n  }\n\n  async searchVideos(query: string, page: number = 1): Promise<PaginatedVideos> {\n    const lowerQuery = query.toLowerCase();\n    const results: Video[] = [];\n    const searchPages = Math.min(20, this.totalPages);\n    \n    for (let i = 1; i <= searchPages; i++) {\n      const videos = this.loadPage(i);\n      const matches = videos.filter(v => \n        v.title.toLowerCase().includes(lowerQuery) ||\n        v.tags.some(t => t.toLowerCase().includes(lowerQuery)) ||\n        v.categories.some(c => c.toLowerCase().includes(lowerQuery)) ||\n        v.actors.some(a => a.toLowerCase().includes(lowerQuery))\n      );\n      results.push(...matches);\n      \n      if (results.length >= 100) break;\n    }\n    \n    const itemsPerPage = 20;\n    const startIndex = (page - 1) * itemsPerPage;\n    const paginatedResults = results.slice(startIndex, startIndex + itemsPerPage);\n    const totalPages = Math.ceil(results.length / itemsPerPage);\n    \n    return {\n      videos: paginatedResults,\n      page,\n      totalPages,\n      totalVideos: results.length,\n      hasNext: page < totalPages,\n      hasPrevious: page > 1,\n    };\n  }\n\n  async getVideosByCategory(category: string, page: number = 1): Promise<PaginatedVideos> {\n    const lowerCategory = category.toLowerCase();\n    const results: Video[] = [];\n    const searchPages = Math.min(30, this.totalPages);\n    \n    for (let i = 1; i <= searchPages; i++) {\n      const videos = this.loadPage(i);\n      const matches = videos.filter(v => \n        v.categories.some(c => c.toLowerCase() === lowerCategory)\n      );\n      results.push(...matches);\n      \n      if (results.length >= 200) break;\n    }\n    \n    const itemsPerPage = 20;\n    const startIndex = (page - 1) * itemsPerPage;\n    const paginatedResults = results.slice(startIndex, startIndex + itemsPerPage);\n    const totalPages = Math.ceil(results.length / itemsPerPage);\n    \n    return {\n      videos: paginatedResults,\n      page,\n      totalPages,\n      totalVideos: results.length,\n      hasNext: page < totalPages,\n      hasPrevious: page > 1,\n    };\n  }\n\n  async getVideosByPerformer(performer: string, page: number = 1): Promise<PaginatedVideos> {\n    const lowerPerformer = performer.toLowerCase();\n    const results: Video[] = [];\n    const searchPages = Math.min(30, this.totalPages);\n    \n    for (let i = 1; i <= searchPages; i++) {\n      const videos = this.loadPage(i);\n      const matches = videos.filter(v => \n        v.actors.some(a => a.toLowerCase().includes(lowerPerformer))\n      );\n      results.push(...matches);\n      \n      if (results.length >= 100) break;\n    }\n    \n    const itemsPerPage = 20;\n    const startIndex = (page - 1) * itemsPerPage;\n    const paginatedResults = results.slice(startIndex, startIndex + itemsPerPage);\n    const totalPages = Math.ceil(results.length / itemsPerPage);\n    \n    return {\n      videos: paginatedResults,\n      page,\n      totalPages,\n      totalVideos: results.length,\n      hasNext: page < totalPages,\n      hasPrevious: page > 1,\n    };\n  }\n\n  async getVideosByTag(tag: string, page: number = 1): Promise<PaginatedVideos> {\n    const lowerTag = tag.toLowerCase();\n    const results: Video[] = [];\n    const searchPages = Math.min(30, this.totalPages);\n    \n    for (let i = 1; i <= searchPages; i++) {\n      const videos = this.loadPage(i);\n      const matches = videos.filter(v => \n        v.tags.some(t => t.toLowerCase() === lowerTag)\n      );\n      results.push(...matches);\n      \n      if (results.length >= 200) break;\n    }\n    \n    const itemsPerPage = 20;\n    const startIndex = (page - 1) * itemsPerPage;\n    const paginatedResults = results.slice(startIndex, startIndex + itemsPerPage);\n    const totalPages = Math.ceil(results.length / itemsPerPage);\n    \n    return {\n      videos: paginatedResults,\n      page,\n      totalPages,\n      totalVideos: results.length,\n      hasNext: page < totalPages,\n      hasPrevious: page > 1,\n    };\n  }\n\n  getTotalPages(): number {\n    return this.totalPages;\n  }\n\n  getTotalVideos(): number {\n    return this.totalPages * this.videosPerPage;\n  }\n}\n\nexport const storage = new VideoStorage();\n","path":null,"size_bytes":13090,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"client/src/pages/Offline.tsx":{"content":"import { useEffect, useState } from 'react';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { WifiOff, RefreshCw, Loader2 } from 'lucide-react';\n\nexport default function Offline() {\n  const { t } = useLanguage();\n  const [isChecking, setIsChecking] = useState(false);\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (isOnline) {\n      window.location.href = '/';\n    }\n  }, [isOnline]);\n\n  const handleRetry = async () => {\n    setIsChecking(true);\n    \n    try {\n      const response = await fetch('/api/health', { \n        method: 'HEAD',\n        cache: 'no-store' \n      });\n      if (response.ok) {\n        window.location.href = '/';\n      }\n    } catch (error) {\n      setIsOnline(false);\n    } finally {\n      setIsChecking(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-b from-background to-muted p-4\">\n      <Card className=\"w-full max-w-md\" data-testid=\"card-offline\">\n        <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\n          <div className=\"w-20 h-20 rounded-full bg-warning/10 flex items-center justify-center mb-6 animate-pulse\">\n            <WifiOff className=\"w-10 h-10 text-warning\" />\n          </div>\n          \n          <h1 className=\"text-2xl font-bold mb-2\" data-testid=\"text-offline-title\">\n            {t.errors.offline}\n          </h1>\n          \n          <p className=\"text-muted-foreground max-w-xs mb-8\" data-testid=\"text-offline-message\">\n            {t.errors.offlineMessage}\n          </p>\n          \n          <div className=\"space-y-4 w-full max-w-xs\">\n            <Button \n              onClick={handleRetry} \n              disabled={isChecking}\n              className=\"w-full\"\n              data-testid=\"button-retry-connection\"\n            >\n              {isChecking ? (\n                <Loader2 className=\"w-4 h-4 animate-spin mr-2\" />\n              ) : (\n                <RefreshCw className=\"w-4 h-4 mr-2\" />\n              )}\n              {t.errors.tryAgain}\n            </Button>\n            \n            <div className=\"text-xs text-muted-foreground\">\n              <p>Troubleshooting tips:</p>\n              <ul className=\"list-disc text-left pl-4 mt-2 space-y-1\">\n                <li>Check your WiFi or mobile data connection</li>\n                <li>Try turning airplane mode off and on</li>\n                <li>Move closer to your router</li>\n                <li>Restart your device</li>\n              </ul>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":3113,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { LanguageProvider } from \"@/context/LanguageContext\";\nimport { AgeVerificationProvider } from \"@/context/AgeVerificationContext\";\nimport { CookieConsentProvider } from \"@/context/CookieConsentContext\";\nimport { AuthProvider } from \"@/context/AuthContext\";\nimport { GuestLimitProvider } from \"@/context/GuestLimitContext\";\nimport { FavoritesProvider } from \"@/context/FavoritesContext\";\nimport { PlaybackProvider } from \"@/context/PlaybackContext\";\nimport { AgeVerificationModal } from \"@/components/AgeVerificationModal\";\nimport { CookieConsentBanner } from \"@/components/CookieConsentBanner\";\nimport { GuestLimitBanner } from \"@/components/GuestLimitBanner\";\nimport Home from \"@/pages/Home\";\nimport VideoPlayer from \"@/pages/VideoPlayer\";\nimport Login from \"@/pages/Login\";\nimport Register from \"@/pages/Register\";\nimport ForgotPassword from \"@/pages/ForgotPassword\";\nimport Settings from \"@/pages/Settings\";\nimport History from \"@/pages/History\";\nimport WatchLater from \"@/pages/WatchLater\";\nimport Notifications from \"@/pages/Notifications\";\nimport About from \"@/pages/About\";\nimport Privacy from \"@/pages/Privacy\";\nimport Terms from \"@/pages/Terms\";\nimport Contact from \"@/pages/Contact\";\nimport Welcome from \"@/pages/Welcome\";\nimport Offline from \"@/pages/Offline\";\nimport Categories from \"@/pages/Categories\";\nimport Favorites from \"@/pages/Favorites\";\nimport Trending from \"@/pages/Trending\";\nimport Profile from \"@/pages/Profile\";\nimport SearchResults from \"@/pages/SearchResults\";\nimport Tags from \"@/pages/Tags\";\nimport Performers from \"@/pages/Performers\";\nimport NotFound from \"@/pages/not-found\";\nimport Playlists from \"@/pages/Playlists\";\nimport Help from \"@/pages/Help\";\nimport Feedback from \"@/pages/Feedback\";\nimport AccessibilitySettings from \"@/pages/AccessibilitySettings\";\nimport PlaybackSettings from \"@/pages/PlaybackSettings\";\nimport Downloads from \"@/pages/Downloads\";\nimport CategoryDetail from \"@/pages/CategoryDetail\";\nimport PerformerDetail from \"@/pages/PerformerDetail\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/video/:id\" component={VideoPlayer} />\n      <Route path=\"/login\" component={Login} />\n      <Route path=\"/register\" component={Register} />\n      <Route path=\"/forgot-password\" component={ForgotPassword} />\n      <Route path=\"/settings\" component={Settings} />\n      <Route path=\"/history\" component={History} />\n      <Route path=\"/watch-later\" component={WatchLater} />\n      <Route path=\"/notifications\" component={Notifications} />\n      <Route path=\"/about\" component={About} />\n      <Route path=\"/privacy\" component={Privacy} />\n      <Route path=\"/terms\" component={Terms} />\n      <Route path=\"/contact\" component={Contact} />\n      <Route path=\"/welcome\" component={Welcome} />\n      <Route path=\"/offline\" component={Offline} />\n      <Route path=\"/categories\" component={Categories} />\n      <Route path=\"/category/:name\" component={CategoryDetail} />\n      <Route path=\"/favorites\" component={Favorites} />\n      <Route path=\"/trending\" component={Trending} />\n      <Route path=\"/profile\" component={Profile} />\n      <Route path=\"/search\" component={SearchResults} />\n      <Route path=\"/tags\" component={Tags} />\n      <Route path=\"/performers\" component={Performers} />\n      <Route path=\"/performer/:name\" component={PerformerDetail} />\n      <Route path=\"/playlists\" component={Playlists} />\n      <Route path=\"/help\" component={Help} />\n      <Route path=\"/feedback\" component={Feedback} />\n      <Route path=\"/accessibility\" component={AccessibilitySettings} />\n      <Route path=\"/playback-settings\" component={PlaybackSettings} />\n      <Route path=\"/downloads\" component={Downloads} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <LanguageProvider>\n        <AgeVerificationProvider>\n          <CookieConsentProvider>\n            <AuthProvider>\n              <GuestLimitProvider>\n                <FavoritesProvider>\n                  <PlaybackProvider>\n                    <TooltipProvider>\n                      <AgeVerificationModal />\n                      <Toaster />\n                      <Router />\n                      <CookieConsentBanner />\n                      <GuestLimitBanner />\n                    </TooltipProvider>\n                  </PlaybackProvider>\n                </FavoritesProvider>\n              </GuestLimitProvider>\n            </AuthProvider>\n          </CookieConsentProvider>\n        </AgeVerificationProvider>\n      </LanguageProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":4919,"size_tokens":null},"client/src/components/InstallPrompt.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Download, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\ninterface BeforeInstallPromptEvent extends Event {\n  prompt(): Promise<void>;\n  userChoice: Promise<{ outcome: \"accepted\" | \"dismissed\" }>;\n}\n\nexport function InstallPrompt() {\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\n  const [showPrompt, setShowPrompt] = useState(false);\n  const [isDismissed, setIsDismissed] = useState(false);\n\n  useEffect(() => {\n    const dismissed = localStorage.getItem(\"pwa_prompt_dismissed\");\n    if (dismissed) {\n      setIsDismissed(true);\n      return;\n    }\n\n    const handler = (e: Event) => {\n      e.preventDefault();\n      setDeferredPrompt(e as BeforeInstallPromptEvent);\n      setTimeout(() => setShowPrompt(true), 3000);\n    };\n\n    window.addEventListener(\"beforeinstallprompt\", handler);\n\n    return () => {\n      window.removeEventListener(\"beforeinstallprompt\", handler);\n    };\n  }, []);\n\n  const handleInstall = async () => {\n    if (!deferredPrompt) return;\n\n    deferredPrompt.prompt();\n    const { outcome } = await deferredPrompt.userChoice;\n\n    if (outcome === \"accepted\") {\n      setShowPrompt(false);\n    }\n    setDeferredPrompt(null);\n  };\n\n  const handleDismiss = () => {\n    setShowPrompt(false);\n    setIsDismissed(true);\n    localStorage.setItem(\"pwa_prompt_dismissed\", \"true\");\n  };\n\n  if (isDismissed || !showPrompt || !deferredPrompt) {\n    return null;\n  }\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0, y: 100 }}\n        animate={{ opacity: 1, y: 0 }}\n        exit={{ opacity: 0, y: 100 }}\n        className=\"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-50\"\n        data-testid=\"install-prompt\"\n      >\n        <div className=\"glass-heavy rounded-xl p-4 shadow-xl\">\n          <div className=\"flex items-start gap-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0\">\n              <Download className=\"w-5 h-5 text-white\" />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <h3 className=\"font-semibold text-foreground mb-1\">Install Blueberry</h3>\n              <p className=\"text-sm text-muted-foreground mb-3\">\n                Install our app for a better experience with faster loading and offline access.\n              </p>\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  size=\"sm\"\n                  onClick={handleInstall}\n                  className=\"rounded-full bg-gradient-to-r from-blue-600 to-purple-600\"\n                  data-testid=\"button-install-app\"\n                >\n                  Install\n                </Button>\n                <Button\n                  size=\"sm\"\n                  variant=\"ghost\"\n                  onClick={handleDismiss}\n                  className=\"rounded-full\"\n                  data-testid=\"button-dismiss-install\"\n                >\n                  Not now\n                </Button>\n              </div>\n            </div>\n            <Button\n              size=\"icon\"\n              variant=\"ghost\"\n              onClick={handleDismiss}\n              className=\"h-6 w-6 rounded-full flex-shrink-0\"\n            >\n              <X className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","path":null,"size_bytes":3549,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"client/src/hooks/use-favorites.ts":{"content":"import { useState, useEffect, useCallback } from \"react\";\n\nconst FAVORITES_KEY = \"blueberry_favorites\";\n\nexport function useFavorites() {\n  const [favorites, setFavorites] = useState<string[]>(() => {\n    if (typeof window === \"undefined\") return [];\n    try {\n      const stored = localStorage.getItem(FAVORITES_KEY);\n      return stored ? JSON.parse(stored) : [];\n    } catch {\n      return [];\n    }\n  });\n\n  useEffect(() => {\n    try {\n      localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n    } catch (error) {\n      console.error(\"Failed to save favorites:\", error);\n    }\n  }, [favorites]);\n\n  const addFavorite = useCallback((videoId: string) => {\n    setFavorites((prev) => {\n      if (prev.includes(videoId)) return prev;\n      return [...prev, videoId];\n    });\n  }, []);\n\n  const removeFavorite = useCallback((videoId: string) => {\n    setFavorites((prev) => prev.filter((id) => id !== videoId));\n  }, []);\n\n  const toggleFavorite = useCallback((videoId: string) => {\n    setFavorites((prev) => {\n      if (prev.includes(videoId)) {\n        return prev.filter((id) => id !== videoId);\n      }\n      return [...prev, videoId];\n    });\n  }, []);\n\n  const isFavorite = useCallback(\n    (videoId: string) => favorites.includes(videoId),\n    [favorites]\n  );\n\n  return {\n    favorites,\n    addFavorite,\n    removeFavorite,\n    toggleFavorite,\n    isFavorite,\n    count: favorites.length,\n  };\n}\n","path":null,"size_bytes":1418,"size_tokens":null},"client/src/pages/Home.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/Header\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { HeroSection } from \"@/components/HeroSection\";\nimport { CategoryPills } from \"@/components/CategoryPills\";\nimport { VideoGrid } from \"@/components/VideoGrid\";\nimport { Footer } from \"@/components/Footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { ChevronLeft, ChevronRight, ChevronsLeft, ChevronsRight } from \"lucide-react\";\nimport type { PaginatedVideos, Category } from \"@shared/schema\";\n\ntype SortOption = \"default\" | \"views\" | \"date\" | \"duration\";\n\nexport default function Home() {\n  const { t } = useLanguage();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n  const [sortBy, setSortBy] = useState<SortOption>(\"default\");\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const buildQueryKey = () => {\n    const params = new URLSearchParams();\n    params.set(\"page\", currentPage.toString());\n    if (searchQuery.trim()) params.set(\"search\", searchQuery.trim());\n    if (selectedCategory) params.set(\"category\", selectedCategory);\n    return `/api/videos?${params.toString()}`;\n  };\n\n  const { data: videosData, isLoading: isLoadingVideos } = useQuery<PaginatedVideos>({\n    queryKey: [buildQueryKey()],\n  });\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const categoryNames = useMemo(() => \n    categories.map(c => c.name),\n    [categories]\n  );\n\n  const videos = videosData?.videos || [];\n  const totalPages = videosData?.totalPages || 1;\n  const hasNext = videosData?.hasNext || false;\n  const hasPrevious = videosData?.hasPrevious || false;\n\n  const sortedVideos = useMemo(() => {\n    const sorted = [...videos];\n    switch (sortBy) {\n      case \"views\":\n        return sorted.sort((a, b) => (b.viewsCount || 0) - (a.viewsCount || 0));\n      case \"duration\":\n        return sorted.sort((a, b) => (b.durationSeconds || 0) - (a.durationSeconds || 0));\n      default:\n        return sorted;\n    }\n  }, [videos, sortBy]);\n\n  const handleCategorySelect = (category: string | null) => {\n    setSelectedCategory(category);\n    setCurrentPage(1);\n  };\n\n  const handleSearch = (query: string) => {\n    setSearchQuery(query);\n    setCurrentPage(1);\n  };\n\n  const goToPage = (page: number) => {\n    setCurrentPage(Math.max(1, Math.min(page, totalPages)));\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const showFilteredResults = searchQuery.trim() || selectedCategory;\n\n  const renderPagination = () => {\n    if (totalPages <= 1) return null;\n\n    const pageNumbers = [];\n    const maxVisiblePages = 5;\n    let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\n    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\n\n    if (endPage - startPage + 1 < maxVisiblePages) {\n      startPage = Math.max(1, endPage - maxVisiblePages + 1);\n    }\n\n    for (let i = startPage; i <= endPage; i++) {\n      pageNumbers.push(i);\n    }\n\n    return (\n      <div className=\"flex items-center justify-center gap-2 py-8\" data-testid=\"pagination-controls\">\n        <Button\n          variant=\"outline\"\n          size=\"icon\"\n          onClick={() => goToPage(1)}\n          disabled={!hasPrevious}\n          data-testid=\"button-first-page\"\n        >\n          <ChevronsLeft className=\"w-4 h-4\" />\n        </Button>\n        <Button\n          variant=\"outline\"\n          size=\"icon\"\n          onClick={() => goToPage(currentPage - 1)}\n          disabled={!hasPrevious}\n          data-testid=\"button-prev-page\"\n        >\n          <ChevronLeft className=\"w-4 h-4\" />\n        </Button>\n\n        <div className=\"flex items-center gap-1\">\n          {startPage > 1 && (\n            <>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => goToPage(1)}\n                data-testid=\"button-page-1\"\n              >\n                1\n              </Button>\n              {startPage > 2 && <span className=\"px-2 text-muted-foreground\">...</span>}\n            </>\n          )}\n\n          {pageNumbers.map((page) => (\n            <Button\n              key={page}\n              variant={page === currentPage ? \"default\" : \"ghost\"}\n              size=\"sm\"\n              onClick={() => goToPage(page)}\n              data-testid={`button-page-${page}`}\n            >\n              {page}\n            </Button>\n          ))}\n\n          {endPage < totalPages && (\n            <>\n              {endPage < totalPages - 1 && <span className=\"px-2 text-muted-foreground\">...</span>}\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => goToPage(totalPages)}\n                data-testid={`button-page-${totalPages}`}\n              >\n                {totalPages}\n              </Button>\n            </>\n          )}\n        </div>\n\n        <Button\n          variant=\"outline\"\n          size=\"icon\"\n          onClick={() => goToPage(currentPage + 1)}\n          disabled={!hasNext}\n          data-testid=\"button-next-page\"\n        >\n          <ChevronRight className=\"w-4 h-4\" />\n        </Button>\n        <Button\n          variant=\"outline\"\n          size=\"icon\"\n          onClick={() => goToPage(totalPages)}\n          disabled={!hasNext}\n          data-testid=\"button-last-page\"\n        >\n          <ChevronsRight className=\"w-4 h-4\" />\n        </Button>\n\n        <span className=\"ml-4 text-sm text-muted-foreground\" data-testid=\"text-page-info\">\n          {t.common.page} {currentPage} {t.common.of} {totalPages}\n        </span>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={handleSearch}\n        sortBy={sortBy}\n        onSortChange={setSortBy}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={selectedCategory}\n        onCategorySelect={handleCategorySelect}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-16\">\n        {!showFilteredResults && <HeroSection />}\n\n        <div className=\"sticky top-16 z-30 bg-background/80 backdrop-blur-lg border-b border-white/5\">\n          <div className=\"max-w-[1920px] mx-auto\">\n            <CategoryPills\n              categories={categoryNames}\n              selectedCategory={selectedCategory}\n              onCategorySelect={handleCategorySelect}\n            />\n          </div>\n        </div>\n\n        <div className=\"max-w-[1920px] mx-auto\" id=\"videos\">\n          {isLoadingVideos ? (\n            <div className=\"px-4 md:px-8 py-6\">\n              <Skeleton className=\"h-8 w-48 mb-6\" />\n              <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n                {Array.from({ length: 20 }).map((_, i) => (\n                  <div key={i} className=\"space-y-2\">\n                    <Skeleton className=\"aspect-video rounded-lg\" />\n                    <Skeleton className=\"h-4 w-full\" />\n                    <Skeleton className=\"h-3 w-2/3\" />\n                  </div>\n                ))}\n              </div>\n            </div>\n          ) : (\n            <>\n              <VideoGrid\n                title={\n                  searchQuery\n                    ? `${t.common.search}: \"${searchQuery}\"`\n                    : selectedCategory\n                    ? `${selectedCategory} ${t.common.videos}`\n                    : t.common.videos\n                }\n                videos={sortedVideos}\n                isLoading={isLoadingVideos}\n                emptyMessage={\n                  searchQuery\n                    ? `${t.common.noResults} \"${searchQuery}\"`\n                    : selectedCategory\n                    ? `${t.common.noResults} ${selectedCategory}`\n                    : t.common.noResults\n                }\n                sectionId=\"main\"\n              />\n              {renderPagination()}\n            </>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":8463,"size_tokens":null},"client/src/pages/About.tsx":{"content":"import { Link } from 'wouter';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { ArrowLeft, Heart, Code, Users, Sparkles } from 'lucide-react';\n\nexport default function About() {\n  const { t } = useLanguage();\n\n  const developers = [\n    {\n      name: 'Roshan Sahu',\n      role: 'Lead Developer',\n      description: 'Full-stack architecture and system design',\n    },\n    {\n      name: 'Papun Sahu',\n      role: 'Frontend Developer',\n      description: 'UI/UX design and user experience',\n    },\n    {\n      name: 'Rohan Sahu',\n      role: 'Backend Developer',\n      description: 'API development and database management',\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background to-muted\">\n      <div className=\"max-w-4xl mx-auto p-6 space-y-8\">\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Button variant=\"ghost\" size=\"icon\" asChild>\n            <Link href=\"/\" data-testid=\"button-back-home\">\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Link>\n          </Button>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"text-about-title\">\n            {t.legal.aboutUs}\n          </h1>\n        </div>\n\n        <Card data-testid=\"card-about-blueberry\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Sparkles className=\"w-5 h-5 text-primary\" />\n              About Blueberry\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <p className=\"text-muted-foreground leading-relaxed\">\n              Blueberry is a premium adult video streaming platform designed to provide users with a seamless and enjoyable viewing experience. Our platform features a vast library of content, advanced playback controls, and personalized recommendations.\n            </p>\n            <p className=\"text-muted-foreground leading-relaxed\">\n              We are committed to providing a safe, secure, and respectful environment for our adult users. All content on our platform is intended for users aged 18 and above.\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-features\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Heart className=\"w-5 h-5 text-primary\" />\n              Key Features\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ul className=\"grid md:grid-cols-2 gap-4\">\n              {[\n                'Extensive video library with 126,000+ videos',\n                'Multi-language support (English, Hindi, Odia, Tamil, Telugu)',\n                'Mandatory 18+ age verification',\n                'Advanced gesture controls for playback',\n                'Watch later and favorites lists',\n                'History tracking and guest limits',\n                'Dark mode premium design',\n                'Mobile-responsive with pagination',\n              ].map((feature, index) => (\n                <li key={index} className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <div className=\"w-1.5 h-1.5 rounded-full bg-primary\" />\n                  {feature}\n                </li>\n              ))}\n            </ul>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-developers\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Code className=\"w-5 h-5 text-primary\" />\n              {t.legal.developers}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid md:grid-cols-3 gap-6\">\n              {developers.map((dev, index) => (\n                <div\n                  key={index}\n                  className=\"text-center p-4 rounded-lg bg-muted/50 hover-elevate\"\n                  data-testid={`card-developer-${index}`}\n                >\n                  <div className=\"w-16 h-16 mx-auto mb-3 rounded-full bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center\">\n                    <Users className=\"w-8 h-8 text-primary\" />\n                  </div>\n                  <h3 className=\"font-semibold text-lg\">{dev.name}</h3>\n                  <p className=\"text-sm text-primary mb-1\">{dev.role}</p>\n                  <p className=\"text-xs text-muted-foreground\">{dev.description}</p>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-contact\">\n          <CardHeader>\n            <CardTitle>{t.legal.contactSupport}</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <p className=\"text-muted-foreground\">\n              Have questions or need assistance? We're here to help.\n            </p>\n            <div className=\"flex flex-wrap gap-4\">\n              <Button asChild>\n                <Link href=\"/contact\" data-testid=\"link-contact-support\">\n                  Contact Support\n                </Link>\n              </Button>\n              <Button variant=\"outline\" asChild>\n                <Link href=\"/privacy\" data-testid=\"link-privacy\">\n                  {t.legal.privacyPolicy}\n                </Link>\n              </Button>\n              <Button variant=\"outline\" asChild>\n                <Link href=\"/terms\" data-testid=\"link-terms\">\n                  {t.legal.termsOfService}\n                </Link>\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        <div className=\"text-center text-sm text-muted-foreground py-8\">\n          <p>&copy; 2024 Blueberry. All rights reserved.</p>\n          <p className=\"mt-1\">Made with love by the Blueberry Team</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":5898,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"client/src/pages/Welcome.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useLocation } from 'wouter';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { useAgeVerification } from '@/context/AgeVerificationContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { LanguageSelector } from '@/components/LanguageSelector';\nimport { Play, Heart, Settings, ChevronRight, ChevronLeft, Sparkles, Shield, Bookmark, Search } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface OnboardingStep {\n  icon: typeof Play;\n  titleKey: 'step1Title' | 'step2Title' | 'step3Title' | 'step4Title';\n  messageKey: 'step1Message' | 'step2Message' | 'step3Message' | 'step4Message';\n  color: string;\n}\n\nconst steps: OnboardingStep[] = [\n  {\n    icon: Play,\n    titleKey: 'step1Title',\n    messageKey: 'step1Message',\n    color: 'text-blue-500',\n  },\n  {\n    icon: Heart,\n    titleKey: 'step2Title',\n    messageKey: 'step2Message',\n    color: 'text-pink-500',\n  },\n  {\n    icon: Bookmark,\n    titleKey: 'step3Title',\n    messageKey: 'step3Message',\n    color: 'text-purple-500',\n  },\n  {\n    icon: Settings,\n    titleKey: 'step4Title',\n    messageKey: 'step4Message',\n    color: 'text-green-500',\n  },\n];\n\nexport default function Welcome() {\n  const { t } = useLanguage();\n  const [, navigate] = useLocation();\n  const { setHasSeenWelcome, hasSeenWelcome } = useAgeVerification();\n  const [currentStep, setCurrentStep] = useState(0);\n\n  useEffect(() => {\n    if (hasSeenWelcome) {\n      navigate('/');\n    }\n  }, [hasSeenWelcome, navigate]);\n\n  const handleNext = () => {\n    if (currentStep < steps.length - 1) {\n      setCurrentStep(prev => prev + 1);\n    } else {\n      handleComplete();\n    }\n  };\n\n  const handlePrevious = () => {\n    if (currentStep > 0) {\n      setCurrentStep(prev => prev - 1);\n    }\n  };\n\n  const handleSkip = () => {\n    handleComplete();\n  };\n\n  const handleComplete = () => {\n    setHasSeenWelcome(true);\n    navigate('/');\n  };\n\n  const progress = ((currentStep + 1) / steps.length) * 100;\n  const CurrentIcon = steps[currentStep].icon;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background via-background to-muted flex flex-col\">\n      <div className=\"absolute top-4 right-4\">\n        <LanguageSelector />\n      </div>\n\n      <div className=\"flex-1 flex flex-col items-center justify-center p-6\">\n        {currentStep === 0 && (\n          <div className=\"text-center mb-8 animate-in fade-in duration-500\">\n            <div className=\"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center\">\n              <Sparkles className=\"w-10 h-10 text-primary\" />\n            </div>\n            <h1 className=\"text-4xl font-bold mb-2\" data-testid=\"text-welcome-title\">\n              {t.onboarding.welcome}\n            </h1>\n            <p className=\"text-lg text-muted-foreground\">\n              {t.onboarding.welcomeMessage}\n            </p>\n          </div>\n        )}\n\n        <Card className=\"w-full max-w-md\" data-testid=\"card-onboarding\">\n          <CardContent className=\"p-8\">\n            <div className=\"mb-6\">\n              <Progress value={progress} className=\"h-1\" data-testid=\"progress-onboarding\" />\n              <p className=\"text-xs text-muted-foreground mt-2 text-center\">\n                Step {currentStep + 1} of {steps.length}\n              </p>\n            </div>\n\n            <div className=\"text-center space-y-6 animate-in fade-in duration-300\" key={currentStep}>\n              <div className={`w-16 h-16 mx-auto rounded-full bg-muted flex items-center justify-center ${steps[currentStep].color}`}>\n                <CurrentIcon className=\"w-8 h-8\" />\n              </div>\n              \n              <div>\n                <h2 className=\"text-2xl font-bold mb-2\" data-testid=\"text-step-title\">\n                  {t.onboarding[steps[currentStep].titleKey]}\n                </h2>\n                <p className=\"text-muted-foreground\" data-testid=\"text-step-message\">\n                  {t.onboarding[steps[currentStep].messageKey]}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between mt-8 pt-6 border-t\">\n              <Button\n                variant=\"ghost\"\n                onClick={handlePrevious}\n                disabled={currentStep === 0}\n                data-testid=\"button-previous\"\n              >\n                <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                Back\n              </Button>\n\n              <Button\n                variant=\"ghost\"\n                onClick={handleSkip}\n                data-testid=\"button-skip\"\n              >\n                {t.onboarding.skip}\n              </Button>\n\n              <Button onClick={handleNext} data-testid=\"button-next\">\n                {currentStep === steps.length - 1 ? (\n                  <>\n                    {t.onboarding.getStarted}\n                    <Sparkles className=\"w-4 h-4 ml-1\" />\n                  </>\n                ) : (\n                  <>\n                    {t.common.next}\n                    <ChevronRight className=\"w-4 h-4 ml-1\" />\n                  </>\n                )}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        <div className=\"flex gap-2 mt-6\">\n          {steps.map((_, index) => (\n            <button\n              key={index}\n              onClick={() => setCurrentStep(index)}\n              className={`w-2 h-2 rounded-full transition-colors ${\n                index === currentStep ? 'bg-primary' : 'bg-muted-foreground/30'\n              }`}\n              data-testid={`dot-step-${index}`}\n            />\n          ))}\n        </div>\n      </div>\n\n      <div className=\"p-4 text-center text-xs text-muted-foreground\">\n        By continuing, you agree to our{' '}\n        <a href=\"/terms\" className=\"text-primary hover:underline\">Terms of Service</a>\n        {' '}and{' '}\n        <a href=\"/privacy\" className=\"text-primary hover:underline\">Privacy Policy</a>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6175,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4050,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/Header.tsx":{"content":"import { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Menu, Search, ArrowLeft, X, SlidersHorizontal } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\ntype SortOption = \"default\" | \"views\" | \"date\" | \"duration\";\n\ninterface HeaderProps {\n  onMenuClick: () => void;\n  searchQuery: string;\n  onSearchChange: (query: string) => void;\n  sortBy?: SortOption;\n  onSortChange?: (sort: SortOption) => void;\n}\n\nconst sortOptions: { value: SortOption; label: string }[] = [\n  { value: \"default\", label: \"Default\" },\n  { value: \"views\", label: \"Most Views\" },\n  { value: \"date\", label: \"Most Recent\" },\n  { value: \"duration\", label: \"Longest\" },\n];\n\nexport function Header({ \n  onMenuClick, \n  searchQuery, \n  onSearchChange,\n  sortBy = \"default\",\n  onSortChange\n}: HeaderProps) {\n  const [location] = useLocation();\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n  const showBackButton = location !== \"/\";\n\n  return (\n    <header \n      className=\"fixed top-0 left-0 right-0 z-50 h-16 glass-dark\"\n      data-testid=\"header\"\n    >\n      <div className=\"flex items-center justify-between h-full px-4 md:px-8 max-w-[1920px] mx-auto gap-4\">\n        {/* Left section - Back button or Logo */}\n        <div className=\"flex items-center gap-3 min-w-0 flex-shrink-0\">\n          {showBackButton ? (\n            <Link href=\"/\">\n              <Button\n                size=\"icon\"\n                variant=\"ghost\"\n                className=\"glass rounded-full\"\n                data-testid=\"button-back\"\n              >\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Button>\n            </Link>\n          ) : null}\n          \n          <Link href=\"/\" className=\"flex items-center gap-2\">\n            <div \n              className=\"w-9 h-9 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center\"\n              data-testid=\"logo-icon\"\n            >\n              <span className=\"text-white font-bold text-lg font-['Poppins']\">B</span>\n            </div>\n            <h1 \n              className=\"text-xl md:text-2xl font-bold font-['Poppins'] gradient-text hidden sm:block\"\n              data-testid=\"logo-text\"\n            >\n              Blueberry\n            </h1>\n          </Link>\n        </div>\n\n        {/* Center section - Search bar (hidden on mobile unless opened) */}\n        <div className=\"flex-1 max-w-xl hidden md:flex items-center gap-2\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <Input\n              type=\"search\"\n              placeholder=\"Search videos...\"\n              value={searchQuery}\n              onChange={(e) => onSearchChange(e.target.value)}\n              className=\"w-full pl-10 pr-4 h-11 rounded-full glass border-white/10 focus:border-primary/50 focus:ring-primary/20 placeholder:text-muted-foreground/60\"\n              data-testid=\"input-search\"\n            />\n            {searchQuery && (\n              <Button\n                size=\"icon\"\n                variant=\"ghost\"\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 h-7 w-7\"\n                onClick={() => onSearchChange(\"\")}\n                data-testid=\"button-clear-search\"\n              >\n                <X className=\"w-4 h-4\" />\n              </Button>\n            )}\n          </div>\n\n          {/* Sort dropdown */}\n          {onSortChange && (\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  className=\"glass rounded-full flex-shrink-0\"\n                  data-testid=\"button-sort\"\n                >\n                  <SlidersHorizontal className=\"w-4 h-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"glass-heavy\">\n                {sortOptions.map((option) => (\n                  <DropdownMenuItem\n                    key={option.value}\n                    onClick={() => onSortChange(option.value)}\n                    className={sortBy === option.value ? \"bg-primary/20 text-primary\" : \"\"}\n                    data-testid={`sort-option-${option.value}`}\n                  >\n                    {option.label}\n                  </DropdownMenuItem>\n                ))}\n              </DropdownMenuContent>\n            </DropdownMenu>\n          )}\n        </div>\n\n        {/* Right section - Mobile search toggle + Menu */}\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\n          {/* Mobile search toggle */}\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            className=\"md:hidden glass rounded-full\"\n            onClick={() => setIsSearchOpen(!isSearchOpen)}\n            data-testid=\"button-mobile-search\"\n          >\n            <Search className=\"w-5 h-5\" />\n          </Button>\n\n          {/* Hamburger menu */}\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            className=\"glass rounded-full\"\n            onClick={onMenuClick}\n            data-testid=\"button-menu\"\n          >\n            <Menu className=\"w-5 h-5\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Mobile search bar overlay */}\n      <AnimatePresence>\n        {isSearchOpen && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"md:hidden glass-dark border-t border-white/5\"\n          >\n            <div className=\"p-4 flex gap-2\">\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                <Input\n                  type=\"search\"\n                  placeholder=\"Search videos...\"\n                  value={searchQuery}\n                  onChange={(e) => onSearchChange(e.target.value)}\n                  className=\"w-full pl-10 pr-10 h-11 rounded-full glass border-white/10\"\n                  autoFocus\n                  data-testid=\"input-mobile-search\"\n                />\n                <Button\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  className=\"absolute right-2 top-1/2 -translate-y-1/2 h-7 w-7\"\n                  onClick={() => {\n                    onSearchChange(\"\");\n                    setIsSearchOpen(false);\n                  }}\n                  data-testid=\"button-close-mobile-search\"\n                >\n                  <X className=\"w-4 h-4\" />\n                </Button>\n              </div>\n\n              {/* Mobile sort */}\n              {onSortChange && (\n                <DropdownMenu>\n                  <DropdownMenuTrigger asChild>\n                    <Button\n                      size=\"icon\"\n                      variant=\"ghost\"\n                      className=\"glass rounded-full flex-shrink-0\"\n                      data-testid=\"button-mobile-sort\"\n                    >\n                      <SlidersHorizontal className=\"w-4 h-4\" />\n                    </Button>\n                  </DropdownMenuTrigger>\n                  <DropdownMenuContent align=\"end\" className=\"glass-heavy\">\n                    {sortOptions.map((option) => (\n                      <DropdownMenuItem\n                        key={option.value}\n                        onClick={() => onSortChange(option.value)}\n                        className={sortBy === option.value ? \"bg-primary/20 text-primary\" : \"\"}\n                      >\n                        {option.label}\n                      </DropdownMenuItem>\n                    ))}\n                  </DropdownMenuContent>\n                </DropdownMenu>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </header>\n  );\n}\n","path":null,"size_bytes":8162,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/pages/Login.tsx":{"content":"import { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { Link, useLocation } from 'wouter';\nimport { useAuth } from '@/context/AuthContext';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { useToast } from '@/hooks/use-toast';\nimport { Eye, EyeOff, LogIn, Loader2 } from 'lucide-react';\n\nconst loginSchema = z.object({\n  email: z.string().email('Please enter a valid email'),\n  password: z.string().min(1, 'Password is required'),\n  rememberMe: z.boolean().optional(),\n});\n\ntype LoginFormData = z.infer<typeof loginSchema>;\n\nexport default function Login() {\n  const { login } = useAuth();\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [, navigate] = useLocation();\n  const [showPassword, setShowPassword] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const form = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: '',\n      password: '',\n      rememberMe: false,\n    },\n  });\n\n  const onSubmit = async (data: LoginFormData) => {\n    setIsLoading(true);\n    const result = await login(data.email, data.password);\n    setIsLoading(false);\n\n    if (result.success) {\n      toast({\n        title: 'Welcome back!',\n        description: 'You have successfully logged in.',\n      });\n      navigate('/');\n    } else {\n      toast({\n        title: 'Login failed',\n        description: result.error || 'Invalid credentials',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-b from-background to-muted p-4\">\n      <Card className=\"w-full max-w-md\" data-testid=\"card-login\">\n        <CardHeader className=\"text-center space-y-2\">\n          <div className=\"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-2\">\n            <LogIn className=\"w-6 h-6 text-primary\" />\n          </div>\n          <CardTitle className=\"text-2xl\" data-testid=\"text-login-title\">\n            {t.auth.loginTitle}\n          </CardTitle>\n          <CardDescription>\n            Sign in to access all features\n          </CardDescription>\n        </CardHeader>\n\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{t.auth.email}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"email\"\n                        placeholder=\"name@example.com\"\n                        data-testid=\"input-email\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"password\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{t.auth.password}</FormLabel>\n                    <FormControl>\n                      <div className=\"relative\">\n                        <Input\n                          type={showPassword ? 'text' : 'password'}\n                          placeholder=\"Enter your password\"\n                          data-testid=\"input-password\"\n                          {...field}\n                        />\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"absolute right-0 top-0 h-full\"\n                          onClick={() => setShowPassword(!showPassword)}\n                          data-testid=\"button-toggle-password\"\n                        >\n                          {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                        </Button>\n                      </div>\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex items-center justify-between\">\n                <FormField\n                  control={form.control}\n                  name=\"rememberMe\"\n                  render={({ field }) => (\n                    <div className=\"flex items-center space-x-2\">\n                      <Checkbox\n                        id=\"rememberMe\"\n                        checked={field.value}\n                        onCheckedChange={field.onChange}\n                        data-testid=\"checkbox-remember-me\"\n                      />\n                      <label htmlFor=\"rememberMe\" className=\"text-sm text-muted-foreground cursor-pointer\">\n                        {t.auth.rememberMe}\n                      </label>\n                    </div>\n                  )}\n                />\n                <Link\n                  href=\"/forgot-password\"\n                  className=\"text-sm text-primary hover:underline\"\n                  data-testid=\"link-forgot-password\"\n                >\n                  {t.auth.forgotPassword}\n                </Link>\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={isLoading}\n                data-testid=\"button-login-submit\"\n              >\n                {isLoading ? (\n                  <Loader2 className=\"w-4 h-4 animate-spin mr-2\" />\n                ) : (\n                  <LogIn className=\"w-4 h-4 mr-2\" />\n                )}\n                {t.auth.loginButton}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n\n        <CardFooter className=\"flex flex-col gap-4\">\n          <div className=\"text-sm text-center text-muted-foreground\">\n            {t.auth.noAccount}{' '}\n            <Link href=\"/register\" className=\"text-primary hover:underline\" data-testid=\"link-register\">\n              {t.common.register}\n            </Link>\n          </div>\n        </CardFooter>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":6644,"size_tokens":null},"client/src/components/AgeVerificationModal.tsx":{"content":"import { useAgeVerification } from '@/context/AgeVerificationContext';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from '@/components/ui/card';\nimport { AlertTriangle, ShieldAlert } from 'lucide-react';\n\nexport function AgeVerificationModal() {\n  const { isVerified, verifyAge, exitSite } = useAgeVerification();\n  const { t } = useLanguage();\n\n  if (isVerified) return null;\n\n  return (\n    <div \n      className=\"fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4\"\n      data-testid=\"modal-age-verification\"\n    >\n      <Card className=\"max-w-md w-full bg-gradient-to-b from-card to-background border-destructive/20\">\n        <CardHeader className=\"text-center space-y-4\">\n          <div className=\"mx-auto w-16 h-16 rounded-full bg-destructive/20 flex items-center justify-center\">\n            <ShieldAlert className=\"w-8 h-8 text-destructive\" />\n          </div>\n          <CardTitle className=\"text-2xl font-bold\" data-testid=\"text-age-verification-title\">\n            {t.ageVerification.title}\n          </CardTitle>\n          <CardDescription className=\"text-lg text-destructive flex items-center justify-center gap-2\">\n            <AlertTriangle className=\"w-5 h-5\" />\n            {t.ageVerification.warning}\n          </CardDescription>\n        </CardHeader>\n        \n        <CardContent className=\"space-y-4\">\n          <p className=\"text-sm text-muted-foreground text-center leading-relaxed\" data-testid=\"text-age-verification-details\">\n            {t.ageVerification.warningDetails}\n          </p>\n          \n          <div className=\"bg-muted/50 rounded-lg p-4 border border-border/50\">\n            <p className=\"text-xs text-muted-foreground text-center\">\n              {t.ageVerification.disclaimer}\n            </p>\n          </div>\n        </CardContent>\n        \n        <CardFooter className=\"flex flex-col gap-3\">\n          <Button \n            onClick={verifyAge}\n            className=\"w-full bg-primary hover:bg-primary/90 text-lg py-6 font-semibold\"\n            size=\"lg\"\n            data-testid=\"button-confirm-age\"\n          >\n            {t.ageVerification.confirmButton}\n          </Button>\n          <Button \n            onClick={exitSite}\n            variant=\"outline\"\n            className=\"w-full\"\n            size=\"lg\"\n            data-testid=\"button-exit-site\"\n          >\n            {t.ageVerification.exitButton}\n          </Button>\n        </CardFooter>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":2588,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"client/src/pages/Terms.tsx":{"content":"import { Link } from 'wouter';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { ArrowLeft, FileText, AlertTriangle, Check, Ban, Scale, Shield } from 'lucide-react';\n\nexport default function Terms() {\n  const { t } = useLanguage();\n\n  const sections = [\n    {\n      icon: Check,\n      title: 'Acceptance of Terms',\n      content: `By accessing or using Blueberry (\"Service\"), you agree to be bound by these Terms of Service (\"Terms\"). If you do not agree to these Terms, please do not use our Service.\n      \n      These Terms constitute a legally binding agreement between you and Blueberry. We may update these Terms from time to time, and your continued use of the Service constitutes acceptance of any changes.`,\n    },\n    {\n      icon: AlertTriangle,\n      title: 'Age Requirement',\n      content: `IMPORTANT: This Service contains adult content and is intended ONLY for users who are:\n      \n      - At least 18 years of age, OR\n      - The age of legal majority in their jurisdiction, whichever is higher\n      \n      By using this Service, you confirm that you meet these age requirements. We reserve the right to verify age and terminate accounts that violate this policy.`,\n    },\n    {\n      icon: FileText,\n      title: 'User Accounts',\n      content: `When you create an account, you agree to:\n      \n      - Provide accurate and complete information\n      - Maintain the security of your account credentials\n      - Promptly update any information that changes\n      - Accept responsibility for all activities under your account\n      - Not share your account with others\n      \n      We reserve the right to suspend or terminate accounts that violate these Terms.`,\n    },\n    {\n      icon: Ban,\n      title: 'Prohibited Activities',\n      content: `You agree NOT to:\n      \n      - Use the Service if you are under the legal age\n      - Share your account credentials\n      - Attempt to bypass any access restrictions\n      - Download, copy, or redistribute content without authorization\n      - Use automated tools to access the Service\n      - Harass, abuse, or harm others\n      - Violate any applicable laws or regulations\n      - Attempt to reverse engineer the Service`,\n    },\n    {\n      icon: Scale,\n      title: 'Intellectual Property',\n      content: `All content on this Service, including videos, images, text, and software, is protected by copyright and other intellectual property laws.\n      \n      - Content is licensed, not sold\n      - You may not reproduce, distribute, or create derivative works\n      - Trademarks and logos are property of their respective owners\n      - User-generated content remains your property, but you grant us a license to use it`,\n    },\n    {\n      icon: Shield,\n      title: 'Disclaimer of Warranties',\n      content: `THE SERVICE IS PROVIDED \"AS IS\" WITHOUT WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED.\n      \n      We do not warrant that:\n      - The Service will be uninterrupted or error-free\n      - Content will be accurate or complete\n      - The Service will meet your requirements\n      \n      Use of the Service is at your own risk.`,\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background to-muted\">\n      <div className=\"max-w-4xl mx-auto p-6 space-y-8\">\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Button variant=\"ghost\" size=\"icon\" asChild>\n            <Link href=\"/\" data-testid=\"button-back-home\">\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Link>\n          </Button>\n          <div>\n            <h1 className=\"text-3xl font-bold\" data-testid=\"text-terms-title\">\n              {t.legal.termsOfService}\n            </h1>\n            <p className=\"text-sm text-muted-foreground\">Last updated: December 2024</p>\n          </div>\n        </div>\n\n        <Card className=\"border-destructive/50 bg-destructive/5\" data-testid=\"card-terms-warning\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-start gap-3\">\n              <AlertTriangle className=\"w-6 h-6 text-destructive shrink-0 mt-0.5\" />\n              <div>\n                <h3 className=\"font-semibold text-destructive mb-2\">Adult Content Warning</h3>\n                <p className=\"text-sm text-muted-foreground\">\n                  This website contains sexually explicit material intended for adults only. By using this website, you confirm that you are at least 18 years of age (or the age of majority in your jurisdiction) and that viewing adult content is legal in your location.\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {sections.map((section, index) => (\n          <Card key={index} data-testid={`card-terms-section-${index}`}>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <section.icon className=\"w-5 h-5 text-primary\" />\n                {section.title}\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground whitespace-pre-line leading-relaxed\">\n                {section.content}\n              </p>\n            </CardContent>\n          </Card>\n        ))}\n\n        <Card data-testid=\"card-terms-contact\">\n          <CardHeader>\n            <CardTitle>Questions About These Terms?</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <p className=\"text-muted-foreground\">\n              If you have any questions about these Terms of Service, please contact our support team.\n            </p>\n            <div className=\"flex flex-wrap gap-4\">\n              <Button asChild>\n                <Link href=\"/contact\" data-testid=\"link-contact\">\n                  Contact Support\n                </Link>\n              </Button>\n              <Button variant=\"outline\" asChild>\n                <Link href=\"/privacy\" data-testid=\"link-privacy\">\n                  {t.legal.privacyPolicy}\n                </Link>\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        <div className=\"text-center text-sm text-muted-foreground py-8\">\n          <p>&copy; 2024 Blueberry. All rights reserved.</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6404,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"client/src/context/GuestLimitContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, type ReactNode } from 'react';\nimport { useAuth } from './AuthContext';\n\nconst TOTAL_VIDEOS_AVAILABLE = 126000;\nconst STORAGE_KEY = 'blueberry_guest_videos_watched';\n\ninterface GuestLimitContextType {\n  videosWatched: number;\n  videosRemaining: number;\n  hasReachedLimit: boolean;\n  recordVideoWatch: (videoId: string) => void;\n  isGuest: boolean;\n  totalVideosAvailable: number;\n}\n\nconst GuestLimitContext = createContext<GuestLimitContextType | undefined>(undefined);\n\nexport function GuestLimitProvider({ children }: { children: ReactNode }) {\n  const { isAuthenticated } = useAuth();\n  const [watchedVideos, setWatchedVideos] = useState<Set<string>>(() => {\n    if (typeof window !== 'undefined') {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (stored) {\n        try {\n          return new Set(JSON.parse(stored));\n        } catch {\n          return new Set();\n        }\n      }\n    }\n    return new Set();\n  });\n\n  useEffect(() => {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify([...watchedVideos]));\n  }, [watchedVideos]);\n\n  const recordVideoWatch = (videoId: string) => {\n    if (!watchedVideos.has(videoId)) {\n      setWatchedVideos(prev => new Set([...prev, videoId]));\n    }\n  };\n\n  const videosWatched = watchedVideos.size;\n  const videosRemaining = TOTAL_VIDEOS_AVAILABLE - videosWatched;\n  const hasReachedLimit = false;\n\n  return (\n    <GuestLimitContext.Provider\n      value={{\n        videosWatched,\n        videosRemaining,\n        hasReachedLimit,\n        recordVideoWatch,\n        isGuest: !isAuthenticated,\n        totalVideosAvailable: TOTAL_VIDEOS_AVAILABLE,\n      }}\n    >\n      {children}\n    </GuestLimitContext.Provider>\n  );\n}\n\nexport function useGuestLimit() {\n  const context = useContext(GuestLimitContext);\n  if (!context) {\n    throw new Error('useGuestLimit must be used within a GuestLimitProvider');\n  }\n  return context;\n}\n","path":null,"size_bytes":1944,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"client/src/pages/Notifications.tsx":{"content":"import { useState } from 'react';\nimport { Link } from 'wouter';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\nimport { ArrowLeft, Bell, Check, CheckCheck, Trash2, Settings, Video, Star, MessageCircle } from 'lucide-react';\n\ninterface Notification {\n  id: string;\n  type: 'video' | 'update' | 'system' | 'recommendation';\n  title: string;\n  message: string;\n  timestamp: string;\n  read: boolean;\n  actionUrl?: string;\n}\n\nconst mockNotifications: Notification[] = [\n  {\n    id: '1',\n    type: 'video',\n    title: 'New video added',\n    message: 'A new trending video has been added to your favorite category.',\n    timestamp: new Date(Date.now() - 1000 * 60 * 30).toISOString(),\n    read: false,\n    actionUrl: '/',\n  },\n  {\n    id: '2',\n    type: 'recommendation',\n    title: 'Recommended for you',\n    message: 'Based on your watch history, you might enjoy these new videos.',\n    timestamp: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(),\n    read: false,\n    actionUrl: '/',\n  },\n  {\n    id: '3',\n    type: 'system',\n    title: 'Welcome to Blueberry',\n    message: 'Thank you for joining! Explore our features and personalize your experience.',\n    timestamp: new Date(Date.now() - 1000 * 60 * 60 * 24).toISOString(),\n    read: true,\n  },\n  {\n    id: '4',\n    type: 'update',\n    title: 'New features available',\n    message: 'Check out the new gesture controls and playback enhancements.',\n    timestamp: new Date(Date.now() - 1000 * 60 * 60 * 48).toISOString(),\n    read: true,\n    actionUrl: '/settings',\n  },\n];\n\nexport default function Notifications() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [notifications, setNotifications] = useState<Notification[]>(mockNotifications);\n\n  const unreadCount = notifications.filter(n => !n.read).length;\n\n  const handleMarkAsRead = (id: string) => {\n    setNotifications(prev => \n      prev.map(n => n.id === id ? { ...n, read: true } : n)\n    );\n  };\n\n  const handleMarkAllAsRead = () => {\n    setNotifications(prev => prev.map(n => ({ ...n, read: true })));\n    toast({\n      title: 'All marked as read',\n      description: 'All notifications have been marked as read.',\n    });\n  };\n\n  const handleDelete = (id: string) => {\n    setNotifications(prev => prev.filter(n => n.id !== id));\n    toast({\n      title: 'Notification deleted',\n      description: 'The notification has been removed.',\n    });\n  };\n\n  const handleClearAll = () => {\n    setNotifications([]);\n    toast({\n      title: 'Notifications cleared',\n      description: 'All notifications have been cleared.',\n    });\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'video':\n        return <Video className=\"w-5 h-5 text-blue-500\" />;\n      case 'recommendation':\n        return <Star className=\"w-5 h-5 text-yellow-500\" />;\n      case 'update':\n        return <Bell className=\"w-5 h-5 text-green-500\" />;\n      default:\n        return <MessageCircle className=\"w-5 h-5 text-primary\" />;\n    }\n  };\n\n  const formatTime = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const minutes = Math.floor(diff / (1000 * 60));\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    return `${days}d ago`;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background to-muted\">\n      <div className=\"max-w-2xl mx-auto p-6 space-y-6\">\n        <div className=\"flex items-center justify-between gap-4 mb-8\">\n          <div className=\"flex items-center gap-4\">\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link href=\"/\" data-testid=\"button-back-home\">\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Link>\n            </Button>\n            <div>\n              <h1 className=\"text-3xl font-bold flex items-center gap-2\" data-testid=\"text-notifications-title\">\n                <Bell className=\"w-8 h-8 text-primary\" />\n                {t.common.notifications}\n                {unreadCount > 0 && (\n                  <Badge variant=\"destructive\" className=\"ml-2\">\n                    {unreadCount}\n                  </Badge>\n                )}\n              </h1>\n              <p className=\"text-sm text-muted-foreground\">\n                Stay updated with the latest\n              </p>\n            </div>\n          </div>\n          <div className=\"flex gap-2\">\n            {unreadCount > 0 && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleMarkAllAsRead}\n                data-testid=\"button-mark-all-read\"\n              >\n                <CheckCheck className=\"w-4 h-4 mr-1\" />\n                Mark all read\n              </Button>\n            )}\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link href=\"/settings\" data-testid=\"link-notification-settings\">\n                <Settings className=\"w-4 h-4\" />\n              </Link>\n            </Button>\n          </div>\n        </div>\n\n        {notifications.length === 0 ? (\n          <Card data-testid=\"card-empty-notifications\">\n            <CardContent className=\"flex flex-col items-center justify-center py-16\">\n              <Bell className=\"w-16 h-16 text-muted-foreground/50 mb-4\" />\n              <h3 className=\"text-lg font-medium mb-2\">No notifications</h3>\n              <p className=\"text-sm text-muted-foreground text-center max-w-sm\">\n                You're all caught up! Check back later for updates.\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"space-y-3\">\n            {notifications.map((notification) => (\n              <Card \n                key={notification.id} \n                className={`hover-elevate ${!notification.read ? 'border-primary/50 bg-primary/5' : ''}`}\n                data-testid={`card-notification-${notification.id}`}\n              >\n                <CardContent className=\"p-4\">\n                  <div className=\"flex gap-4\">\n                    <div className=\"shrink-0 mt-1\">\n                      {getNotificationIcon(notification.type)}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start justify-between gap-2\">\n                        <div>\n                          <h4 className={`font-medium ${!notification.read ? 'text-foreground' : 'text-muted-foreground'}`}>\n                            {notification.title}\n                          </h4>\n                          <p className=\"text-sm text-muted-foreground mt-1\">\n                            {notification.message}\n                          </p>\n                        </div>\n                        <span className=\"text-xs text-muted-foreground shrink-0\">\n                          {formatTime(notification.timestamp)}\n                        </span>\n                      </div>\n                      <div className=\"flex items-center gap-2 mt-3\">\n                        {notification.actionUrl && (\n                          <Button size=\"sm\" variant=\"outline\" asChild>\n                            <Link href={notification.actionUrl}>View</Link>\n                          </Button>\n                        )}\n                        {!notification.read && (\n                          <Button \n                            size=\"sm\" \n                            variant=\"ghost\"\n                            onClick={() => handleMarkAsRead(notification.id)}\n                            data-testid={`button-mark-read-${notification.id}`}\n                          >\n                            <Check className=\"w-4 h-4 mr-1\" />\n                            Mark read\n                          </Button>\n                        )}\n                        <Button \n                          size=\"sm\" \n                          variant=\"ghost\"\n                          className=\"text-destructive hover:text-destructive\"\n                          onClick={() => handleDelete(notification.id)}\n                          data-testid={`button-delete-notification-${notification.id}`}\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n            \n            {notifications.length > 0 && (\n              <Button\n                variant=\"outline\"\n                className=\"w-full\"\n                onClick={handleClearAll}\n                data-testid=\"button-clear-all-notifications\"\n              >\n                <Trash2 className=\"w-4 h-4 mr-2\" />\n                Clear All Notifications\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":9203,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"client/src/components/HeroSection.tsx":{"content":"import { Play, TrendingUp } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Link } from \"wouter\";\n\nexport function HeroSection() {\n  return (\n    <section \n      className=\"relative min-h-[40vh] md:min-h-[50vh] flex items-center justify-center overflow-hidden\"\n      data-testid=\"hero-section\"\n    >\n      {/* Animated gradient background */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-blue-900/40 via-purple-900/30 to-background\" />\n      \n      {/* Floating geometric shapes for premium feel */}\n      <div className=\"absolute inset-0 overflow-hidden\">\n        <div \n          className=\"absolute top-1/4 left-1/4 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl animate-pulse\"\n          style={{ animationDuration: \"4s\" }}\n        />\n        <div \n          className=\"absolute bottom-1/4 right-1/4 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse\"\n          style={{ animationDuration: \"5s\", animationDelay: \"1s\" }}\n        />\n        <div \n          className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-indigo-500/5 rounded-full blur-3xl\"\n        />\n      </div>\n      \n      {/* Grid pattern overlay */}\n      <div \n        className=\"absolute inset-0 opacity-5\"\n        style={{\n          backgroundImage: `linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),\n                           linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)`,\n          backgroundSize: \"50px 50px\"\n        }}\n      />\n      \n      {/* Bottom gradient fade */}\n      <div className=\"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background to-transparent\" />\n\n      {/* Content */}\n      <div className=\"relative z-10 text-center px-4 py-12 max-w-3xl mx-auto\">\n        <div \n          className=\"inline-flex items-center gap-2 glass px-4 py-2 rounded-full mb-6\"\n          data-testid=\"hero-badge\"\n        >\n          <TrendingUp className=\"w-4 h-4 text-primary\" />\n          <span className=\"text-sm font-medium text-foreground/80\">Premium Adult Entertainment</span>\n        </div>\n        \n        <h1 \n          className=\"text-4xl md:text-5xl lg:text-6xl font-bold font-['Poppins'] mb-4\"\n          data-testid=\"hero-title\"\n        >\n          <span className=\"gradient-text\">Blueberry</span>\n        </h1>\n        \n        <p \n          className=\"text-lg md:text-xl text-muted-foreground mb-8 max-w-xl mx-auto\"\n          data-testid=\"hero-subtitle\"\n        >\n          Discover premium adult content with our elegant, modern streaming experience\n        </p>\n        \n        <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4\">\n          <Link href=\"/#trending\">\n            <Button \n              size=\"lg\" \n              className=\"rounded-full px-8 gap-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 border-0\"\n              data-testid=\"button-explore\"\n            >\n              <Play className=\"w-5 h-5 fill-current\" />\n              <span>Start Exploring</span>\n            </Button>\n          </Link>\n          \n          <Link href=\"/?filter=trending\">\n            <Button \n              size=\"lg\" \n              variant=\"outline\" \n              className=\"rounded-full px-8 glass border-white/10 backdrop-blur-md\"\n              data-testid=\"button-trending\"\n            >\n              <TrendingUp className=\"w-5 h-5 mr-2\" />\n              <span>View Trending</span>\n            </Button>\n          </Link>\n        </div>\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":3554,"size_tokens":null},"client/src/context/CookieConsentContext.tsx":{"content":"import { createContext, useContext, useState, type ReactNode } from 'react';\n\ninterface CookiePreferences {\n  necessary: boolean;\n  analytics: boolean;\n  marketing: boolean;\n  personalization: boolean;\n}\n\ninterface CookieConsentContextType {\n  hasConsented: boolean;\n  preferences: CookiePreferences;\n  acceptAll: () => void;\n  acceptNecessary: () => void;\n  savePreferences: (prefs: CookiePreferences) => void;\n  showBanner: boolean;\n  setShowBanner: (show: boolean) => void;\n}\n\nconst CookieConsentContext = createContext<CookieConsentContextType | undefined>(undefined);\n\nconst STORAGE_KEY = 'blueberry_cookie_consent';\nconst PREFS_KEY = 'blueberry_cookie_preferences';\n\nconst defaultPreferences: CookiePreferences = {\n  necessary: true,\n  analytics: false,\n  marketing: false,\n  personalization: false,\n};\n\nexport function CookieConsentProvider({ children }: { children: ReactNode }) {\n  const [hasConsented, setHasConsented] = useState<boolean>(() => {\n    if (typeof window !== 'undefined') {\n      return localStorage.getItem(STORAGE_KEY) === 'true';\n    }\n    return false;\n  });\n\n  const [preferences, setPreferences] = useState<CookiePreferences>(() => {\n    if (typeof window !== 'undefined') {\n      const stored = localStorage.getItem(PREFS_KEY);\n      if (stored) {\n        try {\n          return JSON.parse(stored);\n        } catch {\n          return defaultPreferences;\n        }\n      }\n    }\n    return defaultPreferences;\n  });\n\n  const [showBanner, setShowBanner] = useState<boolean>(!hasConsented);\n\n  const acceptAll = () => {\n    const allAccepted: CookiePreferences = {\n      necessary: true,\n      analytics: true,\n      marketing: true,\n      personalization: true,\n    };\n    setPreferences(allAccepted);\n    setHasConsented(true);\n    setShowBanner(false);\n    localStorage.setItem(STORAGE_KEY, 'true');\n    localStorage.setItem(PREFS_KEY, JSON.stringify(allAccepted));\n  };\n\n  const acceptNecessary = () => {\n    const necessaryOnly: CookiePreferences = {\n      necessary: true,\n      analytics: false,\n      marketing: false,\n      personalization: false,\n    };\n    setPreferences(necessaryOnly);\n    setHasConsented(true);\n    setShowBanner(false);\n    localStorage.setItem(STORAGE_KEY, 'true');\n    localStorage.setItem(PREFS_KEY, JSON.stringify(necessaryOnly));\n  };\n\n  const savePreferences = (prefs: CookiePreferences) => {\n    const withNecessary = { ...prefs, necessary: true };\n    setPreferences(withNecessary);\n    setHasConsented(true);\n    setShowBanner(false);\n    localStorage.setItem(STORAGE_KEY, 'true');\n    localStorage.setItem(PREFS_KEY, JSON.stringify(withNecessary));\n  };\n\n  return (\n    <CookieConsentContext.Provider\n      value={{\n        hasConsented,\n        preferences,\n        acceptAll,\n        acceptNecessary,\n        savePreferences,\n        showBanner,\n        setShowBanner,\n      }}\n    >\n      {children}\n    </CookieConsentContext.Provider>\n  );\n}\n\nexport function useCookieConsent() {\n  const context = useContext(CookieConsentContext);\n  if (!context) {\n    throw new Error('useCookieConsent must be used within a CookieConsentProvider');\n  }\n  return context;\n}\n","path":null,"size_bytes":3134,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"client/src/pages/WatchLater.tsx":{"content":"import { useState, useEffect, useMemo } from 'react';\nimport { Link } from 'wouter';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { useToast } from '@/hooks/use-toast';\nimport { ArrowLeft, Clock, Search, Trash2, Play, Bookmark } from 'lucide-react';\n\ninterface WatchLaterItem {\n  videoId: string;\n  title: string;\n  thumbnail: string;\n  duration: string;\n  addedAt: string;\n}\n\nexport default function WatchLater() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [watchLater, setWatchLater] = useState<WatchLaterItem[]>([]);\n\n  useEffect(() => {\n    const stored = localStorage.getItem('blueberry_watch_later');\n    if (stored) {\n      try {\n        setWatchLater(JSON.parse(stored));\n      } catch {\n        setWatchLater([]);\n      }\n    }\n  }, []);\n\n  const filteredList = useMemo(() => {\n    if (!searchQuery.trim()) return watchLater;\n    const query = searchQuery.toLowerCase();\n    return watchLater.filter(item => \n      item.title.toLowerCase().includes(query)\n    );\n  }, [watchLater, searchQuery]);\n\n  const handleClearAll = () => {\n    setWatchLater([]);\n    localStorage.removeItem('blueberry_watch_later');\n    toast({\n      title: 'List cleared',\n      description: 'Your Watch Later list has been cleared.',\n    });\n  };\n\n  const handleRemoveItem = (videoId: string) => {\n    const updated = watchLater.filter(item => item.videoId !== videoId);\n    setWatchLater(updated);\n    localStorage.setItem('blueberry_watch_later', JSON.stringify(updated));\n    toast({\n      title: 'Removed',\n      description: 'Video removed from Watch Later.',\n    });\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    \n    if (days === 0) return 'Today';\n    if (days === 1) return 'Yesterday';\n    if (days < 7) return `${days} days ago`;\n    return date.toLocaleDateString();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background to-muted\">\n      <div className=\"max-w-4xl mx-auto p-6 space-y-6\">\n        <div className=\"flex items-center justify-between gap-4 mb-8\">\n          <div className=\"flex items-center gap-4\">\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link href=\"/\" data-testid=\"button-back-home\">\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Link>\n            </Button>\n            <div>\n              <h1 className=\"text-3xl font-bold flex items-center gap-2\" data-testid=\"text-watch-later-title\">\n                <Clock className=\"w-8 h-8 text-primary\" />\n                {t.common.watchLater}\n              </h1>\n              <p className=\"text-sm text-muted-foreground\">\n                {watchLater.length} videos saved\n              </p>\n            </div>\n          </div>\n          {watchLater.length > 0 && (\n            <Button\n              variant=\"outline\"\n              onClick={handleClearAll}\n              data-testid=\"button-clear-watch-later\"\n            >\n              <Trash2 className=\"w-4 h-4 mr-2\" />\n              Clear All\n            </Button>\n          )}\n        </div>\n\n        {watchLater.length > 0 && (\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <Input\n              placeholder=\"Search saved videos...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-10\"\n              data-testid=\"input-search-watch-later\"\n            />\n          </div>\n        )}\n\n        {filteredList.length === 0 ? (\n          <Card data-testid=\"card-empty-watch-later\">\n            <CardContent className=\"flex flex-col items-center justify-center py-16\">\n              <Bookmark className=\"w-16 h-16 text-muted-foreground/50 mb-4\" />\n              <h3 className=\"text-lg font-medium mb-2\">\n                {searchQuery ? 'No results found' : 'No saved videos'}\n              </h3>\n              <p className=\"text-sm text-muted-foreground text-center max-w-sm\">\n                {searchQuery \n                  ? 'Try a different search term'\n                  : 'Save videos to watch later and they will appear here.'\n                }\n              </p>\n              <Button asChild className=\"mt-6\">\n                <Link href=\"/\" data-testid=\"link-browse-videos\">\n                  Browse Videos\n                </Link>\n              </Button>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n            {filteredList.map((item) => (\n              <Card key={item.videoId} className=\"overflow-hidden hover-elevate\" data-testid={`card-watch-later-${item.videoId}`}>\n                <Link href={`/video/${item.videoId}`}>\n                  <div className=\"relative aspect-video group\">\n                    <img\n                      src={item.thumbnail}\n                      alt={item.title}\n                      className=\"w-full h-full object-cover\"\n                    />\n                    <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\n                      <Play className=\"w-12 h-12 text-white\" />\n                    </div>\n                    <div className=\"absolute bottom-2 right-2 bg-black/80 px-2 py-1 rounded text-xs text-white\">\n                      {item.duration}\n                    </div>\n                  </div>\n                </Link>\n                <CardContent className=\"p-3\">\n                  <Link href={`/video/${item.videoId}`}>\n                    <h3 className=\"font-medium line-clamp-2 hover:text-primary transition-colors text-sm\">\n                      {item.title}\n                    </h3>\n                  </Link>\n                  <div className=\"flex items-center justify-between mt-2\">\n                    <span className=\"text-xs text-muted-foreground\">\n                      Added {formatDate(item.addedAt)}\n                    </span>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-8 w-8\"\n                      onClick={() => handleRemoveItem(item.videoId)}\n                      data-testid={`button-remove-watch-later-${item.videoId}`}\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6924,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"README.md":{"content":"# Blueberry-Ultra-2\ncreated by Roshan\n\nGet started by customizing your environment (defined in the .idx/dev.nix file) with the tools and IDE extensions you'll need for your project!\n\nLearn more at https://developers.google.com/idx/guides/customize-idx-env\n","path":null,"size_bytes":256,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1080,"size_tokens":null},"client/src/components/EmptyState.tsx":{"content":"import { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { \n  Search, Video, Heart, Clock, Bell, History, \n  Bookmark, FolderOpen, type LucideIcon \n} from 'lucide-react';\nimport { Link } from 'wouter';\n\ninterface EmptyStateProps {\n  type?: 'search' | 'videos' | 'favorites' | 'watchLater' | 'notifications' | 'history' | 'category' | 'generic';\n  title?: string;\n  message?: string;\n  actionLabel?: string;\n  actionHref?: string;\n  onAction?: () => void;\n}\n\nconst emptyStateConfigs: Record<string, { \n  icon: LucideIcon; \n  defaultTitle: string; \n  defaultMessage: string \n}> = {\n  search: {\n    icon: Search,\n    defaultTitle: 'No results found',\n    defaultMessage: 'Try adjusting your search terms or browse categories.',\n  },\n  videos: {\n    icon: Video,\n    defaultTitle: 'No videos available',\n    defaultMessage: 'Check back later for new content.',\n  },\n  favorites: {\n    icon: Heart,\n    defaultTitle: 'No favorites yet',\n    defaultMessage: 'Videos you like will appear here.',\n  },\n  watchLater: {\n    icon: Clock,\n    defaultTitle: 'Watch Later is empty',\n    defaultMessage: 'Save videos to watch later and they will appear here.',\n  },\n  notifications: {\n    icon: Bell,\n    defaultTitle: 'No notifications',\n    defaultMessage: 'You are all caught up! Check back later.',\n  },\n  history: {\n    icon: History,\n    defaultTitle: 'No watch history',\n    defaultMessage: 'Videos you watch will appear here.',\n  },\n  category: {\n    icon: FolderOpen,\n    defaultTitle: 'Category is empty',\n    defaultMessage: 'No videos in this category yet.',\n  },\n  generic: {\n    icon: Bookmark,\n    defaultTitle: 'Nothing here',\n    defaultMessage: 'This section is empty.',\n  },\n};\n\nexport function EmptyState({ \n  type = 'generic', \n  title, \n  message, \n  actionLabel = 'Browse Videos',\n  actionHref = '/',\n  onAction\n}: EmptyStateProps) {\n  const config = emptyStateConfigs[type] || emptyStateConfigs.generic;\n  const Icon = config.icon;\n\n  return (\n    <Card className=\"border-dashed\" data-testid={`empty-state-${type}`}>\n      <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\n        <div className=\"w-14 h-14 rounded-full bg-muted flex items-center justify-center mb-4\">\n          <Icon className=\"w-7 h-7 text-muted-foreground\" />\n        </div>\n        \n        <h3 className=\"text-lg font-medium mb-1\" data-testid=\"text-empty-title\">\n          {title || config.defaultTitle}\n        </h3>\n        \n        <p className=\"text-sm text-muted-foreground max-w-xs mb-6\" data-testid=\"text-empty-message\">\n          {message || config.defaultMessage}\n        </p>\n        \n        {(actionHref || onAction) && (\n          onAction ? (\n            <Button onClick={onAction} variant=\"outline\" data-testid=\"button-empty-action\">\n              {actionLabel}\n            </Button>\n          ) : (\n            <Button variant=\"outline\" asChild>\n              <Link href={actionHref} data-testid=\"link-empty-action\">\n                {actionLabel}\n              </Link>\n            </Button>\n          )\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":3144,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"replit.md":{"content":"h# Blueberry Video Streaming Platform\n\n## Overview\n\nBlueberry is a premium adult video streaming platform built with modern web technologies. The application features a sophisticated, content-first interface with glassmorphic design elements, drawing inspiration from premium streaming services. It provides video browsing, categorization, search functionality, and an elegant player experience.\n\nThe platform is architected as a full-stack TypeScript application with a React frontend and Express backend, designed for deployment on Replit with PostgreSQL database support.\n\n## Recent Changes\n\n- **Paginated Video Loading**: Videos now load page-wise from 1260 JSON files (data/videos_page_1.json to data/videos_page_1260.json), providing access to 126,000+ videos\n- **Age Verification**: Mandatory 18+ age verification modal with \"I am 18+\" confirmation button\n- **Guest User Limits**: Guest users limited to 3000 videos; logged-in users get unlimited access\n- **Multi-Language Support**: Full i18n support for English, Hindi, Odia, Tamil, and Telugu\n- **Developer Credits**: About page credits Roshan Sahu, Papun Sahu, and Rohan Sahu\n- **Auto-derived Categories**: 50+ categories extracted dynamically from video JSON data\n- **Context Providers**: LanguageContext, AgeVerificationContext, CookieConsentContext, AuthContext, GuestLimitContext\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework & Build System**\n- React 18 with TypeScript for type-safe component development\n- Vite as the build tool and development server, providing fast HMR and optimized production builds\n- Wouter for lightweight client-side routing (replacing React Router for smaller bundle size)\n- TanStack Query (React Query) for server state management and caching\n\n**UI Component System**\n- Shadcn/ui component library with Radix UI primitives for accessible, unstyled components\n- Tailwind CSS for utility-first styling with custom design tokens\n- Framer Motion for smooth animations and transitions\n- Custom glassmorphic design system defined in CSS variables\n\n**Design Philosophy**\n- Dark mode only with premium aesthetic (Netflix-inspired elegance)\n- Glassmorphic depth with backdrop blur effects\n- Typography hierarchy using Inter (body) and Poppins (headings) from Google Fonts\n- Responsive grid system: 1 column (mobile)  2 columns (tablet)  4-5 columns (desktop)\n- Content-forward layout prioritizing video thumbnails and browsing experience\n\n**State Management Strategy**\n- Server state handled by TanStack Query with query invalidation\n- Local UI state managed with React hooks (useState, useMemo)\n- Context providers for: Language, Age Verification, Cookie Consent, Auth, Guest Limit, Favorites\n- Search and filtering performed client-side after data fetch for instant responsiveness\n\n### Backend Architecture\n\n**Server Framework**\n- Express.js with TypeScript for the HTTP server\n- Custom logging middleware tracking request duration and response status\n- Static file serving for production builds via express.static\n- Development mode integration with Vite middleware for HMR\n\n**API Design**\n- RESTful endpoints following convention:\n  - `GET /api/videos?page=N` - List videos for page N (from videos_page_N.json)\n  - `GET /api/videos?search=query` - Search videos across pages\n  - `GET /api/videos?category=cat` - Filter by category\n  - `GET /api/videos/:id` - Fetch individual video (id format: \"pageNum-index\")\n  - `GET /api/categories` - Retrieve all categories (auto-extracted from JSON data)\n  - `GET /api/performers` - Retrieve all performers/actors\n  - `GET /api/tags` - Retrieve all tags\n  - `GET /api/stats` - Get total pages and video counts\n- Query parameter based filtering (search, category, performer, tag)\n- JSON response format with consistent error handling\n\n**Data Layer**\n- VideoStorage class loads videos dynamically from 1260 JSON files\n- Each JSON file contains ~100 videos with embedded video data\n- Auto-extracts categories, performers, and tags from video metadata\n- Pagination support with hasNext/hasPrevious indicators\n\n**Database Schema Design** (Prepared for PostgreSQL)\n- Drizzle ORM configured for type-safe database operations\n- Schema defined in `shared/schema.ts` with Zod validation\n- Video schema includes: id, title, thumbnailUrl, embedCode, embedUrl, duration, views, likes, dislikes, categories, tags, actors, screenshots\n- Migration support via drizzle-kit\n\n### Video Data Structure\n\nEach video from JSON includes:\n- `embed`: HTML iframe embed code\n- `thumbnail` / `thumbnail2`: Thumbnail image URLs\n- `screenshots`: Array of screenshot image URLs\n- `title`: Video title\n- `tags`: Semicolon-separated tag list\n- `categories`: Semicolon-separated category list\n- `actors`: Semicolon-separated performer list\n- `duration`: Duration in seconds\n- `views`: View count\n- `likes` / `dislikes`: Rating counts\n\n### Build & Deployment Strategy\n\n**Development Workflow**\n- `npm run dev` - Runs Express server with Vite middleware in development mode\n- Vite dev server provides instant HMR with source map support\n- Custom runtime error overlay for development debugging\n\n**Production Build Process**\n- `npm run build` - Custom build script (`script/build.ts`) performs:\n  1. Client build via Vite (outputs to `dist/public`)\n  2. Server build via esbuild (outputs to `dist/index.cjs`)\n  3. Selective dependency bundling (allowlist for faster cold starts)\n  4. External dependencies (not bundled) for reduced bundle size\n\n**Deployment Configuration**\n- Node.js production server via `npm start`\n- Environment-based configuration (DATABASE_URL from environment variables)\n- Static assets served from `dist/public` with fallback to index.html for SPA routing\n\n### Code Organization\n\n**Monorepo Structure**\n- `client/` - React frontend application\n  - `src/pages/` - Route components (Home, VideoPlayer, Login, Register, About, Privacy, Terms, Contact, Settings, History, WatchLater, Notifications, Welcome, Offline)\n  - `src/components/` - Reusable UI components\n  - `src/components/ui/` - Shadcn UI component library\n  - `src/context/` - Context providers (Language, AgeVerification, CookieConsent, Auth, GuestLimit, Favorites)\n  - `src/hooks/` - Custom React hooks\n  - `src/lib/` - Utilities (queryClient, utils)\n  - `src/lib/i18n/` - Translation files for 5 languages\n- `server/` - Express backend\n  - `routes.ts` - API endpoint definitions\n  - `storage.ts` - VideoStorage class for JSON file loading\n  - `vite.ts` - Vite development middleware\n  - `static.ts` - Static file serving\n- `shared/` - Code shared between frontend and backend\n  - `schema.ts` - Type definitions and Zod schemas\n- `data/` - 1260 JSON files containing video data\n\n**Path Aliases**\n- `@/`  `client/src/` (frontend imports)\n- `@shared/`  `shared/` (shared types)\n- `@assets/`  `attached_assets/` (static assets)\n\n## External Dependencies\n\n### Core Technologies\n- **Neon Database** (@neondatabase/serverless) - Serverless PostgreSQL driver for database connectivity\n- **Drizzle ORM** (drizzle-orm) - Type-safe SQL query builder and ORM\n- **Express.js** - Web server framework with middleware ecosystem\n\n### Frontend Libraries\n- **React** (implicit via Vite) - UI library\n- **Wouter** - Lightweight routing (~1.2KB)\n- **TanStack Query** (@tanstack/react-query) - Server state management\n- **Radix UI** - Accessible component primitives (20+ components)\n- **Framer Motion** - Animation library\n- **Tailwind CSS** - Utility-first CSS framework\n- **Class Variance Authority** - Component variant management\n- **Zod** - Schema validation (shared between frontend/backend)\n\n### Development Tools\n- **Vite** - Build tool and dev server\n- **TypeScript** - Type safety across the stack\n- **ESBuild** - Fast JavaScript bundler for server builds\n- **PostCSS** - CSS processing with Tailwind and Autoprefixer\n\n### UI Component Dependencies\n- Multiple @radix-ui packages for accessible primitives (accordion, dialog, dropdown, etc.)\n- Lucide React for icon components\n- Embla Carousel for carousels (if needed)\n- CMDK for command palette components\n\n### Planned Integrations\n- Session management infrastructure (connect-pg-simple, express-session)\n- Authentication scaffolding (passport, passport-local)\n- Advanced playback features (10+ enhancements)\n- Gesture-based interactions (10+ gestures)\n\n### Environment Requirements\n- Node.js environment with ES modules support\n- PostgreSQL database (via DATABASE_URL environment variable)\n- Replit-specific plugins for development (@replit/vite-plugin-*)\n","path":null,"size_bytes":8588,"size_tokens":null},"client/src/pages/ForgotPassword.tsx":{"content":"import { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { Link } from 'wouter';\nimport { useAuth } from '@/context/AuthContext';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { useToast } from '@/hooks/use-toast';\nimport { KeyRound, Loader2, ArrowLeft, CheckCircle } from 'lucide-react';\n\nconst forgotPasswordSchema = z.object({\n  email: z.string().email('Please enter a valid email'),\n});\n\ntype ForgotPasswordFormData = z.infer<typeof forgotPasswordSchema>;\n\nexport default function ForgotPassword() {\n  const { forgotPassword } = useAuth();\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [emailSent, setEmailSent] = useState(false);\n\n  const form = useForm<ForgotPasswordFormData>({\n    resolver: zodResolver(forgotPasswordSchema),\n    defaultValues: {\n      email: '',\n    },\n  });\n\n  const onSubmit = async (data: ForgotPasswordFormData) => {\n    setIsLoading(true);\n    const result = await forgotPassword(data.email);\n    setIsLoading(false);\n\n    if (result.success) {\n      setEmailSent(true);\n      toast({\n        title: 'Email sent',\n        description: 'Check your inbox for password reset instructions.',\n      });\n    } else {\n      toast({\n        title: 'Request failed',\n        description: result.error || 'Could not send reset email',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  if (emailSent) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-b from-background to-muted p-4\">\n        <Card className=\"w-full max-w-md\" data-testid=\"card-email-sent\">\n          <CardHeader className=\"text-center space-y-2\">\n            <div className=\"mx-auto w-12 h-12 rounded-full bg-green-500/10 flex items-center justify-center mb-2\">\n              <CheckCircle className=\"w-6 h-6 text-green-500\" />\n            </div>\n            <CardTitle className=\"text-2xl\">Check Your Email</CardTitle>\n            <CardDescription>\n              We've sent password reset instructions to your email address.\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <p className=\"text-sm text-muted-foreground text-center\">\n              Didn't receive the email? Check your spam folder or try again.\n            </p>\n          </CardContent>\n          <CardFooter className=\"flex flex-col gap-4\">\n            <Button\n              variant=\"outline\"\n              className=\"w-full\"\n              onClick={() => setEmailSent(false)}\n              data-testid=\"button-try-again\"\n            >\n              Try Another Email\n            </Button>\n            <Link href=\"/login\" className=\"text-sm text-primary hover:underline\" data-testid=\"link-back-to-login\">\n              <ArrowLeft className=\"w-4 h-4 inline mr-1\" />\n              {t.auth.backToLogin}\n            </Link>\n          </CardFooter>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-b from-background to-muted p-4\">\n      <Card className=\"w-full max-w-md\" data-testid=\"card-forgot-password\">\n        <CardHeader className=\"text-center space-y-2\">\n          <div className=\"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-2\">\n            <KeyRound className=\"w-6 h-6 text-primary\" />\n          </div>\n          <CardTitle className=\"text-2xl\" data-testid=\"text-forgot-password-title\">\n            {t.auth.resetPassword}\n          </CardTitle>\n          <CardDescription>\n            Enter your email and we'll send you reset instructions\n          </CardDescription>\n        </CardHeader>\n\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{t.auth.email}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"email\"\n                        placeholder=\"name@example.com\"\n                        data-testid=\"input-forgot-email\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={isLoading}\n                data-testid=\"button-send-reset\"\n              >\n                {isLoading ? (\n                  <Loader2 className=\"w-4 h-4 animate-spin mr-2\" />\n                ) : (\n                  <KeyRound className=\"w-4 h-4 mr-2\" />\n                )}\n                {t.auth.sendResetLink}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n\n        <CardFooter className=\"flex justify-center\">\n          <Link href=\"/login\" className=\"text-sm text-muted-foreground hover:text-primary\" data-testid=\"link-back-login\">\n            <ArrowLeft className=\"w-4 h-4 inline mr-1\" />\n            {t.auth.backToLogin}\n          </Link>\n        </CardFooter>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":5704,"size_tokens":null},"client/src/context/LanguageContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, type ReactNode } from 'react';\nimport { translations, type Language, type TranslationKeys, languageNames } from '@/lib/i18n/translations';\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (lang: Language) => void;\n  t: TranslationKeys;\n  languageNames: Record<Language, string>;\n  availableLanguages: Language[];\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nconst STORAGE_KEY = 'blueberry_language';\n\nexport function LanguageProvider({ children }: { children: ReactNode }) {\n  const [language, setLanguageState] = useState<Language>(() => {\n    if (typeof window !== 'undefined') {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (stored && stored in translations) {\n        return stored as Language;\n      }\n      const browserLang = navigator.language.split('-')[0];\n      if (browserLang in translations) {\n        return browserLang as Language;\n      }\n    }\n    return 'en';\n  });\n\n  const setLanguage = (lang: Language) => {\n    setLanguageState(lang);\n    localStorage.setItem(STORAGE_KEY, lang);\n    document.documentElement.lang = lang;\n  };\n\n  useEffect(() => {\n    document.documentElement.lang = language;\n  }, [language]);\n\n  const value: LanguageContextType = {\n    language,\n    setLanguage,\n    t: translations[language],\n    languageNames,\n    availableLanguages: Object.keys(translations) as Language[],\n  };\n\n  return (\n    <LanguageContext.Provider value={value}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n\nexport function useLanguage() {\n  const context = useContext(LanguageContext);\n  if (!context) {\n    throw new Error('useLanguage must be used within a LanguageProvider');\n  }\n  return context;\n}\n","path":null,"size_bytes":1776,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"client/src/pages/Contact.tsx":{"content":"import { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { Link } from 'wouter';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useToast } from '@/hooks/use-toast';\nimport { ArrowLeft, Send, Loader2, Mail, MessageSquare, HelpCircle, Bug, AlertCircle } from 'lucide-react';\n\nconst contactSchema = z.object({\n  name: z.string().min(2, 'Name must be at least 2 characters'),\n  email: z.string().email('Please enter a valid email'),\n  subject: z.string().min(1, 'Please select a subject'),\n  message: z.string().min(10, 'Message must be at least 10 characters'),\n});\n\ntype ContactFormData = z.infer<typeof contactSchema>;\n\nexport default function Contact() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n\n  const form = useForm<ContactFormData>({\n    resolver: zodResolver(contactSchema),\n    defaultValues: {\n      name: '',\n      email: '',\n      subject: '',\n      message: '',\n    },\n  });\n\n  const onSubmit = async (data: ContactFormData) => {\n    setIsLoading(true);\n    await new Promise(resolve => setTimeout(resolve, 1500));\n    setIsLoading(false);\n    setSubmitted(true);\n    toast({\n      title: 'Message sent!',\n      description: 'We will get back to you within 24-48 hours.',\n    });\n  };\n\n  const subjects = [\n    { value: 'general', label: 'General Inquiry', icon: HelpCircle },\n    { value: 'technical', label: 'Technical Support', icon: Bug },\n    { value: 'feedback', label: 'Feedback & Suggestions', icon: MessageSquare },\n    { value: 'report', label: 'Report an Issue', icon: AlertCircle },\n  ];\n\n  if (submitted) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-b from-background to-muted p-4\">\n        <Card className=\"w-full max-w-md text-center\" data-testid=\"card-contact-success\">\n          <CardHeader>\n            <div className=\"mx-auto w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mb-4\">\n              <Mail className=\"w-8 h-8 text-green-500\" />\n            </div>\n            <CardTitle className=\"text-2xl\">Message Sent!</CardTitle>\n            <CardDescription>\n              Thank you for contacting us. We typically respond within 24-48 hours.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Button asChild className=\"w-full\">\n              <Link href=\"/\" data-testid=\"link-back-home\">\n                Return to Home\n              </Link>\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background to-muted\">\n      <div className=\"max-w-2xl mx-auto p-6 space-y-8\">\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Button variant=\"ghost\" size=\"icon\" asChild>\n            <Link href=\"/\" data-testid=\"button-back-home\">\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Link>\n          </Button>\n          <div>\n            <h1 className=\"text-3xl font-bold\" data-testid=\"text-contact-title\">\n              {t.legal.contactSupport}\n            </h1>\n            <p className=\"text-sm text-muted-foreground\">We're here to help</p>\n          </div>\n        </div>\n\n        <Card data-testid=\"card-contact-form\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <MessageSquare className=\"w-5 h-5 text-primary\" />\n              Send us a Message\n            </CardTitle>\n            <CardDescription>\n              Fill out the form below and we'll get back to you as soon as possible.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Name</FormLabel>\n                        <FormControl>\n                          <Input\n                            placeholder=\"Your name\"\n                            data-testid=\"input-contact-name\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"email\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Email</FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"email\"\n                            placeholder=\"your@email.com\"\n                            data-testid=\"input-contact-email\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <FormField\n                  control={form.control}\n                  name=\"subject\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Subject</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-subject\">\n                            <SelectValue placeholder=\"Select a topic\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {subjects.map((subject) => (\n                            <SelectItem\n                              key={subject.value}\n                              value={subject.value}\n                              data-testid={`select-item-${subject.value}`}\n                            >\n                              <div className=\"flex items-center gap-2\">\n                                <subject.icon className=\"w-4 h-4\" />\n                                {subject.label}\n                              </div>\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"message\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Message</FormLabel>\n                      <FormControl>\n                        <Textarea\n                          placeholder=\"Tell us how we can help...\"\n                          className=\"min-h-32 resize-none\"\n                          data-testid=\"textarea-message\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <Button\n                  type=\"submit\"\n                  className=\"w-full\"\n                  disabled={isLoading}\n                  data-testid=\"button-send-message\"\n                >\n                  {isLoading ? (\n                    <Loader2 className=\"w-4 h-4 animate-spin mr-2\" />\n                  ) : (\n                    <Send className=\"w-4 h-4 mr-2\" />\n                  )}\n                  Send Message\n                </Button>\n              </form>\n            </Form>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-contact-info\">\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center text-muted-foreground\">\n              <p className=\"mb-2\">Alternatively, you can reach us at:</p>\n              <p className=\"font-medium text-foreground\">support@blueberry.app</p>\n              <p className=\"text-sm mt-4\">\n                Response time: 24-48 hours\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":8977,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* DARK MODE ONLY - Premium Adult Streaming Theme */\n:root {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 240 6% 6%;\n  --foreground: 240 4% 95%;\n  --border: 240 5% 14%;\n  --card: 240 5% 9%;\n  --card-foreground: 240 4% 95%;\n  --card-border: 240 5% 12%;\n  --sidebar: 240 5% 8%;\n  --sidebar-foreground: 240 4% 95%;\n  --sidebar-border: 240 5% 12%;\n  --sidebar-primary: 220 90% 56%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 240 8% 14%;\n  --sidebar-accent-foreground: 240 4% 95%;\n  --sidebar-ring: 220 90% 56%;\n  --popover: 240 6% 10%;\n  --popover-foreground: 240 4% 95%;\n  --popover-border: 240 5% 14%;\n  --primary: 220 90% 56%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 240 6% 16%;\n  --secondary-foreground: 240 4% 95%;\n  --muted: 240 8% 14%;\n  --muted-foreground: 240 4% 55%;\n  --accent: 280 70% 50%;\n  --accent-foreground: 0 0% 100%;\n  --destructive: 0 62% 50%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 240 5% 25%;\n  --ring: 220 90% 56%;\n  --chart-1: 220 90% 56%;\n  --chart-2: 280 70% 60%;\n  --chart-3: 320 75% 55%;\n  --chart-4: 340 70% 50%;\n  --chart-5: 180 60% 50%;\n  --font-sans: Inter, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 4px 0px hsl(240 6% 4% / 0.3);\n  --shadow-xs: 0px 2px 6px 0px hsl(240 6% 4% / 0.4);\n  --shadow-sm: 0px 2px 8px 0px hsl(240 6% 4% / 0.4), 0px 1px 2px -1px hsl(240 6% 4% / 0.3);\n  --shadow: 0px 4px 12px 0px hsl(240 6% 4% / 0.5), 0px 2px 4px -1px hsl(240 6% 4% / 0.3);\n  --shadow-md: 0px 6px 16px 0px hsl(240 6% 4% / 0.5), 0px 4px 8px -1px hsl(240 6% 4% / 0.3);\n  --shadow-lg: 0px 8px 24px 0px hsl(240 6% 4% / 0.5), 0px 6px 12px -1px hsl(240 6% 4% / 0.3);\n  --shadow-xl: 0px 12px 32px 0px hsl(240 6% 4% / 0.5), 0px 8px 16px -1px hsl(240 6% 4% / 0.3);\n  --shadow-2xl: 0px 16px 48px 0px hsl(240 6% 4% / 0.6);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 240 6% 6%;\n  --foreground: 240 4% 95%;\n  --border: 240 5% 14%;\n  --card: 240 5% 9%;\n  --card-foreground: 240 4% 95%;\n  --card-border: 240 5% 12%;\n  --sidebar: 240 5% 8%;\n  --sidebar-foreground: 240 4% 95%;\n  --sidebar-border: 240 5% 12%;\n  --sidebar-primary: 220 90% 56%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 240 8% 14%;\n  --sidebar-accent-foreground: 240 4% 95%;\n  --sidebar-ring: 220 90% 56%;\n  --popover: 240 6% 10%;\n  --popover-foreground: 240 4% 95%;\n  --popover-border: 240 5% 14%;\n  --primary: 220 90% 56%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 240 6% 16%;\n  --secondary-foreground: 240 4% 95%;\n  --muted: 240 8% 14%;\n  --muted-foreground: 240 4% 55%;\n  --accent: 280 70% 50%;\n  --accent-foreground: 0 0% 100%;\n  --destructive: 0 62% 50%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 240 5% 25%;\n  --ring: 220 90% 56%;\n  --chart-1: 220 90% 56%;\n  --chart-2: 280 70% 60%;\n  --chart-3: 320 75% 55%;\n  --chart-4: 340 70% 50%;\n  --chart-5: 180 60% 50%;\n  --shadow-2xs: 0px 2px 4px 0px hsl(240 6% 4% / 0.3);\n  --shadow-xs: 0px 2px 6px 0px hsl(240 6% 4% / 0.4);\n  --shadow-sm: 0px 2px 8px 0px hsl(240 6% 4% / 0.4), 0px 1px 2px -1px hsl(240 6% 4% / 0.3);\n  --shadow: 0px 4px 12px 0px hsl(240 6% 4% / 0.5), 0px 2px 4px -1px hsl(240 6% 4% / 0.3);\n  --shadow-md: 0px 6px 16px 0px hsl(240 6% 4% / 0.5), 0px 4px 8px -1px hsl(240 6% 4% / 0.3);\n  --shadow-lg: 0px 8px 24px 0px hsl(240 6% 4% / 0.5), 0px 6px 12px -1px hsl(240 6% 4% / 0.3);\n  --shadow-xl: 0px 12px 32px 0px hsl(240 6% 4% / 0.5), 0px 8px 16px -1px hsl(240 6% 4% / 0.3);\n  --shadow-2xl: 0px 16px 48px 0px hsl(240 6% 4% / 0.6);\n\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  html {\n    @apply scroll-smooth;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n@layer utilities {\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  .no-default-hover-elevate {}\n  .no-default-active-elevate {}\n\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    border-radius: inherit;\n    z-index: -1;\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    border-radius: inherit;\n    z-index: 999;\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n\n  /* Glassmorphic utilities */\n  .glass {\n    background: rgba(255, 255, 255, 0.05);\n    backdrop-filter: blur(12px);\n    -webkit-backdrop-filter: blur(12px);\n    border: 1px solid rgba(255, 255, 255, 0.08);\n  }\n\n  .glass-heavy {\n    background: rgba(255, 255, 255, 0.08);\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n  }\n\n  .glass-dark {\n    background: rgba(0, 0, 0, 0.4);\n    backdrop-filter: blur(16px);\n    -webkit-backdrop-filter: blur(16px);\n    border: 1px solid rgba(255, 255, 255, 0.05);\n  }\n\n  /* Gradient text */\n  .gradient-text {\n    background: linear-gradient(135deg, hsl(220, 90%, 60%) 0%, hsl(280, 70%, 60%) 100%);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n  }\n\n  /* Custom scrollbar */\n  .custom-scrollbar::-webkit-scrollbar {\n    width: 6px;\n    height: 6px;\n  }\n\n  .custom-scrollbar::-webkit-scrollbar-track {\n    background: transparent;\n  }\n\n  .custom-scrollbar::-webkit-scrollbar-thumb {\n    background: rgba(255, 255, 255, 0.15);\n    border-radius: 3px;\n  }\n\n  .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: rgba(255, 255, 255, 0.25);\n  }\n\n  /* Hide scrollbar but keep functionality */\n  .scrollbar-hide {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n\n  .scrollbar-hide::-webkit-scrollbar {\n    display: none;\n  }\n\n  /* Animation utilities */\n  .animate-slide-in-right {\n    animation: slideInRight 0.3s ease-out forwards;\n  }\n\n  .animate-slide-out-right {\n    animation: slideOutRight 0.3s ease-in forwards;\n  }\n\n  .animate-fade-in {\n    animation: fadeIn 0.2s ease-out forwards;\n  }\n\n  .animate-fade-up {\n    animation: fadeUp 0.4s ease-out forwards;\n  }\n\n  @keyframes slideInRight {\n    from {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n    to {\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n\n  @keyframes slideOutRight {\n    from {\n      transform: translateX(0);\n      opacity: 1;\n    }\n    to {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n  }\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n\n  @keyframes fadeUp {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  /* Video card hover animation */\n  .video-card-hover {\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n  }\n\n  .video-card-hover:hover {\n    transform: scale(1.03) translateY(-4px);\n    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);\n  }\n\n  /* Line clamp utility */\n  .line-clamp-2 {\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n  }\n\n  /* Aspect ratio for videos */\n  .aspect-video {\n    aspect-ratio: 16 / 9;\n  }\n}\n","path":null,"size_bytes":11438,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/Footer.tsx":{"content":"import { Link } from \"wouter\";\nimport { \n  Code, Heart, TrendingUp, Clock, Star, Grid3X3,\n  Users, Tag, Folder, Bookmark, History, Download,\n  Settings, User, Play, Bell, WifiOff, Accessibility,\n  HelpCircle, MessageSquare, Info, Mail, Shield, FileText\n} from \"lucide-react\";\n\nexport function Footer() {\n  const currentYear = new Date().getFullYear();\n\n  return (\n    <footer \n      className=\"mt-auto border-t border-white/5 bg-black/20\"\n      data-testid=\"footer\"\n    >\n      <div className=\"max-w-[1920px] mx-auto px-4 md:px-8 py-12\">\n        <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-8\">\n          <div className=\"col-span-2 md:col-span-1 lg:col-span-2\">\n            <Link href=\"/\" className=\"inline-flex items-center gap-2 mb-4\">\n              <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center\">\n                <span className=\"text-white font-bold text-xl font-['Poppins']\">B</span>\n              </div>\n              <span className=\"text-2xl font-bold font-['Poppins'] gradient-text\">\n                Blueberry\n              </span>\n            </Link>\n            <p className=\"text-sm text-muted-foreground max-w-xs mb-4\">\n              Your premium destination for adult entertainment with a modern, elegant streaming experience. 126,000+ videos available.\n            </p>\n            <div className=\"flex items-center gap-2 mb-4\">\n              <Code className=\"w-4 h-4 text-primary\" />\n              <span className=\"text-xs font-semibold uppercase tracking-wider text-foreground\">\n                Developed By\n              </span>\n            </div>\n            <div className=\"space-y-1\">\n              <p className=\"text-foreground/80 text-sm flex items-center gap-2\">\n                <Heart className=\"w-3 h-3 text-red-400\" />\n                Roshan Sahu\n              </p>\n              <p className=\"text-foreground/80 text-sm flex items-center gap-2\">\n                <Heart className=\"w-3 h-3 text-red-400\" />\n                Papun Sahu\n              </p>\n              <p className=\"text-foreground/80 text-sm flex items-center gap-2\">\n                <Heart className=\"w-3 h-3 text-red-400\" />\n                Rohan Sahu\n              </p>\n            </div>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-semibold uppercase tracking-wider text-foreground mb-4\">\n              Browse\n            </h3>\n            <nav className=\"space-y-2\">\n              <Link href=\"/\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Grid3X3 className=\"w-3 h-3\" /> All Videos\n              </Link>\n              <Link href=\"/trending\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <TrendingUp className=\"w-3 h-3\" /> Trending\n              </Link>\n              <Link href=\"/?filter=recent\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Clock className=\"w-3 h-3\" /> Recently Added\n              </Link>\n              <Link href=\"/?filter=top-rated\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Star className=\"w-3 h-3\" /> Top Rated\n              </Link>\n              <Link href=\"/categories\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Folder className=\"w-3 h-3\" /> Categories\n              </Link>\n              <Link href=\"/performers\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Users className=\"w-3 h-3\" /> Performers\n              </Link>\n              <Link href=\"/tags\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Tag className=\"w-3 h-3\" /> Tags\n              </Link>\n            </nav>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-semibold uppercase tracking-wider text-foreground mb-4\">\n              Library\n            </h3>\n            <nav className=\"space-y-2\">\n              <Link href=\"/favorites\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Heart className=\"w-3 h-3\" /> Favorites\n              </Link>\n              <Link href=\"/watch-later\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Bookmark className=\"w-3 h-3\" /> Watch Later\n              </Link>\n              <Link href=\"/history\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <History className=\"w-3 h-3\" /> History\n              </Link>\n              <Link href=\"/playlists\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Folder className=\"w-3 h-3\" /> Playlists\n              </Link>\n              <Link href=\"/downloads\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Download className=\"w-3 h-3\" /> Downloads\n              </Link>\n            </nav>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-semibold uppercase tracking-wider text-foreground mb-4\">\n              Settings\n            </h3>\n            <nav className=\"space-y-2\">\n              <Link href=\"/profile\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <User className=\"w-3 h-3\" /> Profile\n              </Link>\n              <Link href=\"/settings\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Settings className=\"w-3 h-3\" /> Settings\n              </Link>\n              <Link href=\"/playback-settings\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Play className=\"w-3 h-3\" /> Playback\n              </Link>\n              <Link href=\"/accessibility\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Accessibility className=\"w-3 h-3\" /> Accessibility\n              </Link>\n              <Link href=\"/notifications\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Bell className=\"w-3 h-3\" /> Notifications\n              </Link>\n              <Link href=\"/offline\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <WifiOff className=\"w-3 h-3\" /> Offline Mode\n              </Link>\n            </nav>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-semibold uppercase tracking-wider text-foreground mb-4\">\n              Support\n            </h3>\n            <nav className=\"space-y-2\">\n              <Link href=\"/help\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <HelpCircle className=\"w-3 h-3\" /> Help Center\n              </Link>\n              <Link href=\"/feedback\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <MessageSquare className=\"w-3 h-3\" /> Feedback\n              </Link>\n              <Link href=\"/about\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Info className=\"w-3 h-3\" /> About\n              </Link>\n              <Link href=\"/contact\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Mail className=\"w-3 h-3\" /> Contact\n              </Link>\n              <Link href=\"/privacy\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <Shield className=\"w-3 h-3\" /> Privacy\n              </Link>\n              <Link href=\"/terms\" className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\">\n                <FileText className=\"w-3 h-3\" /> Terms\n              </Link>\n            </nav>\n          </div>\n        </div>\n\n        <div className=\"mt-10 pt-6 border-t border-white/5 text-center\">\n          <p className=\"text-sm text-muted-foreground\" data-testid=\"footer-copyright\">\n            {currentYear} Blueberry. All rights reserved.\n          </p>\n          <p className=\"text-xs text-muted-foreground/60 mt-2\">\n            All content is sourced from third-party providers. Users must be 18+ to access this site.\n          </p>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","path":null,"size_bytes":9074,"size_tokens":null},"client/src/hooks/use-lazy-load.ts":{"content":"import { useState, useEffect, useRef, type RefObject } from \"react\";\n\ninterface UseLazyLoadOptions {\n  threshold?: number;\n  rootMargin?: string;\n}\n\nexport function useLazyLoad<T extends HTMLElement>(\n  options: UseLazyLoadOptions = {}\n): [RefObject<T>, boolean] {\n  const { threshold = 0.1, rootMargin = \"100px\" } = options;\n  const elementRef = useRef<T>(null);\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    const element = elementRef.current;\n    if (!element) return;\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsVisible(true);\n          observer.disconnect();\n        }\n      },\n      {\n        threshold,\n        rootMargin,\n      }\n    );\n\n    observer.observe(element);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [threshold, rootMargin]);\n\n  return [elementRef, isVisible];\n}\n","path":null,"size_bytes":909,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/pages/History.tsx":{"content":"import { useState, useEffect, useMemo } from 'react';\nimport { Link } from 'wouter';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { useToast } from '@/hooks/use-toast';\nimport { ArrowLeft, History as HistoryIcon, Search, Trash2, Play, Clock } from 'lucide-react';\n\ninterface WatchHistoryItem {\n  videoId: string;\n  title: string;\n  thumbnail: string;\n  duration: string;\n  watchedAt: string;\n  progress: number;\n}\n\nexport default function History() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [history, setHistory] = useState<WatchHistoryItem[]>([]);\n\n  useEffect(() => {\n    const stored = localStorage.getItem('blueberry_watch_history');\n    if (stored) {\n      try {\n        setHistory(JSON.parse(stored));\n      } catch {\n        setHistory([]);\n      }\n    }\n  }, []);\n\n  const filteredHistory = useMemo(() => {\n    if (!searchQuery.trim()) return history;\n    const query = searchQuery.toLowerCase();\n    return history.filter(item => \n      item.title.toLowerCase().includes(query)\n    );\n  }, [history, searchQuery]);\n\n  const handleClearHistory = () => {\n    setHistory([]);\n    localStorage.removeItem('blueberry_watch_history');\n    toast({\n      title: 'History cleared',\n      description: 'Your watch history has been cleared.',\n    });\n  };\n\n  const handleRemoveItem = (videoId: string) => {\n    const updated = history.filter(item => item.videoId !== videoId);\n    setHistory(updated);\n    localStorage.setItem('blueberry_watch_history', JSON.stringify(updated));\n    toast({\n      title: 'Removed from history',\n      description: 'Video removed from your watch history.',\n    });\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    \n    if (days === 0) return 'Today';\n    if (days === 1) return 'Yesterday';\n    if (days < 7) return `${days} days ago`;\n    return date.toLocaleDateString();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background to-muted\">\n      <div className=\"max-w-4xl mx-auto p-6 space-y-6\">\n        <div className=\"flex items-center justify-between gap-4 mb-8\">\n          <div className=\"flex items-center gap-4\">\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link href=\"/\" data-testid=\"button-back-home\">\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Link>\n            </Button>\n            <div>\n              <h1 className=\"text-3xl font-bold flex items-center gap-2\" data-testid=\"text-history-title\">\n                <HistoryIcon className=\"w-8 h-8 text-primary\" />\n                {t.common.history}\n              </h1>\n              <p className=\"text-sm text-muted-foreground\">\n                {history.length} videos in your history\n              </p>\n            </div>\n          </div>\n          {history.length > 0 && (\n            <Button\n              variant=\"outline\"\n              onClick={handleClearHistory}\n              data-testid=\"button-clear-all-history\"\n            >\n              <Trash2 className=\"w-4 h-4 mr-2\" />\n              Clear All\n            </Button>\n          )}\n        </div>\n\n        {history.length > 0 && (\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <Input\n              placeholder=\"Search history...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-10\"\n              data-testid=\"input-search-history\"\n            />\n          </div>\n        )}\n\n        {filteredHistory.length === 0 ? (\n          <Card data-testid=\"card-empty-history\">\n            <CardContent className=\"flex flex-col items-center justify-center py-16\">\n              <HistoryIcon className=\"w-16 h-16 text-muted-foreground/50 mb-4\" />\n              <h3 className=\"text-lg font-medium mb-2\">\n                {searchQuery ? 'No results found' : 'No watch history'}\n              </h3>\n              <p className=\"text-sm text-muted-foreground text-center max-w-sm\">\n                {searchQuery \n                  ? 'Try a different search term'\n                  : 'Videos you watch will appear here so you can easily find them again.'\n                }\n              </p>\n              <Button asChild className=\"mt-6\">\n                <Link href=\"/\" data-testid=\"link-browse-videos\">\n                  Browse Videos\n                </Link>\n              </Button>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"space-y-3\">\n            {filteredHistory.map((item) => (\n              <Card key={item.videoId} className=\"hover-elevate\" data-testid={`card-history-${item.videoId}`}>\n                <CardContent className=\"p-3\">\n                  <div className=\"flex gap-4\">\n                    <Link href={`/video/${item.videoId}`}>\n                      <div className=\"relative w-40 aspect-video rounded-md overflow-hidden shrink-0 group\">\n                        <img\n                          src={item.thumbnail}\n                          alt={item.title}\n                          className=\"w-full h-full object-cover\"\n                        />\n                        <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\n                          <Play className=\"w-8 h-8 text-white\" />\n                        </div>\n                        <div className=\"absolute bottom-1 right-1 bg-black/80 px-1.5 py-0.5 rounded text-xs text-white\">\n                          {item.duration}\n                        </div>\n                        {item.progress > 0 && item.progress < 100 && (\n                          <div className=\"absolute bottom-0 left-0 right-0 h-1 bg-white/30\">\n                            <div \n                              className=\"h-full bg-primary\"\n                              style={{ width: `${item.progress}%` }}\n                            />\n                          </div>\n                        )}\n                      </div>\n                    </Link>\n                    <div className=\"flex-1 min-w-0\">\n                      <Link href={`/video/${item.videoId}`}>\n                        <h3 className=\"font-medium line-clamp-2 hover:text-primary transition-colors\">\n                          {item.title}\n                        </h3>\n                      </Link>\n                      <div className=\"flex items-center gap-2 mt-2 text-sm text-muted-foreground\">\n                        <Clock className=\"w-4 h-4\" />\n                        {formatDate(item.watchedAt)}\n                      </div>\n                    </div>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => handleRemoveItem(item.videoId)}\n                      data-testid={`button-remove-history-${item.videoId}`}\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":7551,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"shared/schema.ts":{"content":"import { z } from \"zod\";\n\nexport const videoSchema = z.object({\n  id: z.string(),\n  title: z.string(),\n  thumbnailUrl: z.string(),\n  thumbnail2Url: z.string().optional(),\n  embedCode: z.string(),\n  embedUrl: z.string(),\n  duration: z.string(),\n  durationSeconds: z.number(),\n  views: z.string(),\n  viewsCount: z.number(),\n  likes: z.number(),\n  dislikes: z.number(),\n  category: z.string(),\n  categories: z.array(z.string()),\n  tags: z.array(z.string()),\n  actors: z.array(z.string()),\n  screenshots: z.array(z.string()).optional(),\n});\n\nexport const categorySchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  icon: z.string(),\n  count: z.number(),\n});\n\nexport const performerSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  videoCount: z.number(),\n});\n\nexport const tagSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  count: z.number(),\n});\n\nexport const paginatedVideosSchema = z.object({\n  videos: z.array(videoSchema),\n  page: z.number(),\n  totalPages: z.number(),\n  totalVideos: z.number(),\n  hasNext: z.boolean(),\n  hasPrevious: z.boolean(),\n});\n\nexport const userSchema = z.object({\n  id: z.string(),\n  username: z.string(),\n  email: z.string(),\n  passwordHash: z.string(),\n  createdAt: z.string(),\n});\n\nexport type Video = z.infer<typeof videoSchema>;\nexport type Category = z.infer<typeof categorySchema>;\nexport type Performer = z.infer<typeof performerSchema>;\nexport type Tag = z.infer<typeof tagSchema>;\nexport type PaginatedVideos = z.infer<typeof paginatedVideosSchema>;\nexport type User = z.infer<typeof userSchema>;\n\nexport const insertVideoSchema = videoSchema.omit({ id: true });\nexport type InsertVideo = z.infer<typeof insertVideoSchema>;\n\nexport const insertUserSchema = userSchema.omit({ id: true, createdAt: true, passwordHash: true }).extend({\n  password: z.string().min(8),\n});\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\nexport const loginSchema = z.object({\n  email: z.string().email(),\n  password: z.string(),\n});\nexport type LoginInput = z.infer<typeof loginSchema>;\n\nexport const users = {\n  id: \"\",\n  username: \"\",\n  password: \"\",\n};\n","path":null,"size_bytes":2113,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"design_guidelines.md":{"content":"# Blueberry Video Streaming Platform - Design Guidelines\n\n## Design Approach\n**Reference-Based Approach**: Drawing inspiration from premium streaming platforms (Netflix dark elegance + Pornhub's content-first layout + modern glassmorphism)\n\n**Core Aesthetic**: Premium adult entertainment platform with sophisticated, professional UI that elevates the streaming experience through glassmorphic depth, subtle animations, and content-forward design.\n\n---\n\n## Typography System\n\n**Primary Font**: Inter (Google Fonts) - Modern, highly legible\n**Secondary Font**: Poppins (Google Fonts) - Headlines and accents\n\n**Hierarchy**:\n- Hero/Logo: Poppins Bold, 32px (mobile) / 48px (desktop)\n- Section Headers: Poppins SemiBold, 24px (mobile) / 32px (desktop)\n- Video Titles: Inter Medium, 16px (mobile) / 18px (desktop)\n- Body Text: Inter Regular, 14px (mobile) / 16px (desktop)\n- Metadata (views, duration): Inter Regular, 12px / 14px\n- Navigation Links: Inter Medium, 15px\n\n---\n\n## Layout & Spacing System\n\n**Spacing Units**: Tailwind units of 2, 4, 6, 8, 12, 16 (e.g., p-4, gap-6, mb-8)\n\n**Grid System**:\n- Mobile: Single column (grid-cols-1)\n- Tablet: 2 columns (md:grid-cols-2)\n- Desktop: 4 columns (lg:grid-cols-4)\n- Large Desktop: 5 columns (xl:grid-cols-5)\n\n**Container Strategy**:\n- Max-width: 1920px (full layout)\n- Content padding: px-4 (mobile), px-8 (tablet), px-12 (desktop)\n- Section spacing: py-8 (mobile), py-12 (desktop)\n\n---\n\n## Navigation & Layout Structure\n\n### Header (Fixed)\n- Height: 64px on all devices\n- Top-right hamburger menu () - 44x44px touch target\n- Left: Blueberry logo (Poppins Bold) with subtle gradient\n- Center: Search bar with glassmorphic background (hidden on mobile, shows on md+)\n- Sticky positioning with backdrop blur\n\n### Side Navigation Drawer\n- Width: 280px (slides from right)\n- Glassmorphic background with heavy blur\n- Overlay darkens main content (40% opacity)\n- Categories list with icons (Heroicons)\n- User profile section at top\n- Developer credits at bottom\n- Smooth slide-in animation (300ms ease-out)\n\n### Back Button\n- Fixed position: top-left, 44x44px\n- Shows on video player page and category pages\n- Glassmorphic circular button with arrow icon\n- Positioned 16px from edges\n\n---\n\n## Component Library\n\n### Video Card (Thumbnail)\n- Aspect ratio: 16:9 (enforced)\n- Rounded corners: 12px\n- Thumbnail image with gradient overlay (bottom fade)\n- Duration badge: bottom-right, glassmorphic pill\n- Hover: Scale 1.03, lift shadow (200ms ease)\n- Below thumbnail: Title (2 lines max, ellipsis), metadata row (views, upload date)\n\n### Category Pills\n- Horizontal scrollable row\n- Glassmorphic background, 32px height\n- Active state: Solid fill, inactive: Bordered ghost style\n- Smooth scroll with momentum\n\n### Search Bar\n- Glassmorphic container, 48px height\n- Search icon left, clear icon right (when text present)\n- Rounded: 24px (pill shape)\n- Focus: Subtle glow effect\n\n### Video Player Container\n- Full-width aspect ratio container (16:9)\n- Embedded iframe with rounded corners (16px on desktop, 0px on mobile)\n- Below player: Title, view count, upload date, description section\n\n### Glassmorphic Buttons\n- Primary: Gradient background, white text\n- Secondary: Glassmorphic with border\n- On images/hero: Heavy backdrop blur, semi-transparent white background\n- Height: 44px, Rounded: 22px\n- No custom hover states (browser default handles)\n\n---\n\n## Page Structures\n\n### Homepage\n1. **Hero Section** (40vh mobile / 50vh desktop)\n   - Featured video background (auto-playing, muted, looped video or static image)\n   - Gradient overlay (dark bottom to transparent)\n   - Centered: Platform tagline + Primary CTA button with blurred background\n   \n2. **Category Pills Row** (sticky below header)\n   - Trending, New, Top Rated, Categories...\n   \n3. **Video Grid Sections**\n   - Section header: \"Trending Now\", \"Recently Added\", \"Top Rated\"\n   - 4-5 video cards per row (desktop)\n   - Infinite scroll or pagination\n\n### Video Player Page\n1. Back button (top-left)\n2. Embedded video player (Pornhub iframe)\n3. Video metadata section\n4. Related videos grid below (2 columns mobile, 4 desktop)\n\n### Category Page\n- Back button (top-left)\n- Category header with count\n- Filtered video grid\n- Load more functionality\n\n---\n\n## Glassmorphic Design System\n\n**Glass Card Properties**:\n- Background: rgba(255, 255, 255, 0.05)\n- Backdrop blur: 12px - 20px\n- Border: 1px solid rgba(255, 255, 255, 0.1)\n- Shadow: Subtle depth (0 8px 32px rgba(0, 0, 0, 0.15))\n\n**Applied To**: Navigation drawer, search bar, buttons, category pills, video duration badges, metadata containers\n\n---\n\n## Animations & Interactions\n\n**Minimal Animation Philosophy**: Smooth but subtle\n\n**Implemented Animations**:\n- Navigation drawer: Slide-in/out (300ms)\n- Video card hover: Scale + shadow (200ms)\n- Category pill transitions: Background change (150ms)\n- Page transitions: Fade (200ms)\n- Scroll reveals: Subtle fade-up for video cards (stagger 50ms)\n\n**Avoid**: Excessive parallax, distracting auto-play animations, heavy particles\n\n---\n\n## Footer\n\n- Glassmorphic container\n- Three columns (desktop) / stacked (mobile)\n- Column 1: Logo + tagline\n- Column 2: Quick links (Categories, About, Contact)\n- Column 3: Developer credits section\n  - \"Developed by Roshan Sahu, Papun Sahu, Rohan Sahu\"\n  - Small text, centered styling\n- Bottom: Copyright year\n\n---\n\n## Images Section\n\n**Hero Background**: Use a stylized, abstract gradient or subtle pattern background (NOT explicit content). Alternative: Dark gradient with floating geometric shapes for premium feel.\n\n**Video Thumbnails**: Embedded from Pornhub - maintain 16:9 aspect ratio with object-fit cover.\n\n**Placeholder States**: Use gradient placeholders while thumbnails load.\n\n---\n\n## Responsive Breakpoints\n\n- Mobile: < 768px\n- Tablet: 768px - 1024px\n- Desktop: 1024px+\n- Large Desktop: 1440px+","path":null,"size_bytes":5858,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/components/VideoGrid.tsx":{"content":"import { VideoCard, VideoCardSkeleton } from \"./VideoCard\";\nimport type { Video } from \"@shared/schema\";\n\ninterface VideoGridProps {\n  title?: string;\n  videos: Video[];\n  isLoading?: boolean;\n  emptyMessage?: string;\n  sectionId?: string;\n}\n\nexport function VideoGrid({ \n  title, \n  videos, \n  isLoading = false,\n  emptyMessage = \"No videos found\",\n  sectionId = \"grid\"\n}: VideoGridProps) {\n  if (isLoading) {\n    return (\n      <section className=\"py-6 md:py-8\" data-testid=\"video-grid-loading\">\n        {title && (\n          <h2 className=\"text-xl md:text-2xl font-semibold font-['Poppins'] mb-6 px-4 md:px-8\">\n            {title}\n          </h2>\n        )}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6 px-4 md:px-8\">\n          {Array.from({ length: 10 }).map((_, i) => (\n            <VideoCardSkeleton key={i} />\n          ))}\n        </div>\n      </section>\n    );\n  }\n\n  if (videos.length === 0) {\n    return (\n      <section className=\"py-12\" data-testid=\"video-grid-empty\">\n        <div className=\"text-center px-4\">\n          <div className=\"w-20 h-20 mx-auto mb-4 rounded-full glass flex items-center justify-center\">\n            <svg \n              className=\"w-10 h-10 text-muted-foreground\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                strokeWidth={1.5} \n                d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" \n              />\n            </svg>\n          </div>\n          <p className=\"text-lg text-muted-foreground\">{emptyMessage}</p>\n        </div>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"py-6 md:py-8\" data-testid={`video-grid-${sectionId}`}>\n      {title && (\n        <h2 \n          className=\"text-xl md:text-2xl font-semibold font-['Poppins'] mb-6 px-4 md:px-8\"\n          data-testid=\"video-grid-title\"\n        >\n          {title}\n        </h2>\n      )}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6 px-4 md:px-8\">\n        {videos.map((video, index) => (\n          <VideoCard key={`${sectionId}-${video.id}`} video={video} index={index} sectionId={sectionId} />\n        ))}\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":2440,"size_tokens":null},"client/src/lib/i18n/translations.ts":{"content":"export type Language = 'en' | 'hi' | 'od' | 'ta' | 'te';\n\nexport const languageNames: Record<Language, string> = {\n  en: 'English',\n  hi: '',\n  od: '',\n  ta: '',\n  te: ''\n};\n\nexport type TranslationKeys = {\n  common: {\n    home: string;\n    search: string;\n    categories: string;\n    trending: string;\n    recent: string;\n    favorites: string;\n    history: string;\n    watchLater: string;\n    notifications: string;\n    settings: string;\n    login: string;\n    register: string;\n    logout: string;\n    profile: string;\n    language: string;\n    all: string;\n    videos: string;\n    loading: string;\n    error: string;\n    retry: string;\n    cancel: string;\n    save: string;\n    delete: string;\n    confirm: string;\n    next: string;\n    previous: string;\n    page: string;\n    of: string;\n    noResults: string;\n    searchPlaceholder: string;\n  };\n  ageVerification: {\n    title: string;\n    warning: string;\n    warningDetails: string;\n    confirmButton: string;\n    exitButton: string;\n    disclaimer: string;\n  };\n  auth: {\n    loginTitle: string;\n    registerTitle: string;\n    email: string;\n    password: string;\n    confirmPassword: string;\n    username: string;\n    forgotPassword: string;\n    rememberMe: string;\n    loginButton: string;\n    registerButton: string;\n    noAccount: string;\n    hasAccount: string;\n    resetPassword: string;\n    sendResetLink: string;\n    backToLogin: string;\n    passwordMismatch: string;\n    invalidEmail: string;\n    weakPassword: string;\n  };\n  cookies: {\n    title: string;\n    message: string;\n    acceptAll: string;\n    acceptNecessary: string;\n    customize: string;\n    privacyPolicy: string;\n  };\n  legal: {\n    privacyPolicy: string;\n    termsOfService: string;\n    contactSupport: string;\n    aboutUs: string;\n    developers: string;\n  };\n  video: {\n    views: string;\n    likes: string;\n    dislikes: string;\n    duration: string;\n    addToWatchLater: string;\n    removeFromWatchLater: string;\n    addToFavorites: string;\n    removeFromFavorites: string;\n    share: string;\n    report: string;\n    relatedVideos: string;\n    comments: string;\n    tags: string;\n    category: string;\n    actors: string;\n  };\n  errors: {\n    pageNotFound: string;\n    somethingWentWrong: string;\n    noConnection: string;\n    tryAgain: string;\n    goHome: string;\n    offline: string;\n    offlineMessage: string;\n  };\n  settings: {\n    title: string;\n    appearance: string;\n    darkMode: string;\n    autoplay: string;\n    quality: string;\n    notifications: string;\n    pushNotifications: string;\n    emailNotifications: string;\n    privacy: string;\n    clearHistory: string;\n    deleteAccount: string;\n    languageSettings: string;\n  };\n  guest: {\n    limitTitle: string;\n    limitMessage: string;\n    videosRemaining: string;\n    loginForMore: string;\n  };\n  onboarding: {\n    welcome: string;\n    welcomeMessage: string;\n    step1Title: string;\n    step1Message: string;\n    step2Title: string;\n    step2Message: string;\n    step3Title: string;\n    step3Message: string;\n    getStarted: string;\n    skip: string;\n  };\n};\n\nexport const translations: Record<Language, TranslationKeys> = {\n  en: {\n    common: {\n      home: 'Home',\n      search: 'Search',\n      categories: 'Categories',\n      trending: 'Trending',\n      recent: 'Recent',\n      favorites: 'Favorites',\n      history: 'History',\n      watchLater: 'Watch Later',\n      notifications: 'Notifications',\n      settings: 'Settings',\n      login: 'Login',\n      register: 'Register',\n      logout: 'Logout',\n      profile: 'Profile',\n      language: 'Language',\n      all: 'All',\n      videos: 'Videos',\n      loading: 'Loading...',\n      error: 'Error',\n      retry: 'Retry',\n      cancel: 'Cancel',\n      save: 'Save',\n      delete: 'Delete',\n      confirm: 'Confirm',\n      next: 'Next',\n      previous: 'Previous',\n      page: 'Page',\n      of: 'of',\n      noResults: 'No results found',\n      searchPlaceholder: 'Search videos...',\n    },\n    ageVerification: {\n      title: 'Age Verification Required',\n      warning: 'This website contains adult content',\n      warningDetails: 'You must be 18 years or older to access this website. By clicking \"I am 18+\" you confirm that you are of legal age to view adult content in your jurisdiction.',\n      confirmButton: 'I am 18+',\n      exitButton: 'Exit',\n      disclaimer: 'All content on this website is intended for adults only. By entering, you accept our Terms of Service and Privacy Policy.',\n    },\n    auth: {\n      loginTitle: 'Welcome Back',\n      registerTitle: 'Create Account',\n      email: 'Email',\n      password: 'Password',\n      confirmPassword: 'Confirm Password',\n      username: 'Username',\n      forgotPassword: 'Forgot Password?',\n      rememberMe: 'Remember Me',\n      loginButton: 'Sign In',\n      registerButton: 'Create Account',\n      noAccount: \"Don't have an account?\",\n      hasAccount: 'Already have an account?',\n      resetPassword: 'Reset Password',\n      sendResetLink: 'Send Reset Link',\n      backToLogin: 'Back to Login',\n      passwordMismatch: 'Passwords do not match',\n      invalidEmail: 'Please enter a valid email',\n      weakPassword: 'Password must be at least 8 characters',\n    },\n    cookies: {\n      title: 'Cookie Consent',\n      message: 'We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. By clicking \"Accept All\", you consent to our use of cookies.',\n      acceptAll: 'Accept All',\n      acceptNecessary: 'Necessary Only',\n      customize: 'Customize',\n      privacyPolicy: 'Privacy Policy',\n    },\n    legal: {\n      privacyPolicy: 'Privacy Policy',\n      termsOfService: 'Terms of Service',\n      contactSupport: 'Contact Support',\n      aboutUs: 'About Us',\n      developers: 'Developers',\n    },\n    video: {\n      views: 'views',\n      likes: 'likes',\n      dislikes: 'dislikes',\n      duration: 'Duration',\n      addToWatchLater: 'Add to Watch Later',\n      removeFromWatchLater: 'Remove from Watch Later',\n      addToFavorites: 'Add to Favorites',\n      removeFromFavorites: 'Remove from Favorites',\n      share: 'Share',\n      report: 'Report',\n      relatedVideos: 'Related Videos',\n      comments: 'Comments',\n      tags: 'Tags',\n      category: 'Category',\n      actors: 'Actors',\n    },\n    errors: {\n      pageNotFound: 'Page Not Found',\n      somethingWentWrong: 'Something went wrong',\n      noConnection: 'No Internet Connection',\n      tryAgain: 'Try Again',\n      goHome: 'Go Home',\n      offline: 'You are offline',\n      offlineMessage: 'Please check your internet connection and try again.',\n    },\n    settings: {\n      title: 'Settings',\n      appearance: 'Appearance',\n      darkMode: 'Dark Mode',\n      autoplay: 'Autoplay Videos',\n      quality: 'Video Quality',\n      notifications: 'Notifications',\n      pushNotifications: 'Push Notifications',\n      emailNotifications: 'Email Notifications',\n      privacy: 'Privacy',\n      clearHistory: 'Clear Watch History',\n      deleteAccount: 'Delete Account',\n      languageSettings: 'Language Settings',\n    },\n    guest: {\n      limitTitle: 'Guest Limit Reached',\n      limitMessage: 'You have reached the maximum number of videos for guest users.',\n      videosRemaining: 'Videos remaining',\n      loginForMore: 'Login or register for unlimited access',\n    },\n    onboarding: {\n      welcome: 'Welcome to Blueberry',\n      welcomeMessage: 'Your premium streaming experience awaits',\n      step1Title: 'Discover Content',\n      step1Message: 'Browse thousands of videos across multiple categories',\n      step2Title: 'Create Playlists',\n      step2Message: 'Save your favorites and create watch later lists',\n      step3Title: 'Personalized Experience',\n      step3Message: 'Get recommendations based on your preferences',\n      getStarted: 'Get Started',\n      skip: 'Skip',\n    },\n  },\n  hi: {\n    common: {\n      home: '',\n      search: '',\n      categories: '',\n      trending: '',\n      recent: ' ',\n      favorites: '',\n      history: '',\n      watchLater: '  ',\n      notifications: '',\n      settings: '',\n      login: '',\n      register: '',\n      logout: '',\n      profile: '',\n      language: '',\n      all: '',\n      videos: '',\n      loading: '   ...',\n      error: '',\n      retry: '  ',\n      cancel: ' ',\n      save: '',\n      delete: '',\n      confirm: ' ',\n      next: '',\n      previous: '',\n      page: '',\n      of: '',\n      noResults: '   ',\n      searchPlaceholder: ' ...',\n    },\n    ageVerification: {\n      title: '  ',\n      warning: '     ',\n      warningDetails: '        18       \" 18+ \"                    ',\n      confirmButton: ' 18+ ',\n      exitButton: ' ',\n      disclaimer: '           ,           ',\n    },\n    auth: {\n      loginTitle: '   ',\n      registerTitle: ' ',\n      email: '',\n      password: '',\n      confirmPassword: '   ',\n      username: ' ',\n      forgotPassword: '  ?',\n      rememberMe: '  ',\n      loginButton: '  ',\n      registerButton: ' ',\n      noAccount: '  ?',\n      hasAccount: '   ?',\n      resetPassword: '  ',\n      sendResetLink: '  ',\n      backToLogin: '   ',\n      passwordMismatch: '   ',\n      invalidEmail: '     ',\n      weakPassword: '    8    ',\n    },\n    cookies: {\n      title: ' ',\n      message: '      ,                 ',\n      acceptAll: '  ',\n      acceptNecessary: ' ',\n      customize: ' ',\n      privacyPolicy: ' ',\n    },\n    legal: {\n      privacyPolicy: ' ',\n      termsOfService: '  ',\n      contactSupport: '   ',\n      aboutUs: '  ',\n      developers: '',\n    },\n    video: {\n      views: '',\n      likes: '',\n      dislikes: '',\n      duration: '',\n      addToWatchLater: '    ',\n      removeFromWatchLater: '    ',\n      addToFavorites: '  ',\n      removeFromFavorites: '  ',\n      share: ' ',\n      report: ' ',\n      relatedVideos: ' ',\n      comments: '',\n      tags: '',\n      category: '',\n      actors: '',\n    },\n    errors: {\n      pageNotFound: '  ',\n      somethingWentWrong: '   ',\n      noConnection: '   ',\n      tryAgain: '  ',\n      goHome: ' ',\n      offline: '  ',\n      offlineMessage: '        ',\n    },\n    settings: {\n      title: '',\n      appearance: '',\n      darkMode: ' ',\n      autoplay: ' ',\n      quality: ' ',\n      notifications: '',\n      pushNotifications: ' ',\n      emailNotifications: ' ',\n      privacy: '',\n      clearHistory: '    ',\n      deleteAccount: ' ',\n      languageSettings: ' ',\n    },\n    guest: {\n      limitTitle: '   ',\n      limitMessage: '           ',\n      videosRemaining: ' ',\n      loginForMore: '       ',\n    },\n    onboarding: {\n      welcome: '    ',\n      welcomeMessage: '       ',\n      step1Title: ' ',\n      step1Message: '      ',\n      step2Title: ' ',\n      step2Message: '         ',\n      step3Title: ' ',\n      step3Message: '       ',\n      getStarted: ' ',\n      skip: '',\n    },\n  },\n  od: {\n    common: {\n      home: '',\n      search: '',\n      categories: '',\n      trending: '',\n      recent: '',\n      favorites: '',\n      history: '',\n      watchLater: ' ',\n      notifications: '',\n      settings: '',\n      login: '',\n      register: '',\n      logout: '',\n      profile: '',\n      language: '',\n      all: '',\n      videos: '',\n      loading: ' ...',\n      error: '',\n      retry: '  ',\n      cancel: '',\n      save: '',\n      delete: '',\n      confirm: '',\n      next: '',\n      previous: '',\n      page: '',\n      of: '',\n      noResults: '   ',\n      searchPlaceholder: ' ...',\n    },\n    ageVerification: {\n      title: '  ',\n      warning: '    ',\n      warningDetails: '      18      \" 18+\"               ',\n      confirmButton: ' 18+',\n      exitButton: ' ',\n      disclaimer: '        ,         ',\n    },\n    auth: {\n      loginTitle: ' ',\n      registerTitle: '  ',\n      email: '',\n      password: '',\n      confirmPassword: '  ',\n      username: '',\n      forgotPassword: ' ?',\n      rememberMe: '  ',\n      loginButton: ' ',\n      registerButton: '  ',\n      noAccount: ' ?',\n      hasAccount: '  ?',\n      resetPassword: '  ',\n      sendResetLink: '  ',\n      backToLogin: ' ',\n      passwordMismatch: '   ',\n      invalidEmail: '   ',\n      weakPassword: '   8   ',\n    },\n    cookies: {\n      title: ' ',\n      message: '    ,            ',\n      acceptAll: '  ',\n      acceptNecessary: ' ',\n      customize: '',\n      privacyPolicy: ' ',\n    },\n    legal: {\n      privacyPolicy: ' ',\n      termsOfService: ' ',\n      contactSupport: '  ',\n      aboutUs: ' ',\n      developers: '',\n    },\n    video: {\n      views: '',\n      likes: '',\n      dislikes: '',\n      duration: '',\n      addToWatchLater: '  ',\n      removeFromWatchLater: '  ',\n      addToFavorites: ' ',\n      removeFromFavorites: ' ',\n      share: '',\n      report: '',\n      relatedVideos: ' ',\n      comments: '',\n      tags: '',\n      category: '',\n      actors: '',\n    },\n    errors: {\n      pageNotFound: '  ',\n      somethingWentWrong: '  ',\n      noConnection: '  ',\n      tryAgain: '  ',\n      goHome: ' ',\n      offline: '  ',\n      offlineMessage: '         ',\n    },\n    settings: {\n      title: '',\n      appearance: '',\n      darkMode: ' ',\n      autoplay: ' ',\n      quality: ' ',\n      notifications: '',\n      pushNotifications: ' ',\n      emailNotifications: ' ',\n      privacy: '',\n      clearHistory: '   ',\n      deleteAccount: '  ',\n      languageSettings: ' ',\n    },\n    guest: {\n      limitTitle: '  ',\n      limitMessage: '       ',\n      videosRemaining: ' ',\n      loginForMore: '      ',\n    },\n    onboarding: {\n      welcome: ' ',\n      welcomeMessage: '     ',\n      step1Title: ' ',\n      step1Message: '     ',\n      step2Title: '  ',\n      step2Message: '         ',\n      step3Title: ' ',\n      step3Message: '    ',\n      getStarted: ' ',\n      skip: '',\n    },\n  },\n  ta: {\n    common: {\n      home: '',\n      search: '',\n      categories: '',\n      trending: '',\n      recent: '',\n      favorites: '',\n      history: '',\n      watchLater: ' ',\n      notifications: '',\n      settings: '',\n      login: '',\n      register: '',\n      logout: '',\n      profile: '',\n      language: '',\n      all: '',\n      videos: '',\n      loading: '...',\n      error: '',\n      retry: ' ',\n      cancel: '',\n      save: '',\n      delete: '',\n      confirm: '',\n      next: '',\n      previous: '',\n      page: '',\n      of: '',\n      noResults: ' ',\n      searchPlaceholder: ' ...',\n    },\n    ageVerification: {\n      title: '  ',\n      warning: '    ',\n      warningDetails: '    18      . \" 18+\"   ,          .',\n      confirmButton: ' 18+',\n      exitButton: '',\n      disclaimer: '     .  ,       .',\n    },\n    auth: {\n      loginTitle: ' ',\n      registerTitle: ' ',\n      email: '',\n      password: '',\n      confirmPassword: ' ',\n      username: '',\n      forgotPassword: ' ?',\n      rememberMe: '  ',\n      loginButton: '',\n      registerButton: ' ',\n      noAccount: ' ?',\n      hasAccount: '  ?',\n      resetPassword: ' ',\n      sendResetLink: '  ',\n      backToLogin: ' ',\n      passwordMismatch: ' ',\n      invalidEmail: '  ',\n      weakPassword: '  8   ',\n    },\n    cookies: {\n      title: ' ',\n      message: '   ,   ,      .',\n      acceptAll: ' ',\n      acceptNecessary: ' ',\n      customize: '',\n      privacyPolicy: ' ',\n    },\n    legal: {\n      privacyPolicy: ' ',\n      termsOfService: ' ',\n      contactSupport: ' ',\n      aboutUs: ' ',\n      developers: '',\n    },\n    video: {\n      views: '',\n      likes: '',\n      dislikes: '',\n      duration: '',\n      addToWatchLater: '  ',\n      removeFromWatchLater: '  ',\n      addToFavorites: ' ',\n      removeFromFavorites: ' ',\n      share: '',\n      report: '',\n      relatedVideos: ' ',\n      comments: '',\n      tags: '',\n      category: '',\n      actors: '',\n    },\n    errors: {\n      pageNotFound: ' ',\n      somethingWentWrong: ' ',\n      noConnection: '  ',\n      tryAgain: ' ',\n      goHome: ' ',\n      offline: '  ',\n      offlineMessage: '     .',\n    },\n    settings: {\n      title: '',\n      appearance: '',\n      darkMode: ' ',\n      autoplay: ' ',\n      quality: ' ',\n      notifications: '',\n      pushNotifications: ' ',\n      emailNotifications: ' ',\n      privacy: '',\n      clearHistory: '  ',\n      deleteAccount: ' ',\n      languageSettings: ' ',\n    },\n    guest: {\n      limitTitle: '  ',\n      limitMessage: '     .',\n      videosRemaining: ' ',\n      loginForMore: '     ',\n    },\n    onboarding: {\n      welcome: ' ',\n      welcomeMessage: '    ',\n      step1Title: ' ',\n      step1Message: '    ',\n      step2Title: ' ',\n      step2Message: '      ',\n      step3Title: ' ',\n      step3Message: '    ',\n      getStarted: '',\n      skip: '',\n    },\n  },\n  te: {\n    common: {\n      home: '',\n      search: '',\n      categories: '',\n      trending: '',\n      recent: '',\n      favorites: '',\n      history: '',\n      watchLater: ' ',\n      notifications: '',\n      settings: '',\n      login: '',\n      register: '',\n      logout: '',\n      profile: '',\n      language: '',\n      all: '',\n      videos: '',\n      loading: ' ...',\n      error: '',\n      retry: ' ',\n      cancel: '',\n      save: '',\n      delete: '',\n      confirm: '',\n      next: '',\n      previous: '',\n      page: '',\n      of: '',\n      noResults: ' ',\n      searchPlaceholder: ' ...',\n    },\n    ageVerification: {\n      title: '  ',\n      warning: '    ',\n      warningDetails: '      18     . \" 18+\"              .',\n      confirmButton: ' 18+',\n      exitButton: '',\n      disclaimer: '     .  ,        .',\n    },\n    auth: {\n      loginTitle: ' ',\n      registerTitle: ' ',\n      email: '',\n      password: '',\n      confirmPassword: ' ',\n      username: '',\n      forgotPassword: ' ?',\n      rememberMe: ' ',\n      loginButton: ' ',\n      registerButton: ' ',\n      noAccount: ' ?',\n      hasAccount: '  ?',\n      resetPassword: '  ',\n      sendResetLink: '  ',\n      backToLogin: '  ',\n      passwordMismatch: '  ',\n      invalidEmail: '     ',\n      weakPassword: '  8  ',\n    },\n    cookies: {\n      title: ' ',\n      message: '   ,          .',\n      acceptAll: ' ',\n      acceptNecessary: ' ',\n      customize: '',\n      privacyPolicy: ' ',\n    },\n    legal: {\n      privacyPolicy: ' ',\n      termsOfService: ' ',\n      contactSupport: ' ',\n      aboutUs: ' ',\n      developers: '',\n    },\n    video: {\n      views: '',\n      likes: '',\n      dislikes: '',\n      duration: '',\n      addToWatchLater: '  ',\n      removeFromWatchLater: '   ',\n      addToFavorites: ' ',\n      removeFromFavorites: '  ',\n      share: '',\n      report: '',\n      relatedVideos: ' ',\n      comments: '',\n      tags: '',\n      category: '',\n      actors: '',\n    },\n    errors: {\n      pageNotFound: ' ',\n      somethingWentWrong: '  ',\n      noConnection: '  ',\n      tryAgain: ' ',\n      goHome: ' ',\n      offline: '  ',\n      offlineMessage: '       .',\n    },\n    settings: {\n      title: '',\n      appearance: '',\n      darkMode: ' ',\n      autoplay: ' ',\n      quality: ' ',\n      notifications: '',\n      pushNotifications: ' ',\n      emailNotifications: ' ',\n      privacy: '',\n      clearHistory: '   ',\n      deleteAccount: ' ',\n      languageSettings: ' ',\n    },\n    guest: {\n      limitTitle: '  ',\n      limitMessage: '      .',\n      videosRemaining: ' ',\n      loginForMore: '      ',\n    },\n    onboarding: {\n      welcome: ' ',\n      welcomeMessage: '     ',\n      step1Title: ' ',\n      step1Message: '     ',\n      step2Title: ' ',\n      step2Message: '        ',\n      step3Title: ' ',\n      step3Message: '    ',\n      getStarted: '',\n      skip: '',\n    },\n  },\n};\n","path":null,"size_bytes":43267,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":547,"size_tokens":null},"client/src/context/AgeVerificationContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, type ReactNode } from 'react';\nimport { useLocation } from 'wouter';\n\ninterface AgeVerificationContextType {\n  isVerified: boolean;\n  verifyAge: () => void;\n  exitSite: () => void;\n  hasSeenWelcome: boolean;\n  setHasSeenWelcome: (seen: boolean) => void;\n  isFirstVisit: boolean;\n}\n\nconst AgeVerificationContext = createContext<AgeVerificationContextType | undefined>(undefined);\n\nconst AGE_STORAGE_KEY = 'blueberry_age_verified';\nconst WELCOME_STORAGE_KEY = 'blueberry_welcome_seen';\nconst FIRST_VISIT_KEY = 'blueberry_first_visit';\n\nexport function AgeVerificationProvider({ children }: { children: ReactNode }) {\n  const [, navigate] = useLocation();\n  \n  const [isVerified, setIsVerified] = useState<boolean>(() => {\n    if (typeof window !== 'undefined') {\n      return localStorage.getItem(AGE_STORAGE_KEY) === 'true';\n    }\n    return false;\n  });\n\n  const [hasSeenWelcome, setHasSeenWelcomeState] = useState<boolean>(() => {\n    if (typeof window !== 'undefined') {\n      return localStorage.getItem(WELCOME_STORAGE_KEY) === 'true';\n    }\n    return false;\n  });\n\n  const [isFirstVisit, setIsFirstVisit] = useState<boolean>(() => {\n    if (typeof window !== 'undefined') {\n      const hasVisited = localStorage.getItem(FIRST_VISIT_KEY);\n      if (!hasVisited) {\n        localStorage.setItem(FIRST_VISIT_KEY, 'true');\n        return true;\n      }\n      return false;\n    }\n    return true;\n  });\n\n  const verifyAge = () => {\n    setIsVerified(true);\n    localStorage.setItem(AGE_STORAGE_KEY, 'true');\n    \n    if (!hasSeenWelcome) {\n      setTimeout(() => {\n        navigate('/welcome');\n      }, 100);\n    }\n  };\n\n  const exitSite = () => {\n    window.location.href = 'https://www.google.com';\n  };\n\n  const setHasSeenWelcome = (seen: boolean) => {\n    setHasSeenWelcomeState(seen);\n    localStorage.setItem(WELCOME_STORAGE_KEY, seen ? 'true' : 'false');\n    setIsFirstVisit(false);\n  };\n\n  return (\n    <AgeVerificationContext.Provider value={{ \n      isVerified, \n      verifyAge, \n      exitSite, \n      hasSeenWelcome, \n      setHasSeenWelcome,\n      isFirstVisit \n    }}>\n      {children}\n    </AgeVerificationContext.Provider>\n  );\n}\n\nexport function useAgeVerification() {\n  const context = useContext(AgeVerificationContext);\n  if (!context) {\n    throw new Error('useAgeVerification must be used within an AgeVerificationProvider');\n  }\n  return context;\n}\n","path":null,"size_bytes":2430,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/pages/Register.tsx":{"content":"import { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { Link, useLocation } from 'wouter';\nimport { useAuth } from '@/context/AuthContext';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { useToast } from '@/hooks/use-toast';\nimport { Eye, EyeOff, UserPlus, Loader2 } from 'lucide-react';\n\nconst registerSchema = z.object({\n  username: z.string().min(3, 'Username must be at least 3 characters'),\n  email: z.string().email('Please enter a valid email'),\n  password: z.string().min(8, 'Password must be at least 8 characters'),\n  confirmPassword: z.string(),\n  acceptTerms: z.boolean().refine(val => val === true, 'You must accept the terms'),\n}).refine(data => data.password === data.confirmPassword, {\n  message: 'Passwords do not match',\n  path: ['confirmPassword'],\n});\n\ntype RegisterFormData = z.infer<typeof registerSchema>;\n\nexport default function Register() {\n  const { register: registerUser } = useAuth();\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [, navigate] = useLocation();\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const form = useForm<RegisterFormData>({\n    resolver: zodResolver(registerSchema),\n    defaultValues: {\n      username: '',\n      email: '',\n      password: '',\n      confirmPassword: '',\n      acceptTerms: false,\n    },\n  });\n\n  const onSubmit = async (data: RegisterFormData) => {\n    setIsLoading(true);\n    const result = await registerUser(data.username, data.email, data.password);\n    setIsLoading(false);\n\n    if (result.success) {\n      toast({\n        title: 'Account created!',\n        description: 'Welcome to Blueberry. You can now access all content.',\n      });\n      navigate('/');\n    } else {\n      toast({\n        title: 'Registration failed',\n        description: result.error || 'Could not create account',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-b from-background to-muted p-4\">\n      <Card className=\"w-full max-w-md\" data-testid=\"card-register\">\n        <CardHeader className=\"text-center space-y-2\">\n          <div className=\"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-2\">\n            <UserPlus className=\"w-6 h-6 text-primary\" />\n          </div>\n          <CardTitle className=\"text-2xl\" data-testid=\"text-register-title\">\n            {t.auth.registerTitle}\n          </CardTitle>\n          <CardDescription>\n            Create an account for unlimited access\n          </CardDescription>\n        </CardHeader>\n\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"username\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{t.auth.username}</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Choose a username\"\n                        data-testid=\"input-username\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{t.auth.email}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"email\"\n                        placeholder=\"name@example.com\"\n                        data-testid=\"input-register-email\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"password\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{t.auth.password}</FormLabel>\n                    <FormControl>\n                      <div className=\"relative\">\n                        <Input\n                          type={showPassword ? 'text' : 'password'}\n                          placeholder=\"Create a strong password\"\n                          data-testid=\"input-register-password\"\n                          {...field}\n                        />\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"absolute right-0 top-0 h-full\"\n                          onClick={() => setShowPassword(!showPassword)}\n                        >\n                          {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                        </Button>\n                      </div>\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"confirmPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{t.auth.confirmPassword}</FormLabel>\n                    <FormControl>\n                      <div className=\"relative\">\n                        <Input\n                          type={showConfirmPassword ? 'text' : 'password'}\n                          placeholder=\"Confirm your password\"\n                          data-testid=\"input-confirm-password\"\n                          {...field}\n                        />\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"absolute right-0 top-0 h-full\"\n                          onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                        >\n                          {showConfirmPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                        </Button>\n                      </div>\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"acceptTerms\"\n                render={({ field }) => (\n                  <FormItem>\n                    <div className=\"flex items-start space-x-2\">\n                      <Checkbox\n                        id=\"acceptTerms\"\n                        checked={field.value}\n                        onCheckedChange={field.onChange}\n                        data-testid=\"checkbox-accept-terms\"\n                      />\n                      <label htmlFor=\"acceptTerms\" className=\"text-sm text-muted-foreground cursor-pointer leading-tight\">\n                        I agree to the{' '}\n                        <Link href=\"/terms\" className=\"text-primary hover:underline\">Terms of Service</Link>\n                        {' '}and{' '}\n                        <Link href=\"/privacy\" className=\"text-primary hover:underline\">Privacy Policy</Link>\n                      </label>\n                    </div>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={isLoading}\n                data-testid=\"button-register-submit\"\n              >\n                {isLoading ? (\n                  <Loader2 className=\"w-4 h-4 animate-spin mr-2\" />\n                ) : (\n                  <UserPlus className=\"w-4 h-4 mr-2\" />\n                )}\n                {t.auth.registerButton}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n\n        <CardFooter className=\"flex flex-col gap-4\">\n          <div className=\"text-sm text-center text-muted-foreground\">\n            {t.auth.hasAccount}{' '}\n            <Link href=\"/login\" className=\"text-primary hover:underline\" data-testid=\"link-login\">\n              {t.common.login}\n            </Link>\n          </div>\n        </CardFooter>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":9002,"size_tokens":null},"client/src/components/GuestLimitBanner.tsx":{"content":"import { useGuestLimit } from '@/context/GuestLimitContext';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { Film } from 'lucide-react';\n\nexport function GuestLimitBanner() {\n  const { videosWatched, totalVideosAvailable } = useGuestLimit();\n  const { t } = useLanguage();\n\n  if (videosWatched === 0) return null;\n\n  return (\n    <div \n      className=\"fixed bottom-20 left-4 z-40 md:left-4 md:max-w-xs pointer-events-none\"\n      data-testid=\"banner-videos-watched\"\n    >\n      <div className=\"glass-dark rounded-full px-4 py-2 flex items-center gap-2 text-sm\">\n        <Film className=\"w-4 h-4 text-primary\" />\n        <span className=\"text-muted-foreground\">\n          {videosWatched.toLocaleString()} / {totalVideosAvailable.toLocaleString()} {t.video.views || 'videos'}\n        </span>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":839,"size_tokens":null},"client/src/pages/VideoPlayer.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useParams, useLocation } from \"wouter\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport { Header } from \"@/components/Header\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { VideoGrid } from \"@/components/VideoGrid\";\nimport { Footer } from \"@/components/Footer\";\nimport { VideoPlayer as CustomVideoPlayer } from \"@/components/VideoPlayer\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { useGuestLimit } from \"@/context/GuestLimitContext\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { watchHistoryService, favoritesService, watchLaterService } from \"@/lib/firebase\";\nimport { \n  Eye, Clock, Tag, Share2, ThumbsUp, ThumbsDown, \n  Bookmark, Users, Heart, ChevronLeft, ChevronRight,\n  Download, Flag, MoreVertical, List\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport type { Video, Category, PaginatedVideos } from \"@shared/schema\";\n\nexport default function VideoPlayer() {\n  const { id } = useParams<{ id: string }>();\n  const [, navigate] = useLocation();\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const { recordVideoWatch, hasReachedLimit, isGuest } = useGuestLimit();\n  const { user, isAuthenticated } = useAuth();\n  \n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [isInWatchLater, setIsInWatchLater] = useState(false);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [likeStatus, setLikeStatus] = useState<'none' | 'liked' | 'disliked'>('none');\n  const [showScreenshots, setShowScreenshots] = useState(false);\n  const [currentScreenshot, setCurrentScreenshot] = useState(0);\n\n  const { data: video, isLoading: isLoadingVideo } = useQuery<Video>({\n    queryKey: ['/api/videos', id],\n    queryFn: async () => {\n      const response = await fetch(`/api/videos/${id}`);\n      if (!response.ok) throw new Error('Video not found');\n      return response.json();\n    },\n  });\n\n  const { data: videosData } = useQuery<PaginatedVideos>({\n    queryKey: [\"/api/videos?page=1\"],\n  });\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  useEffect(() => {\n    if (video && id) {\n      recordVideoWatch(id);\n\n      if (isAuthenticated && user) {\n        watchHistoryService.add(user.id, {\n          videoId: id,\n          title: video.title,\n          thumbnail: video.thumbnailUrl,\n          duration: video.duration,\n          watchedAt: new Date().toISOString(),\n          progress: 0,\n          lastPosition: 0,\n        });\n        \n        favoritesService.check(user.id, id).then(setIsFavorite);\n        watchLaterService.check(user.id, id).then(setIsInWatchLater);\n      } else {\n        const stored = localStorage.getItem('blueberry_watch_later');\n        if (stored) {\n          try {\n            const watchLater = JSON.parse(stored);\n            setIsInWatchLater(watchLater.some((item: any) => item.videoId === id));\n          } catch {}\n        }\n\n        const favStored = localStorage.getItem('blueberry_favorites');\n        if (favStored) {\n          try {\n            const favorites = JSON.parse(favStored);\n            setIsFavorite(favorites.some((item: any) => item.videoId === id));\n          } catch {}\n        }\n\n        const history = JSON.parse(localStorage.getItem('blueberry_watch_history') || '[]');\n        const newEntry = {\n          videoId: id,\n          title: video.title,\n          thumbnail: video.thumbnailUrl,\n          duration: video.duration,\n          watchedAt: new Date().toISOString(),\n          progress: 0,\n        };\n        const filteredHistory = history.filter((item: any) => item.videoId !== id);\n        filteredHistory.unshift(newEntry);\n        localStorage.setItem('blueberry_watch_history', JSON.stringify(filteredHistory.slice(0, 100)));\n      }\n    }\n  }, [video, id, isAuthenticated, user]);\n\n  const relatedVideos = (videosData?.videos || [])\n    .filter(v => v.id !== id)\n    .filter(v => {\n      if (!video) return false;\n      return v.categories.some(c => video.categories.includes(c)) ||\n             v.tags.some(tag => video.tags.includes(tag));\n    })\n    .slice(0, 12);\n\n  const handleShare = async () => {\n    if (navigator.share && video) {\n      try {\n        await navigator.share({\n          title: video.title,\n          url: window.location.href,\n        });\n      } catch {}\n    } else {\n      navigator.clipboard.writeText(window.location.href);\n      toast({\n        title: 'Link copied',\n        description: 'Video link copied to clipboard',\n      });\n    }\n  };\n\n  const toggleWatchLater = async () => {\n    if (!video || !id) return;\n\n    if (isAuthenticated && user) {\n      if (isInWatchLater) {\n        await watchLaterService.remove(user.id, id);\n        setIsInWatchLater(false);\n        toast({\n          title: t.video.removeFromWatchLater,\n          description: 'Video removed from Watch Later',\n        });\n      } else {\n        await watchLaterService.add(user.id, {\n          videoId: id,\n          title: video.title,\n          thumbnail: video.thumbnailUrl,\n          duration: video.duration,\n          addedAt: new Date().toISOString(),\n        });\n        setIsInWatchLater(true);\n        toast({\n          title: t.video.addToWatchLater,\n          description: 'Video added to Watch Later',\n        });\n      }\n    } else {\n      const stored = localStorage.getItem('blueberry_watch_later');\n      let watchLater = [];\n      try {\n        watchLater = stored ? JSON.parse(stored) : [];\n      } catch {}\n\n      if (isInWatchLater) {\n        watchLater = watchLater.filter((item: any) => item.videoId !== id);\n        setIsInWatchLater(false);\n        toast({\n          title: t.video.removeFromWatchLater,\n          description: 'Video removed from Watch Later',\n        });\n      } else {\n        watchLater.unshift({\n          videoId: id,\n          title: video.title,\n          thumbnail: video.thumbnailUrl,\n          duration: video.duration,\n          addedAt: new Date().toISOString(),\n        });\n        setIsInWatchLater(true);\n        toast({\n          title: t.video.addToWatchLater,\n          description: 'Video added to Watch Later',\n        });\n      }\n\n      localStorage.setItem('blueberry_watch_later', JSON.stringify(watchLater));\n    }\n  };\n\n  const toggleFavorite = async () => {\n    if (!video || !id) return;\n\n    if (isAuthenticated && user) {\n      if (isFavorite) {\n        await favoritesService.remove(user.id, id);\n        setIsFavorite(false);\n        toast({\n          title: 'Removed from favorites',\n          description: 'Video removed from your favorites',\n        });\n      } else {\n        await favoritesService.add(user.id, {\n          videoId: id,\n          title: video.title,\n          thumbnail: video.thumbnailUrl,\n          duration: video.duration,\n          addedAt: new Date().toISOString(),\n        });\n        setIsFavorite(true);\n        toast({\n          title: 'Added to favorites',\n          description: 'Video added to your favorites',\n        });\n      }\n    } else {\n      const stored = localStorage.getItem('blueberry_favorites');\n      let favorites = [];\n      try {\n        favorites = stored ? JSON.parse(stored) : [];\n      } catch {}\n\n      if (isFavorite) {\n        favorites = favorites.filter((item: any) => item.videoId !== id);\n        setIsFavorite(false);\n        toast({\n          title: 'Removed from favorites',\n          description: 'Video removed from your favorites',\n        });\n      } else {\n        favorites.unshift({\n          videoId: id,\n          title: video.title,\n          thumbnail: video.thumbnailUrl,\n          duration: video.duration,\n          addedAt: new Date().toISOString(),\n        });\n        setIsFavorite(true);\n        toast({\n          title: 'Added to favorites',\n          description: 'Video added to your favorites',\n        });\n      }\n\n      localStorage.setItem('blueberry_favorites', JSON.stringify(favorites));\n    }\n  };\n\n  const handleLike = () => {\n    setLikeStatus(likeStatus === 'liked' ? 'none' : 'liked');\n    toast({\n      title: likeStatus === 'liked' ? 'Like removed' : 'Liked',\n      description: likeStatus === 'liked' ? 'You removed your like' : 'You liked this video',\n    });\n  };\n\n  const handleDislike = () => {\n    setLikeStatus(likeStatus === 'disliked' ? 'none' : 'disliked');\n    toast({\n      title: likeStatus === 'disliked' ? 'Dislike removed' : 'Disliked',\n      description: likeStatus === 'disliked' ? 'You removed your dislike' : 'You disliked this video',\n    });\n  };\n\n  const handleVideoProgress = useCallback((progress: number, currentTime: number) => {\n    if (isAuthenticated && user && id) {\n      watchHistoryService.updateProgress(user.id, id, progress, currentTime);\n    }\n  }, [isAuthenticated, user, id]);\n\n  const handleVideoEnded = useCallback(() => {\n    if (relatedVideos.length > 0) {\n      const nextVideo = relatedVideos[0];\n      toast({\n        title: 'Up next',\n        description: `Playing: ${nextVideo.title}`,\n      });\n      setTimeout(() => {\n        navigate(`/video/${nextVideo.id}`);\n      }, 3000);\n    }\n  }, [relatedVideos, navigate, toast]);\n\n  const nextScreenshot = () => {\n    if (video?.screenshots) {\n      setCurrentScreenshot((prev) => (prev + 1) % video.screenshots!.length);\n    }\n  };\n\n  const prevScreenshot = () => {\n    if (video?.screenshots) {\n      setCurrentScreenshot((prev) => \n        prev === 0 ? video.screenshots!.length - 1 : prev - 1\n      );\n    }\n  };\n\n  if (hasReachedLimit && isGuest) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-background\">\n        <Header\n          onMenuClick={() => setIsDrawerOpen(true)}\n          searchQuery={searchQuery}\n          onSearchChange={setSearchQuery}\n        />\n        <main className=\"flex-1 pt-16 flex items-center justify-center\">\n          <div className=\"text-center px-4 max-w-md\">\n            <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-destructive/10 flex items-center justify-center\">\n              <Users className=\"w-10 h-10 text-destructive\" />\n            </div>\n            <h2 className=\"text-xl font-semibold mb-2\">{t.guest.limitTitle}</h2>\n            <p className=\"text-muted-foreground mb-6\">{t.guest.limitMessage}</p>\n            <div className=\"flex gap-4 justify-center\">\n              <Button asChild>\n                <a href=\"/login\">{t.common.login}</a>\n              </Button>\n              <Button variant=\"outline\" asChild>\n                <a href=\"/register\">{t.common.register}</a>\n              </Button>\n            </div>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  if (isLoadingVideo) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-background\">\n        <Header\n          onMenuClick={() => setIsDrawerOpen(true)}\n          searchQuery={searchQuery}\n          onSearchChange={setSearchQuery}\n        />\n        <main className=\"flex-1 pt-16\">\n          <div className=\"max-w-[1920px] mx-auto px-4 md:px-8 py-6\">\n            <Skeleton className=\"w-full aspect-video rounded-xl md:rounded-2xl\" />\n            <div className=\"mt-6 space-y-4\">\n              <Skeleton className=\"h-8 w-3/4\" />\n              <Skeleton className=\"h-4 w-1/2\" />\n              <div className=\"flex gap-2\">\n                <Skeleton className=\"h-6 w-20\" />\n                <Skeleton className=\"h-6 w-20\" />\n                <Skeleton className=\"h-6 w-20\" />\n              </div>\n            </div>\n          </div>\n        </main>\n      </div>\n    );\n  }\n\n  if (!video) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-background\">\n        <Header\n          onMenuClick={() => setIsDrawerOpen(true)}\n          searchQuery={searchQuery}\n          onSearchChange={setSearchQuery}\n        />\n        <main className=\"flex-1 pt-16 flex items-center justify-center\">\n          <div className=\"text-center px-4\">\n            <div className=\"w-20 h-20 mx-auto mb-4 rounded-full glass flex items-center justify-center\">\n              <svg\n                className=\"w-10 h-10 text-muted-foreground\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={1.5}\n                  d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                />\n              </svg>\n            </div>\n            <h2 className=\"text-xl font-semibold mb-2\">{t.errors.pageNotFound}</h2>\n            <p className=\"text-muted-foreground\">\n              The video you're looking for doesn't exist or has been removed.\n            </p>\n            <Button asChild className=\"mt-4\">\n              <a href=\"/\">{t.errors.goHome}</a>\n            </Button>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-16\">\n        <div className=\"max-w-[1920px] mx-auto\">\n          <div className=\"px-0 md:px-8 py-0 md:py-6\">\n            <div className=\"md:rounded-2xl overflow-hidden\" data-testid=\"video-player-container\">\n              <CustomVideoPlayer\n                embedCode={video.embedCode}\n                embedUrl={video.embedUrl}\n                title={video.title}\n                thumbnail={video.thumbnailUrl}\n                onProgress={handleVideoProgress}\n                onEnded={handleVideoEnded}\n                autoplay={false}\n              />\n            </div>\n          </div>\n\n          <div className=\"px-4 md:px-8 py-6\">\n            <div className=\"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4\">\n              <div className=\"flex-1\">\n                <h1\n                  className=\"text-xl md:text-2xl lg:text-3xl font-bold leading-tight\"\n                  data-testid=\"video-player-title\"\n                >\n                  {video.title}\n                </h1>\n\n                <div className=\"flex flex-wrap items-center gap-4 mt-4 text-sm text-muted-foreground\">\n                  <div className=\"flex items-center gap-1.5\">\n                    <Eye className=\"w-4 h-4\" />\n                    <span data-testid=\"video-player-views\">{video.views} {t.video.views}</span>\n                  </div>\n                  <span className=\"w-1 h-1 rounded-full bg-muted-foreground/50\" />\n                  <div className=\"flex items-center gap-1.5\">\n                    <Clock className=\"w-4 h-4\" />\n                    <span data-testid=\"video-player-duration\">{video.duration}</span>\n                  </div>\n                </div>\n\n                {video.actors && video.actors.length > 0 && (\n                  <div className=\"flex flex-wrap items-center gap-2 mt-4\">\n                    <Users className=\"w-4 h-4 text-muted-foreground\" />\n                    <span className=\"text-sm text-muted-foreground\">{t.video.actors}:</span>\n                    {video.actors.map((actor) => (\n                      <Badge\n                        key={actor}\n                        variant=\"secondary\"\n                        className=\"text-xs cursor-pointer\"\n                        onClick={() => navigate(`/performers?q=${encodeURIComponent(actor)}`)}\n                        data-testid={`video-actor-${actor.toLowerCase().replace(/\\s+/g, \"-\")}`}\n                      >\n                        {actor}\n                      </Badge>\n                    ))}\n                  </div>\n                )}\n\n                <div className=\"flex flex-wrap items-center gap-2 mt-4\">\n                  <Tag className=\"w-4 h-4 text-muted-foreground\" />\n                  {video.tags.slice(0, 10).map((tag) => (\n                    <Badge\n                      key={tag}\n                      variant=\"outline\"\n                      className=\"text-xs cursor-pointer\"\n                      onClick={() => navigate(`/tags?q=${encodeURIComponent(tag)}`)}\n                      data-testid={`video-tag-${tag.toLowerCase().replace(/\\s+/g, \"-\")}`}\n                    >\n                      {tag}\n                    </Badge>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-2 flex-shrink-0 flex-wrap\">\n                <div className=\"flex items-center bg-muted/50 rounded-full overflow-hidden\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className={`rounded-r-none gap-1.5 ${likeStatus === 'liked' ? 'bg-primary/20 text-primary' : ''}`}\n                    onClick={handleLike}\n                    data-testid=\"button-like\"\n                  >\n                    <ThumbsUp className={`w-4 h-4 ${likeStatus === 'liked' ? 'fill-current' : ''}`} />\n                    <span>{video.likes + (likeStatus === 'liked' ? 1 : 0)}</span>\n                  </Button>\n                  <div className=\"w-px h-6 bg-border\" />\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className={`rounded-l-none gap-1.5 ${likeStatus === 'disliked' ? 'bg-destructive/20 text-destructive' : ''}`}\n                    onClick={handleDislike}\n                    data-testid=\"button-dislike\"\n                  >\n                    <ThumbsDown className={`w-4 h-4 ${likeStatus === 'disliked' ? 'fill-current' : ''}`} />\n                    <span>{video.dislikes + (likeStatus === 'disliked' ? 1 : 0)}</span>\n                  </Button>\n                </div>\n\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className={`rounded-full gap-2 ${\n                    isFavorite \n                      ? \"bg-red-500/20 text-red-500 border-red-500/30\" \n                      : \"\"\n                  }`}\n                  onClick={toggleFavorite}\n                  data-testid=\"button-favorite\"\n                >\n                  <Heart className={`w-4 h-4 ${isFavorite ? \"fill-current\" : \"\"}`} />\n                  <span className=\"hidden sm:inline\">\n                    {isFavorite ? 'Favorited' : 'Favorite'}\n                  </span>\n                </Button>\n\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className={`rounded-full gap-2 ${\n                    isInWatchLater \n                      ? \"bg-primary/20 text-primary border-primary/30\" \n                      : \"\"\n                  }`}\n                  onClick={toggleWatchLater}\n                  data-testid=\"button-watch-later\"\n                >\n                  <Bookmark className={`w-4 h-4 ${isInWatchLater ? \"fill-current\" : \"\"}`} />\n                  <span className=\"hidden sm:inline\">\n                    {isInWatchLater ? 'Saved' : t.video.addToWatchLater}\n                  </span>\n                </Button>\n\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"rounded-full gap-2\"\n                  onClick={handleShare}\n                  data-testid=\"button-share\"\n                >\n                  <Share2 className=\"w-4 h-4\" />\n                  <span className=\"hidden sm:inline\">{t.video.share}</span>\n                </Button>\n\n                <DropdownMenu>\n                  <DropdownMenuTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      size=\"icon\"\n                      className=\"rounded-full\"\n                      data-testid=\"button-more-options\"\n                    >\n                      <MoreVertical className=\"w-4 h-4\" />\n                    </Button>\n                  </DropdownMenuTrigger>\n                  <DropdownMenuContent align=\"end\">\n                    <DropdownMenuItem onClick={() => toast({ title: 'Added to playlist' })}>\n                      <List className=\"w-4 h-4 mr-2\" />\n                      Add to Playlist\n                    </DropdownMenuItem>\n                    <DropdownMenuItem onClick={() => toast({ title: 'Download not available' })}>\n                      <Download className=\"w-4 h-4 mr-2\" />\n                      Download\n                    </DropdownMenuItem>\n                    <DropdownMenuSeparator />\n                    <DropdownMenuItem onClick={() => toast({ title: 'Reported', description: 'Thank you for your feedback' })}>\n                      <Flag className=\"w-4 h-4 mr-2\" />\n                      Report\n                    </DropdownMenuItem>\n                  </DropdownMenuContent>\n                </DropdownMenu>\n              </div>\n            </div>\n\n            <div className=\"mt-6 p-4 bg-muted/30 rounded-xl\">\n              <p className=\"text-sm text-muted-foreground mb-2\">{t.video.category}</p>\n              <div className=\"flex flex-wrap gap-2\">\n                {video.categories.map((cat) => (\n                  <Badge \n                    key={cat} \n                    className=\"bg-primary/20 text-primary hover:bg-primary/30 cursor-pointer\"\n                    onClick={() => navigate(`/category/${encodeURIComponent(cat)}`)}\n                    data-testid={`video-category-${cat}`}\n                  >\n                    {cat}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n\n            {video.screenshots && video.screenshots.length > 0 && (\n              <div className=\"mt-6\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <h3 className=\"text-sm text-muted-foreground\">Screenshots</h3>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => setShowScreenshots(!showScreenshots)}\n                    data-testid=\"button-toggle-screenshots\"\n                  >\n                    {showScreenshots ? 'Show less' : 'Show all'}\n                  </Button>\n                </div>\n                \n                {showScreenshots ? (\n                  <div className=\"relative\">\n                    <img\n                      src={video.screenshots[currentScreenshot]}\n                      alt={`Screenshot ${currentScreenshot + 1}`}\n                      className=\"w-full rounded-xl aspect-video object-cover\"\n                      data-testid=\"screenshot-large\"\n                    />\n                    <div className=\"absolute inset-y-0 left-0 flex items-center\">\n                      <Button\n                        size=\"icon\"\n                        variant=\"ghost\"\n                        className=\"bg-black/50 text-white hover:bg-black/70 ml-2\"\n                        onClick={prevScreenshot}\n                        data-testid=\"button-prev-screenshot\"\n                      >\n                        <ChevronLeft className=\"w-6 h-6\" />\n                      </Button>\n                    </div>\n                    <div className=\"absolute inset-y-0 right-0 flex items-center\">\n                      <Button\n                        size=\"icon\"\n                        variant=\"ghost\"\n                        className=\"bg-black/50 text-white hover:bg-black/70 mr-2\"\n                        onClick={nextScreenshot}\n                        data-testid=\"button-next-screenshot\"\n                      >\n                        <ChevronRight className=\"w-6 h-6\" />\n                      </Button>\n                    </div>\n                    <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 px-3 py-1 rounded-full text-white text-sm\">\n                      {currentScreenshot + 1} / {video.screenshots.length}\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"grid grid-cols-3 md:grid-cols-6 gap-2\">\n                    {video.screenshots.slice(0, 6).map((screenshot, index) => (\n                      <img\n                        key={index}\n                        src={screenshot}\n                        alt={`Screenshot ${index + 1}`}\n                        className=\"rounded-lg aspect-video object-cover hover:opacity-80 transition-opacity cursor-pointer\"\n                        onClick={() => {\n                          setCurrentScreenshot(index);\n                          setShowScreenshots(true);\n                        }}\n                        data-testid={`video-screenshot-${index}`}\n                      />\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {relatedVideos.length > 0 && (\n            <div className=\"border-t border-white/5 mt-6\">\n              <VideoGrid \n                title={t.video.relatedVideos} \n                videos={relatedVideos} \n                sectionId=\"related\" \n              />\n            </div>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":25717,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/public/sw.js":{"content":"const CACHE_NAME = 'blueberry-v1';\nconst STATIC_ASSETS = [\n  '/',\n  '/manifest.json',\n  '/favicon.png'\n];\n\n// Install event - cache static assets\nself.addEventListener('install', (event) => {\n  event.waitUntil(\n    caches.open(CACHE_NAME).then((cache) => {\n      return cache.addAll(STATIC_ASSETS);\n    })\n  );\n  self.skipWaiting();\n});\n\n// Activate event - clean up old caches\nself.addEventListener('activate', (event) => {\n  event.waitUntil(\n    caches.keys().then((cacheNames) => {\n      return Promise.all(\n        cacheNames\n          .filter((name) => name !== CACHE_NAME)\n          .map((name) => caches.delete(name))\n      );\n    })\n  );\n  self.clients.claim();\n});\n\n// Fetch event - network first, fallback to cache\nself.addEventListener('fetch', (event) => {\n  // Skip non-GET requests\n  if (event.request.method !== 'GET') {\n    return;\n  }\n\n  // Skip API requests - always go to network\n  if (event.request.url.includes('/api/')) {\n    return;\n  }\n\n  event.respondWith(\n    fetch(event.request)\n      .then((response) => {\n        // Clone the response for caching\n        const responseClone = response.clone();\n        \n        // Cache successful responses\n        if (response.status === 200) {\n          caches.open(CACHE_NAME).then((cache) => {\n            cache.put(event.request, responseClone);\n          });\n        }\n        \n        return response;\n      })\n      .catch(() => {\n        // Fallback to cache if network fails\n        return caches.match(event.request).then((cachedResponse) => {\n          if (cachedResponse) {\n            return cachedResponse;\n          }\n          \n          // For navigation requests, return the cached homepage\n          if (event.request.mode === 'navigate') {\n            return caches.match('/');\n          }\n          \n          return new Response('Offline', {\n            status: 503,\n            statusText: 'Service Unavailable'\n          });\n        });\n      })\n  );\n});\n","path":null,"size_bytes":1945,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/pages/Performers.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState } from \"react\";\nimport { Link, useLocation, useSearch } from \"wouter\";\nimport { Header } from \"@/components/Header\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { VideoGrid } from \"@/components/VideoGrid\";\nimport { Footer } from \"@/components/Footer\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { \n  Users, ArrowLeft, Search, TrendingUp, Video, Grid3X3, List\n} from \"lucide-react\";\nimport type { Category, Performer, PaginatedVideos } from \"@shared/schema\";\n\nexport default function Performers() {\n  const { t } = useLanguage();\n  const [, navigate] = useLocation();\n  const searchParams = useSearch();\n  const selectedPerformer = new URLSearchParams(searchParams).get('q');\n  \n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [filterQuery, setFilterQuery] = useState(\"\");\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const { data: performers = [], isLoading: isLoadingPerformers } = useQuery<Performer[]>({\n    queryKey: [\"/api/performers\"],\n  });\n\n  const performerQueryParam = selectedPerformer ? `?performer=${encodeURIComponent(selectedPerformer)}` : '';\n  \n  const { data: videosData, isLoading: isLoadingVideos } = useQuery<PaginatedVideos>({\n    queryKey: [`/api/videos${performerQueryParam}&page=1`],\n    enabled: !!selectedPerformer,\n  });\n\n  const filteredPerformers = performers.filter(p =>\n    p.name.toLowerCase().includes(filterQuery.toLowerCase())\n  );\n\n  const sortedPerformers = [...filteredPerformers].sort((a, b) => b.videoCount - a.videoCount);\n\n  const handlePerformerClick = (performerName: string) => {\n    navigate(`/performers?q=${encodeURIComponent(performerName)}`);\n  };\n\n  const videos = videosData?.videos || [];\n\n  const getInitials = (name: string) => {\n    const parts = name.split(' ');\n    return parts.length > 1 \n      ? `${parts[0][0]}${parts[parts.length - 1][0]}`.toUpperCase()\n      : name.slice(0, 2).toUpperCase();\n  };\n\n  const getAvatarColor = (name: string) => {\n    const colors = [\n      'bg-red-500/20 text-red-500',\n      'bg-blue-500/20 text-blue-500',\n      'bg-green-500/20 text-green-500',\n      'bg-purple-500/20 text-purple-500',\n      'bg-orange-500/20 text-orange-500',\n      'bg-pink-500/20 text-pink-500',\n      'bg-cyan-500/20 text-cyan-500',\n    ];\n    const index = name.charCodeAt(0) % colors.length;\n    return colors[index];\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-16\">\n        <div className=\"max-w-7xl mx-auto px-4 md:px-8 py-6\">\n          <div className=\"flex items-center gap-4 mb-6\">\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link href=\"/\" data-testid=\"button-back\">\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Link>\n            </Button>\n            <div className=\"flex-1\">\n              <h1 className=\"text-2xl md:text-3xl font-bold flex items-center gap-3\" data-testid=\"text-performers-title\">\n                <Users className=\"w-8 h-8 text-primary\" />\n                {selectedPerformer || 'Performers'}\n              </h1>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                {selectedPerformer \n                  ? `${videos.length} videos`\n                  : `Browse ${performers.length} performers`\n                }\n              </p>\n            </div>\n            {selectedPerformer && (\n              <Button\n                variant=\"outline\"\n                onClick={() => navigate('/performers')}\n                data-testid=\"button-all-performers\"\n              >\n                All Performers\n              </Button>\n            )}\n          </div>\n\n          {!selectedPerformer && (\n            <>\n              <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\n                <div className=\"relative flex-1\">\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                  <Input\n                    placeholder=\"Search performers...\"\n                    value={filterQuery}\n                    onChange={(e) => setFilterQuery(e.target.value)}\n                    className=\"pl-10\"\n                    data-testid=\"input-search-performers\"\n                  />\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant={viewMode === 'grid' ? 'default' : 'outline'}\n                    size=\"icon\"\n                    onClick={() => setViewMode('grid')}\n                    data-testid=\"button-view-grid\"\n                  >\n                    <Grid3X3 className=\"w-4 h-4\" />\n                  </Button>\n                  <Button\n                    variant={viewMode === 'list' ? 'default' : 'outline'}\n                    size=\"icon\"\n                    onClick={() => setViewMode('list')}\n                    data-testid=\"button-view-list\"\n                  >\n                    <List className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </div>\n\n              {isLoadingPerformers ? (\n                <div className={viewMode === 'grid'\n                  ? \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\"\n                  : \"space-y-2\"\n                }>\n                  {Array.from({ length: 20 }).map((_, i) => (\n                    <Skeleton key={i} className={viewMode === 'grid' ? \"h-40 rounded-xl\" : \"h-16 rounded-lg\"} />\n                  ))}\n                </div>\n              ) : filteredPerformers.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                    <Users className=\"w-8 h-8 text-muted-foreground\" />\n                  </div>\n                  <h3 className=\"text-lg font-medium mb-2\">No performers found</h3>\n                  <p className=\"text-muted-foreground\">\n                    Try a different search term\n                  </p>\n                </div>\n              ) : viewMode === 'grid' ? (\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\">\n                  {sortedPerformers.map((performer, index) => (\n                    <Card\n                      key={performer.id}\n                      className=\"p-4 cursor-pointer hover-elevate transition-all group\"\n                      onClick={() => handlePerformerClick(performer.name)}\n                      data-testid={`performer-card-${performer.id}`}\n                    >\n                      <div className=\"flex flex-col items-center text-center gap-3\">\n                        <Avatar className={`w-16 h-16 ${getAvatarColor(performer.name)}`}>\n                          <AvatarFallback className=\"text-lg font-semibold\">\n                            {getInitials(performer.name)}\n                          </AvatarFallback>\n                        </Avatar>\n                        <div>\n                          <h3 className=\"font-medium text-sm line-clamp-1\">{performer.name}</h3>\n                          <div className=\"flex items-center justify-center gap-1 text-xs text-muted-foreground mt-1\">\n                            <Video className=\"w-3 h-3\" />\n                            <span>{performer.videoCount} videos</span>\n                          </div>\n                        </div>\n                        {index < 3 && (\n                          <Badge variant=\"secondary\" className=\"text-xs\">\n                            <TrendingUp className=\"w-3 h-3 mr-1\" />\n                            Popular\n                          </Badge>\n                        )}\n                      </div>\n                    </Card>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  {sortedPerformers.map((performer, index) => (\n                    <Card\n                      key={performer.id}\n                      className=\"p-4 cursor-pointer hover-elevate transition-all\"\n                      onClick={() => handlePerformerClick(performer.name)}\n                      data-testid={`performer-list-${performer.id}`}\n                    >\n                      <div className=\"flex items-center gap-4\">\n                        <Avatar className={`w-12 h-12 ${getAvatarColor(performer.name)}`}>\n                          <AvatarFallback className=\"font-semibold\">\n                            {getInitials(performer.name)}\n                          </AvatarFallback>\n                        </Avatar>\n                        <div className=\"flex-1 min-w-0\">\n                          <h3 className=\"font-medium\">{performer.name}</h3>\n                          <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n                            <Video className=\"w-3 h-3\" />\n                            <span>{performer.videoCount} videos</span>\n                          </div>\n                        </div>\n                        {index < 5 && (\n                          <Badge variant=\"secondary\">\n                            <TrendingUp className=\"w-3 h-3 mr-1\" />\n                            Popular\n                          </Badge>\n                        )}\n                      </div>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </>\n          )}\n\n          {selectedPerformer && (\n            <>\n              {isLoadingVideos ? (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                  {Array.from({ length: 12 }).map((_, i) => (\n                    <Skeleton key={i} className=\"aspect-video rounded-xl\" />\n                  ))}\n                </div>\n              ) : videos.length === 0 ? (\n                <div className=\"text-center py-16\">\n                  <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                    <Users className=\"w-10 h-10 text-muted-foreground\" />\n                  </div>\n                  <h2 className=\"text-xl font-semibold mb-2\">No videos found</h2>\n                  <p className=\"text-muted-foreground mb-4\">\n                    No videos with this performer yet\n                  </p>\n                  <Button onClick={() => navigate('/performers')} variant=\"outline\">\n                    Browse All Performers\n                  </Button>\n                </div>\n              ) : (\n                <VideoGrid\n                  title=\"\"\n                  videos={videos}\n                  sectionId=\"performer-videos\"\n                />\n              )}\n            </>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":11698,"size_tokens":null},"client/src/pages/Tags.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState } from \"react\";\nimport { Link, useLocation, useSearch } from \"wouter\";\nimport { Header } from \"@/components/Header\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { VideoGrid } from \"@/components/VideoGrid\";\nimport { Footer } from \"@/components/Footer\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { \n  Tag, ArrowLeft, Search, TrendingUp, Hash\n} from \"lucide-react\";\nimport type { Category, Tag as TagType, PaginatedVideos } from \"@shared/schema\";\n\nexport default function Tags() {\n  const { t } = useLanguage();\n  const [, navigate] = useLocation();\n  const searchParams = useSearch();\n  const selectedTag = new URLSearchParams(searchParams).get('q');\n  \n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [filterQuery, setFilterQuery] = useState(\"\");\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const { data: tags = [], isLoading: isLoadingTags } = useQuery<TagType[]>({\n    queryKey: [\"/api/tags\"],\n  });\n\n  const tagQueryParam = selectedTag ? `?tag=${encodeURIComponent(selectedTag)}` : '';\n  \n  const { data: videosData, isLoading: isLoadingVideos } = useQuery<PaginatedVideos>({\n    queryKey: [`/api/videos${tagQueryParam}&page=1`],\n    enabled: !!selectedTag,\n  });\n\n  const filteredTags = tags.filter(tag =>\n    tag.name.toLowerCase().includes(filterQuery.toLowerCase())\n  );\n\n  const handleTagClick = (tagName: string) => {\n    navigate(`/tags?q=${encodeURIComponent(tagName)}`);\n  };\n\n  const videos = videosData?.videos || [];\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-16\">\n        <div className=\"max-w-7xl mx-auto px-4 md:px-8 py-6\">\n          <div className=\"flex items-center gap-4 mb-6\">\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link href=\"/\" data-testid=\"button-back\">\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Link>\n            </Button>\n            <div className=\"flex-1\">\n              <h1 className=\"text-2xl md:text-3xl font-bold flex items-center gap-3\" data-testid=\"text-tags-title\">\n                <Hash className=\"w-8 h-8 text-primary\" />\n                {selectedTag ? `#${selectedTag}` : 'Tags'}\n              </h1>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                {selectedTag \n                  ? `${videos.length} videos with this tag`\n                  : `Browse ${tags.length} popular tags`\n                }\n              </p>\n            </div>\n            {selectedTag && (\n              <Button\n                variant=\"outline\"\n                onClick={() => navigate('/tags')}\n                data-testid=\"button-all-tags\"\n              >\n                All Tags\n              </Button>\n            )}\n          </div>\n\n          {!selectedTag && (\n            <>\n              <div className=\"relative mb-6\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search tags...\"\n                  value={filterQuery}\n                  onChange={(e) => setFilterQuery(e.target.value)}\n                  className=\"pl-10\"\n                  data-testid=\"input-search-tags\"\n                />\n              </div>\n\n              {isLoadingTags ? (\n                <div className=\"flex flex-wrap gap-2\">\n                  {Array.from({ length: 50 }).map((_, i) => (\n                    <Skeleton key={i} className=\"h-8 w-24 rounded-full\" />\n                  ))}\n                </div>\n              ) : filteredTags.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                    <Tag className=\"w-8 h-8 text-muted-foreground\" />\n                  </div>\n                  <h3 className=\"text-lg font-medium mb-2\">No tags found</h3>\n                  <p className=\"text-muted-foreground\">\n                    Try a different search term\n                  </p>\n                </div>\n              ) : (\n                <div className=\"flex flex-wrap gap-2\">\n                  {filteredTags.map((tag, index) => (\n                    <Badge\n                      key={tag.id}\n                      variant=\"outline\"\n                      className=\"cursor-pointer text-sm py-2 px-4 hover-elevate\"\n                      onClick={() => handleTagClick(tag.name)}\n                      data-testid={`tag-${tag.id}`}\n                    >\n                      <Hash className=\"w-3 h-3 mr-1\" />\n                      {tag.name}\n                      <span className=\"ml-2 text-muted-foreground\">\n                        {tag.count.toLocaleString()}\n                      </span>\n                      {index < 5 && (\n                        <TrendingUp className=\"w-3 h-3 ml-2 text-primary\" />\n                      )}\n                    </Badge>\n                  ))}\n                </div>\n              )}\n            </>\n          )}\n\n          {selectedTag && (\n            <>\n              {isLoadingVideos ? (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                  {Array.from({ length: 12 }).map((_, i) => (\n                    <Skeleton key={i} className=\"aspect-video rounded-xl\" />\n                  ))}\n                </div>\n              ) : videos.length === 0 ? (\n                <div className=\"text-center py-16\">\n                  <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                    <Tag className=\"w-10 h-10 text-muted-foreground\" />\n                  </div>\n                  <h2 className=\"text-xl font-semibold mb-2\">No videos found</h2>\n                  <p className=\"text-muted-foreground mb-4\">\n                    No videos with this tag yet\n                  </p>\n                  <Button onClick={() => navigate('/tags')} variant=\"outline\">\n                    Browse All Tags\n                  </Button>\n                </div>\n              ) : (\n                <VideoGrid\n                  title=\"\"\n                  videos={videos}\n                  sectionId=\"tag-videos\"\n                />\n              )}\n            </>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":7111,"size_tokens":null},"client/src/pages/Trending.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState } from \"react\";\nimport { Link } from \"wouter\";\nimport { Header } from \"@/components/Header\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { VideoGrid } from \"@/components/VideoGrid\";\nimport { Footer } from \"@/components/Footer\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { \n  TrendingUp, ArrowLeft, Clock, Eye, ThumbsUp, \n  Flame, Calendar, Star\n} from \"lucide-react\";\nimport type { Category, PaginatedVideos } from \"@shared/schema\";\n\ntype TrendingPeriod = 'today' | 'week' | 'month' | 'all';\n\nexport default function Trending() {\n  const { t } = useLanguage();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [period, setPeriod] = useState<TrendingPeriod>('today');\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const { data: videosData, isLoading } = useQuery<PaginatedVideos>({\n    queryKey: [\"/api/videos?page=1\"],\n  });\n\n  const videos = videosData?.videos || [];\n  \n  const trendingVideos = [...videos]\n    .sort((a, b) => (b.viewsCount || 0) - (a.viewsCount || 0))\n    .slice(0, 24);\n\n  const topRatedVideos = [...videos]\n    .sort((a, b) => (b.likes || 0) - (a.likes || 0))\n    .slice(0, 24);\n\n  const newestVideos = [...videos].slice(0, 24);\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-16\">\n        <div className=\"max-w-7xl mx-auto px-4 md:px-8 py-6\">\n          <div className=\"flex items-center gap-4 mb-6\">\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link href=\"/\" data-testid=\"button-back\">\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Link>\n            </Button>\n            <div className=\"flex-1\">\n              <h1 className=\"text-2xl md:text-3xl font-bold flex items-center gap-3\" data-testid=\"text-trending-title\">\n                <TrendingUp className=\"w-8 h-8 text-primary\" />\n                Trending\n              </h1>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                Discover what's popular right now\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2 mb-6\">\n            <Badge\n              variant={period === 'today' ? 'default' : 'outline'}\n              className=\"cursor-pointer\"\n              onClick={() => setPeriod('today')}\n              data-testid=\"badge-today\"\n            >\n              <Clock className=\"w-3 h-3 mr-1\" />\n              Today\n            </Badge>\n            <Badge\n              variant={period === 'week' ? 'default' : 'outline'}\n              className=\"cursor-pointer\"\n              onClick={() => setPeriod('week')}\n              data-testid=\"badge-week\"\n            >\n              <Calendar className=\"w-3 h-3 mr-1\" />\n              This Week\n            </Badge>\n            <Badge\n              variant={period === 'month' ? 'default' : 'outline'}\n              className=\"cursor-pointer\"\n              onClick={() => setPeriod('month')}\n              data-testid=\"badge-month\"\n            >\n              <Calendar className=\"w-3 h-3 mr-1\" />\n              This Month\n            </Badge>\n            <Badge\n              variant={period === 'all' ? 'default' : 'outline'}\n              className=\"cursor-pointer\"\n              onClick={() => setPeriod('all')}\n              data-testid=\"badge-all\"\n            >\n              <Star className=\"w-3 h-3 mr-1\" />\n              All Time\n            </Badge>\n          </div>\n\n          <Tabs defaultValue=\"views\" className=\"w-full\">\n            <TabsList className=\"mb-6\">\n              <TabsTrigger value=\"views\" className=\"gap-2\" data-testid=\"tab-views\">\n                <Eye className=\"w-4 h-4\" />\n                Most Viewed\n              </TabsTrigger>\n              <TabsTrigger value=\"rated\" className=\"gap-2\" data-testid=\"tab-rated\">\n                <ThumbsUp className=\"w-4 h-4\" />\n                Top Rated\n              </TabsTrigger>\n              <TabsTrigger value=\"newest\" className=\"gap-2\" data-testid=\"tab-newest\">\n                <Flame className=\"w-4 h-4\" />\n                Newest\n              </TabsTrigger>\n            </TabsList>\n\n            {isLoading ? (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                {Array.from({ length: 12 }).map((_, i) => (\n                  <Skeleton key={i} className=\"aspect-video rounded-xl\" />\n                ))}\n              </div>\n            ) : (\n              <>\n                <TabsContent value=\"views\">\n                  <VideoGrid\n                    title=\"\"\n                    videos={trendingVideos}\n                    sectionId=\"trending-views\"\n                  />\n                </TabsContent>\n\n                <TabsContent value=\"rated\">\n                  <VideoGrid\n                    title=\"\"\n                    videos={topRatedVideos}\n                    sectionId=\"trending-rated\"\n                  />\n                </TabsContent>\n\n                <TabsContent value=\"newest\">\n                  <VideoGrid\n                    title=\"\"\n                    videos={newestVideos}\n                    sectionId=\"trending-newest\"\n                  />\n                </TabsContent>\n              </>\n            )}\n          </Tabs>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":6104,"size_tokens":null},"client/src/pages/SearchResults.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState, useMemo } from \"react\";\nimport { Link, useLocation, useSearch } from \"wouter\";\nimport { Header } from \"@/components/Header\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { VideoGrid } from \"@/components/VideoGrid\";\nimport { Footer } from \"@/components/Footer\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { \n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { \n  Search, ArrowLeft, SlidersHorizontal, X, Filter\n} from \"lucide-react\";\nimport type { Category, PaginatedVideos } from \"@shared/schema\";\n\ntype SortOption = 'relevance' | 'views' | 'rating' | 'duration' | 'newest';\n\nexport default function SearchResults() {\n  const { t } = useLanguage();\n  const [, navigate] = useLocation();\n  const searchParams = useSearch();\n  const query = new URLSearchParams(searchParams).get('q') || '';\n  \n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(query);\n  const [sortBy, setSortBy] = useState<SortOption>('relevance');\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n  const [minDuration, setMinDuration] = useState<number | null>(null);\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const searchQueryParam = query ? `?search=${encodeURIComponent(query)}` : '';\n  \n  const { data: searchData, isLoading } = useQuery<PaginatedVideos>({\n    queryKey: [`/api/videos${searchQueryParam}&page=1`],\n    enabled: !!query,\n  });\n\n  const videos = searchData?.videos || [];\n\n  const filteredAndSortedVideos = useMemo(() => {\n    let result = [...videos];\n\n    if (selectedCategory) {\n      result = result.filter(v => \n        v.categories.some(c => c.toLowerCase() === selectedCategory.toLowerCase())\n      );\n    }\n\n    if (minDuration !== null) {\n      result = result.filter(v => (v.durationSeconds || 0) >= minDuration);\n    }\n\n    switch (sortBy) {\n      case 'views':\n        result.sort((a, b) => (b.viewsCount || 0) - (a.viewsCount || 0));\n        break;\n      case 'rating':\n        result.sort((a, b) => (b.likes || 0) - (a.likes || 0));\n        break;\n      case 'duration':\n        result.sort((a, b) => (b.durationSeconds || 0) - (a.durationSeconds || 0));\n        break;\n      case 'newest':\n        break;\n      default:\n        break;\n    }\n\n    return result;\n  }, [videos, sortBy, selectedCategory, minDuration]);\n\n  const handleSearch = (newQuery: string) => {\n    setSearchQuery(newQuery);\n    if (newQuery.trim()) {\n      navigate(`/search?q=${encodeURIComponent(newQuery.trim())}`);\n    }\n  };\n\n  const clearFilters = () => {\n    setSelectedCategory(null);\n    setMinDuration(null);\n    setSortBy('relevance');\n  };\n\n  const hasActiveFilters = selectedCategory !== null || minDuration !== null || sortBy !== 'relevance';\n\n  const durationFilters = [\n    { label: 'Any', value: null },\n    { label: '< 5 min', value: 0 },\n    { label: '5-20 min', value: 300 },\n    { label: '20+ min', value: 1200 },\n  ];\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={handleSearch}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-16\">\n        <div className=\"max-w-7xl mx-auto px-4 md:px-8 py-6\">\n          <div className=\"flex items-center gap-4 mb-6\">\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link href=\"/\" data-testid=\"button-back\">\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Link>\n            </Button>\n            <div className=\"flex-1\">\n              <h1 className=\"text-2xl md:text-3xl font-bold flex items-center gap-3\" data-testid=\"text-search-title\">\n                <Search className=\"w-8 h-8 text-primary\" />\n                Search Results\n              </h1>\n              {query && (\n                <p className=\"text-sm text-muted-foreground mt-1\">\n                  {filteredAndSortedVideos.length} results for \"{query}\"\n                </p>\n              )}\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap items-center gap-4 mb-6 pb-6 border-b\">\n            <div className=\"flex items-center gap-2\">\n              <SlidersHorizontal className=\"w-4 h-4 text-muted-foreground\" />\n              <span className=\"text-sm font-medium\">Filters:</span>\n            </div>\n\n            <Select value={sortBy} onValueChange={(v) => setSortBy(v as SortOption)}>\n              <SelectTrigger className=\"w-[150px]\" data-testid=\"select-sort\">\n                <SelectValue placeholder=\"Sort by\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"relevance\">Relevance</SelectItem>\n                <SelectItem value=\"views\">Most Viewed</SelectItem>\n                <SelectItem value=\"rating\">Top Rated</SelectItem>\n                <SelectItem value=\"duration\">Longest</SelectItem>\n                <SelectItem value=\"newest\">Newest</SelectItem>\n              </SelectContent>\n            </Select>\n\n            <Select \n              value={selectedCategory || 'all'} \n              onValueChange={(v) => setSelectedCategory(v === 'all' ? null : v)}\n            >\n              <SelectTrigger className=\"w-[150px]\" data-testid=\"select-category\">\n                <SelectValue placeholder=\"Category\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Categories</SelectItem>\n                {categories.slice(0, 20).map((cat) => (\n                  <SelectItem key={cat.id} value={cat.name}>\n                    {cat.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n\n            <div className=\"flex gap-2\">\n              {durationFilters.map((filter) => (\n                <Badge\n                  key={filter.label}\n                  variant={minDuration === filter.value ? 'default' : 'outline'}\n                  className=\"cursor-pointer\"\n                  onClick={() => setMinDuration(filter.value)}\n                  data-testid={`badge-duration-${filter.label.replace(/\\s+/g, '-').toLowerCase()}`}\n                >\n                  {filter.label}\n                </Badge>\n              ))}\n            </div>\n\n            {hasActiveFilters && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={clearFilters}\n                className=\"text-destructive\"\n                data-testid=\"button-clear-filters\"\n              >\n                <X className=\"w-4 h-4 mr-1\" />\n                Clear\n              </Button>\n            )}\n          </div>\n\n          {!query ? (\n            <div className=\"text-center py-16\">\n              <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                <Search className=\"w-10 h-10 text-muted-foreground\" />\n              </div>\n              <h2 className=\"text-xl font-semibold mb-2\">Start searching</h2>\n              <p className=\"text-muted-foreground max-w-md mx-auto\">\n                Enter a search term to find videos by title, category, or tags\n              </p>\n            </div>\n          ) : isLoading ? (\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n              {Array.from({ length: 12 }).map((_, i) => (\n                <Skeleton key={i} className=\"aspect-video rounded-xl\" />\n              ))}\n            </div>\n          ) : filteredAndSortedVideos.length === 0 ? (\n            <div className=\"text-center py-16\">\n              <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                <Filter className=\"w-10 h-10 text-muted-foreground\" />\n              </div>\n              <h2 className=\"text-xl font-semibold mb-2\">No results found</h2>\n              <p className=\"text-muted-foreground max-w-md mx-auto mb-4\">\n                Try adjusting your search or filters to find what you're looking for\n              </p>\n              {hasActiveFilters && (\n                <Button onClick={clearFilters} variant=\"outline\">\n                  Clear All Filters\n                </Button>\n              )}\n            </div>\n          ) : (\n            <VideoGrid\n              title=\"\"\n              videos={filteredAndSortedVideos}\n              sectionId=\"search-results\"\n            />\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":9035,"size_tokens":null},"client/src/pages/Profile.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { getUserProfile, updateUserPreferences, watchHistoryService, favoritesService, watchLaterService } from \"@/lib/firebase\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  User, ArrowLeft, Settings, Heart, Clock, History,\n  Eye, LogOut, Shield, Bell, Moon, Palette, Video\n} from \"lucide-react\";\n\nexport default function Profile() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [, navigate] = useLocation();\n  const { user, isAuthenticated, logout } = useAuth();\n  \n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [darkMode, setDarkMode] = useState(() => \n    document.documentElement.classList.contains('dark')\n  );\n  const [autoplay, setAutoplay] = useState(true);\n  const [notifications, setNotifications] = useState(true);\n  \n  const [historyCount, setHistoryCount] = useState(0);\n  const [favoritesCount, setFavoritesCount] = useState(0);\n  const [watchLaterCount, setWatchLaterCount] = useState(0);\n\n  useEffect(() => {\n    const loadStats = async () => {\n      if (isAuthenticated && user) {\n        const history = await watchHistoryService.get(user.id);\n        const favorites = await favoritesService.get(user.id);\n        const watchLater = await watchLaterService.get(user.id);\n        \n        setHistoryCount(history.length);\n        setFavoritesCount(favorites.length);\n        setWatchLaterCount(watchLater.length);\n      } else {\n        const historyStored = localStorage.getItem('blueberry_watch_history');\n        const favoritesStored = localStorage.getItem('blueberry_favorites');\n        const watchLaterStored = localStorage.getItem('blueberry_watch_later');\n        \n        setHistoryCount(historyStored ? JSON.parse(historyStored).length : 0);\n        setFavoritesCount(favoritesStored ? JSON.parse(favoritesStored).length : 0);\n        setWatchLaterCount(watchLaterStored ? JSON.parse(watchLaterStored).length : 0);\n      }\n    };\n    \n    loadStats();\n  }, [isAuthenticated, user]);\n\n  const handleDarkModeChange = async (enabled: boolean) => {\n    setDarkMode(enabled);\n    if (enabled) {\n      document.documentElement.classList.add('dark');\n      localStorage.setItem('theme', 'dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n      localStorage.setItem('theme', 'light');\n    }\n    \n    if (isAuthenticated && user) {\n      await updateUserPreferences(user.id, { darkMode: enabled });\n    }\n  };\n\n  const handleAutoplayChange = async (enabled: boolean) => {\n    setAutoplay(enabled);\n    if (isAuthenticated && user) {\n      await updateUserPreferences(user.id, { autoplay: enabled });\n    }\n  };\n\n  const handleNotificationsChange = async (enabled: boolean) => {\n    setNotifications(enabled);\n    if (isAuthenticated && user) {\n      await updateUserPreferences(user.id, { notifications: enabled });\n    }\n  };\n\n  const handleLogout = async () => {\n    await logout();\n    toast({\n      title: 'Logged out',\n      description: 'You have been successfully logged out',\n    });\n    navigate('/');\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-background\">\n        <Header\n          onMenuClick={() => {}}\n          searchQuery={searchQuery}\n          onSearchChange={setSearchQuery}\n        />\n        \n        <main className=\"flex-1 pt-16 flex items-center justify-center\">\n          <div className=\"text-center px-4 max-w-md\">\n            <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-primary/10 flex items-center justify-center\">\n              <User className=\"w-10 h-10 text-primary\" />\n            </div>\n            <h2 className=\"text-xl font-semibold mb-2\">Sign in to view your profile</h2>\n            <p className=\"text-muted-foreground mb-6\">\n              Access your watch history, favorites, and personalized settings\n            </p>\n            <div className=\"flex gap-4 justify-center\">\n              <Button asChild>\n                <Link href=\"/login\">{t.common.login}</Link>\n              </Button>\n              <Button variant=\"outline\" asChild>\n                <Link href=\"/register\">{t.common.register}</Link>\n              </Button>\n            </div>\n          </div>\n        </main>\n        \n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => {}}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <main className=\"flex-1 pt-16\">\n        <div className=\"max-w-4xl mx-auto px-4 md:px-8 py-6\">\n          <div className=\"flex items-center gap-4 mb-6\">\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link href=\"/\" data-testid=\"button-back\">\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Link>\n            </Button>\n            <h1 className=\"text-2xl md:text-3xl font-bold\" data-testid=\"text-profile-title\">\n              Profile\n            </h1>\n          </div>\n\n          <Card className=\"mb-6\">\n            <CardContent className=\"pt-6\">\n              <div className=\"flex flex-col sm:flex-row items-center gap-6\">\n                <Avatar className=\"w-24 h-24\">\n                  <AvatarFallback className=\"text-3xl bg-primary/20\">\n                    {user?.username?.charAt(0).toUpperCase() || 'U'}\n                  </AvatarFallback>\n                </Avatar>\n                \n                <div className=\"text-center sm:text-left flex-1\">\n                  <h2 className=\"text-2xl font-bold\">{user?.username}</h2>\n                  <p className=\"text-muted-foreground\">{user?.email}</p>\n                  <div className=\"flex flex-wrap gap-2 mt-3 justify-center sm:justify-start\">\n                    <Badge variant=\"secondary\">\n                      <Shield className=\"w-3 h-3 mr-1\" />\n                      Member\n                    </Badge>\n                    {user?.createdAt && (\n                      <Badge variant=\"outline\">\n                        Joined {new Date(user.createdAt).toLocaleDateString()}\n                      </Badge>\n                    )}\n                  </div>\n                </div>\n\n                <Button variant=\"outline\" asChild className=\"flex-shrink-0\">\n                  <Link href=\"/settings\">\n                    <Settings className=\"w-4 h-4 mr-2\" />\n                    Settings\n                  </Link>\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6\">\n            <Card \n              className=\"cursor-pointer hover-elevate\" \n              onClick={() => navigate('/history')}\n              data-testid=\"card-history-stats\"\n            >\n              <CardContent className=\"pt-6 text-center\">\n                <div className=\"w-12 h-12 mx-auto mb-3 rounded-full bg-blue-500/10 flex items-center justify-center\">\n                  <History className=\"w-6 h-6 text-blue-500\" />\n                </div>\n                <p className=\"text-3xl font-bold\">{historyCount}</p>\n                <p className=\"text-sm text-muted-foreground\">Videos Watched</p>\n              </CardContent>\n            </Card>\n\n            <Card \n              className=\"cursor-pointer hover-elevate\" \n              onClick={() => navigate('/favorites')}\n              data-testid=\"card-favorites-stats\"\n            >\n              <CardContent className=\"pt-6 text-center\">\n                <div className=\"w-12 h-12 mx-auto mb-3 rounded-full bg-red-500/10 flex items-center justify-center\">\n                  <Heart className=\"w-6 h-6 text-red-500\" />\n                </div>\n                <p className=\"text-3xl font-bold\">{favoritesCount}</p>\n                <p className=\"text-sm text-muted-foreground\">Favorites</p>\n              </CardContent>\n            </Card>\n\n            <Card \n              className=\"cursor-pointer hover-elevate\" \n              onClick={() => navigate('/watch-later')}\n              data-testid=\"card-watch-later-stats\"\n            >\n              <CardContent className=\"pt-6 text-center\">\n                <div className=\"w-12 h-12 mx-auto mb-3 rounded-full bg-primary/10 flex items-center justify-center\">\n                  <Clock className=\"w-6 h-6 text-primary\" />\n                </div>\n                <p className=\"text-3xl font-bold\">{watchLaterCount}</p>\n                <p className=\"text-sm text-muted-foreground\">Watch Later</p>\n              </CardContent>\n            </Card>\n          </div>\n\n          <Tabs defaultValue=\"preferences\">\n            <TabsList className=\"mb-4\">\n              <TabsTrigger value=\"preferences\" data-testid=\"tab-preferences\">\n                <Palette className=\"w-4 h-4 mr-2\" />\n                Preferences\n              </TabsTrigger>\n              <TabsTrigger value=\"playback\" data-testid=\"tab-playback\">\n                <Video className=\"w-4 h-4 mr-2\" />\n                Playback\n              </TabsTrigger>\n              <TabsTrigger value=\"notifications\" data-testid=\"tab-notifications\">\n                <Bell className=\"w-4 h-4 mr-2\" />\n                Notifications\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"preferences\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Appearance</CardTitle>\n                  <CardDescription>Customize how the app looks</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <Moon className=\"w-5 h-5 text-muted-foreground\" />\n                      <div>\n                        <p className=\"font-medium\">Dark Mode</p>\n                        <p className=\"text-sm text-muted-foreground\">Use dark theme</p>\n                      </div>\n                    </div>\n                    <Switch\n                      checked={darkMode}\n                      onCheckedChange={handleDarkModeChange}\n                      data-testid=\"switch-dark-mode\"\n                    />\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"playback\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Video Settings</CardTitle>\n                  <CardDescription>Configure video playback behavior</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <Video className=\"w-5 h-5 text-muted-foreground\" />\n                      <div>\n                        <p className=\"font-medium\">Autoplay</p>\n                        <p className=\"text-sm text-muted-foreground\">Play next video automatically</p>\n                      </div>\n                    </div>\n                    <Switch\n                      checked={autoplay}\n                      onCheckedChange={handleAutoplayChange}\n                      data-testid=\"switch-autoplay\"\n                    />\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"notifications\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Notification Settings</CardTitle>\n                  <CardDescription>Manage your notification preferences</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <Bell className=\"w-5 h-5 text-muted-foreground\" />\n                      <div>\n                        <p className=\"font-medium\">Push Notifications</p>\n                        <p className=\"text-sm text-muted-foreground\">Receive notifications</p>\n                      </div>\n                    </div>\n                    <Switch\n                      checked={notifications}\n                      onCheckedChange={handleNotificationsChange}\n                      data-testid=\"switch-notifications\"\n                    />\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n\n          <div className=\"mt-6\">\n            <Button\n              variant=\"destructive\"\n              className=\"w-full\"\n              onClick={handleLogout}\n              data-testid=\"button-logout\"\n            >\n              <LogOut className=\"w-4 h-4 mr-2\" />\n              Sign Out\n            </Button>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":13551,"size_tokens":null},"client/src/pages/Favorites.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/Header\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { Footer } from \"@/components/Footer\";\nimport { VideoCard } from \"@/components/VideoCard\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { favoritesService, FavoriteItem } from \"@/lib/firebase\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Heart, ArrowLeft, Search, Trash2, Grid3X3, List } from \"lucide-react\";\nimport type { Category, Video } from \"@shared/schema\";\n\nexport default function Favorites() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [, navigate] = useLocation();\n  const { user, isAuthenticated } = useAuth();\n  \n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [filterQuery, setFilterQuery] = useState(\"\");\n  const [favorites, setFavorites] = useState<FavoriteItem[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  useEffect(() => {\n    const loadFavorites = async () => {\n      setIsLoading(true);\n      if (isAuthenticated && user) {\n        const items = await favoritesService.get(user.id);\n        setFavorites(items);\n      } else {\n        const stored = localStorage.getItem('blueberry_favorites');\n        if (stored) {\n          try {\n            setFavorites(JSON.parse(stored));\n          } catch {\n            setFavorites([]);\n          }\n        }\n      }\n      setIsLoading(false);\n    };\n\n    loadFavorites();\n  }, [isAuthenticated, user]);\n\n  const filteredFavorites = favorites.filter(item =>\n    item.title.toLowerCase().includes(filterQuery.toLowerCase())\n  );\n\n  const handleRemove = async (videoId: string) => {\n    if (isAuthenticated && user) {\n      await favoritesService.remove(user.id, videoId);\n      setFavorites(prev => prev.filter(item => item.videoId !== videoId));\n    } else {\n      const updated = favorites.filter(item => item.videoId !== videoId);\n      setFavorites(updated);\n      localStorage.setItem('blueberry_favorites', JSON.stringify(updated));\n    }\n    toast({\n      title: 'Removed from favorites',\n      description: 'Video has been removed from your favorites',\n    });\n  };\n\n  const handleClearAll = async () => {\n    if (isAuthenticated && user) {\n      for (const item of favorites) {\n        await favoritesService.remove(user.id, item.videoId);\n      }\n    } else {\n      localStorage.removeItem('blueberry_favorites');\n    }\n    setFavorites([]);\n    toast({\n      title: 'Favorites cleared',\n      description: 'All favorites have been removed',\n    });\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    \n    if (days === 0) return 'Today';\n    if (days === 1) return 'Yesterday';\n    if (days < 7) return `${days} days ago`;\n    return date.toLocaleDateString();\n  };\n\n  const mockVideoFromFavorite = (item: FavoriteItem): Partial<Video> => ({\n    id: item.videoId,\n    title: item.title,\n    thumbnailUrl: item.thumbnail,\n    duration: item.duration,\n    views: '',\n    viewsCount: 0,\n    likes: 0,\n    dislikes: 0,\n    categories: [],\n    tags: [],\n    actors: [],\n  });\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={favorites.length}\n      />\n\n      <main className=\"flex-1 pt-16\">\n        <div className=\"max-w-7xl mx-auto px-4 md:px-8 py-6\">\n          <div className=\"flex items-center justify-between gap-4 mb-6\">\n            <div className=\"flex items-center gap-4\">\n              <Button variant=\"ghost\" size=\"icon\" asChild>\n                <Link href=\"/\" data-testid=\"button-back\">\n                  <ArrowLeft className=\"w-5 h-5\" />\n                </Link>\n              </Button>\n              <div>\n                <h1 className=\"text-2xl md:text-3xl font-bold flex items-center gap-3\" data-testid=\"text-favorites-title\">\n                  <Heart className=\"w-8 h-8 text-red-500\" />\n                  Favorites\n                </h1>\n                <p className=\"text-sm text-muted-foreground mt-1\">\n                  {favorites.length} videos saved\n                </p>\n              </div>\n            </div>\n\n            {favorites.length > 0 && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleClearAll}\n                className=\"text-destructive hover:text-destructive\"\n                data-testid=\"button-clear-favorites\"\n              >\n                <Trash2 className=\"w-4 h-4 mr-2\" />\n                Clear All\n              </Button>\n            )}\n          </div>\n\n          {favorites.length > 0 && (\n            <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search favorites...\"\n                  value={filterQuery}\n                  onChange={(e) => setFilterQuery(e.target.value)}\n                  className=\"pl-10\"\n                  data-testid=\"input-search-favorites\"\n                />\n              </div>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant={viewMode === 'grid' ? 'default' : 'outline'}\n                  size=\"icon\"\n                  onClick={() => setViewMode('grid')}\n                  data-testid=\"button-view-grid\"\n                >\n                  <Grid3X3 className=\"w-4 h-4\" />\n                </Button>\n                <Button\n                  variant={viewMode === 'list' ? 'default' : 'outline'}\n                  size=\"icon\"\n                  onClick={() => setViewMode('list')}\n                  data-testid=\"button-view-list\"\n                >\n                  <List className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </div>\n          )}\n\n          {isLoading ? (\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n              {Array.from({ length: 8 }).map((_, i) => (\n                <Skeleton key={i} className=\"aspect-video rounded-xl\" />\n              ))}\n            </div>\n          ) : favorites.length === 0 ? (\n            <div className=\"text-center py-16\">\n              <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-red-500/10 flex items-center justify-center\">\n                <Heart className=\"w-10 h-10 text-red-500\" />\n              </div>\n              <h2 className=\"text-xl font-semibold mb-2\">No favorites yet</h2>\n              <p className=\"text-muted-foreground mb-6 max-w-md mx-auto\">\n                Start adding videos to your favorites by clicking the heart icon on any video\n              </p>\n              <Button asChild>\n                <Link href=\"/\">Browse Videos</Link>\n              </Button>\n            </div>\n          ) : filteredFavorites.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                <Search className=\"w-8 h-8 text-muted-foreground\" />\n              </div>\n              <h3 className=\"text-lg font-medium mb-2\">No results found</h3>\n              <p className=\"text-muted-foreground\">\n                Try a different search term\n              </p>\n            </div>\n          ) : viewMode === 'grid' ? (\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n              {filteredFavorites.map((item) => (\n                <div key={item.videoId} className=\"relative group\">\n                  <VideoCard\n                    video={mockVideoFromFavorite(item) as Video}\n                    sectionId=\"favorites\"\n                  />\n                  <Button\n                    size=\"icon\"\n                    variant=\"destructive\"\n                    className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity\"\n                    onClick={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      handleRemove(item.videoId);\n                    }}\n                    data-testid={`button-remove-${item.videoId}`}\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </Button>\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    Added {formatDate(item.addedAt)}\n                  </p>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {filteredFavorites.map((item) => (\n                <div\n                  key={item.videoId}\n                  className=\"flex items-center gap-4 p-3 rounded-lg bg-card hover-elevate cursor-pointer\"\n                  onClick={() => navigate(`/video/${item.videoId}`)}\n                  data-testid={`favorite-list-${item.videoId}`}\n                >\n                  <img\n                    src={item.thumbnail}\n                    alt={item.title}\n                    className=\"w-32 h-20 rounded-md object-cover flex-shrink-0\"\n                  />\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"font-medium line-clamp-2\">{item.title}</h3>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      {item.duration} | Added {formatDate(item.addedAt)}\n                    </p>\n                  </div>\n                  <Button\n                    size=\"icon\"\n                    variant=\"ghost\"\n                    className=\"text-destructive hover:text-destructive flex-shrink-0\"\n                    onClick={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      handleRemove(item.videoId);\n                    }}\n                    data-testid={`button-remove-list-${item.videoId}`}\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":11170,"size_tokens":null},"client/src/components/VideoPlayer.tsx":{"content":"import { useState, useRef, useEffect, useCallback, useMemo } from \"react\";\nimport { \n  Maximize, Minimize, Loader2, AlertCircle, Monitor,\n  RefreshCw, ChevronUp, ChevronDown, Settings, Sun,\n  Volume2, VolumeX, Volume1, Play, Pause, SkipBack,\n  SkipForward, Rewind, FastForward, PictureInPicture2,\n  Subtitles, Gauge, Lock, Unlock, RotateCcw, Info,\n  Smartphone, Tv, Cast, Download, ChevronLeft, ChevronRight,\n  ZoomIn, ZoomOut, Eye, EyeOff, Repeat, Shuffle\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { cn } from \"@/lib/utils\";\nimport { useVideoGestures } from \"@/hooks/use-gestures\";\nimport { usePlayback } from \"@/context/PlaybackContext\";\n\nfunction extractIframeSrc(embedCode: string): string | null {\n  const srcMatch = embedCode.match(/src=[\"']([^\"']+)[\"']/);\n  return srcMatch ? srcMatch[1] : null;\n}\n\ntype VideoQuality = \"auto\" | \"2160p\" | \"1440p\" | \"1080p\" | \"720p\" | \"480p\" | \"360p\" | \"240p\";\ntype AudioQuality = \"high\" | \"medium\" | \"low\";\ntype PlaybackSpeed = 0.25 | 0.5 | 0.75 | 1 | 1.25 | 1.5 | 1.75 | 2;\ntype FitMode = \"contain\" | \"cover\" | \"fill\";\n\ninterface VideoPlayerProps {\n  embedCode?: string;\n  embedUrl?: string;\n  title: string;\n  thumbnail?: string;\n  screenshots?: string[];\n  videoId: string;\n  durationSeconds?: number;\n  onProgress?: (progress: number, currentTime: number) => void;\n  onEnded?: () => void;\n  initialProgress?: number;\n  autoplay?: boolean;\n}\n\nconst QUALITY_OPTIONS: { value: VideoQuality; label: string; resolution: string }[] = [\n  { value: \"auto\", label: \"Auto\", resolution: \"Adaptive\" },\n  { value: \"2160p\", label: \"4K Ultra HD\", resolution: \"3840x2160\" },\n  { value: \"1440p\", label: \"2K QHD\", resolution: \"2560x1440\" },\n  { value: \"1080p\", label: \"Full HD\", resolution: \"1920x1080\" },\n  { value: \"720p\", label: \"HD\", resolution: \"1280x720\" },\n  { value: \"480p\", label: \"SD\", resolution: \"854x480\" },\n  { value: \"360p\", label: \"Low\", resolution: \"640x360\" },\n  { value: \"240p\", label: \"Very Low\", resolution: \"426x240\" },\n];\n\nconst AUDIO_OPTIONS: { value: AudioQuality; label: string; bitrate: string }[] = [\n  { value: \"high\", label: \"High Quality\", bitrate: \"320 kbps\" },\n  { value: \"medium\", label: \"Medium\", bitrate: \"192 kbps\" },\n  { value: \"low\", label: \"Low\", bitrate: \"128 kbps\" },\n];\n\nconst SPEED_OPTIONS: { value: PlaybackSpeed; label: string }[] = [\n  { value: 0.25, label: \"0.25x\" },\n  { value: 0.5, label: \"0.5x\" },\n  { value: 0.75, label: \"0.75x\" },\n  { value: 1, label: \"Normal\" },\n  { value: 1.25, label: \"1.25x\" },\n  { value: 1.5, label: \"1.5x\" },\n  { value: 1.75, label: \"1.75x\" },\n  { value: 2, label: \"2x\" },\n];\n\nexport function VideoPlayer({\n  embedCode,\n  embedUrl,\n  title,\n  thumbnail,\n  screenshots = [],\n  videoId,\n  durationSeconds = 0,\n}: VideoPlayerProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const hideControlsTimeout = useRef<NodeJS.Timeout | null>(null);\n  const gestureIndicatorTimeout = useRef<NodeJS.Timeout | null>(null);\n  const progressSaveInterval = useRef<NodeJS.Timeout | null>(null);\n  \n  const { settings, updateSettings, saveProgress, getProgress } = usePlayback();\n  \n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n  const [isTheaterMode, setIsTheaterMode] = useState(() => settings.theater);\n  const [brightness, setBrightness] = useState(() => settings.brightness);\n  const [volume, setVolume] = useState(() => settings.volume);\n  const [isMuted, setIsMuted] = useState(() => settings.muted);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isPiPMode, setIsPiPMode] = useState(() => settings.miniPlayer);\n  const [isControlsLocked, setIsControlsLocked] = useState(false);\n  const [showStats, setShowStats] = useState(false);\n  const [isMinimized, setIsMinimized] = useState(false);\n  const [fitMode, setFitMode] = useState<FitMode>(\"contain\");\n  const [isLooping, setIsLooping] = useState(() => settings.loop);\n  const [showSubtitles, setShowSubtitles] = useState(() => settings.subtitles);\n  const [simulatedProgress, setSimulatedProgress] = useState(0);\n  \n  const [quality, setQuality] = useState<VideoQuality>(() => settings.quality);\n  const [audioQuality, setAudioQuality] = useState<AudioQuality>(() => settings.audioQuality);\n  const [playbackSpeed, setPlaybackSpeed] = useState<PlaybackSpeed>(() => settings.playbackSpeed);\n  \n  const [gestureIndicator, setGestureIndicator] = useState<{\n    type: \"seek\" | \"volume\" | \"brightness\" | \"zoom\" | null;\n    value: string;\n    direction: \"left\" | \"right\" | \"up\" | \"down\" | null;\n  }>({ type: null, value: \"\", direction: null });\n  \n  const [currentScreenshot, setCurrentScreenshot] = useState(0);\n  const [showScreenshotPreview, setShowScreenshotPreview] = useState(false);\n  \n  const [stats, setStats] = useState({\n    resolution: \"1080p\",\n    bitrate: \"4.5 Mbps\",\n    fps: \"30\",\n    buffered: \"15s\",\n    dropped: \"0\",\n    latency: \"45ms\",\n  });\n\n  useEffect(() => {\n    const existingProgress = getProgress(videoId);\n    if (existingProgress) {\n      setSimulatedProgress(existingProgress.progress);\n    }\n  }, [videoId, getProgress]);\n\n  useEffect(() => {\n    if (videoId && title && thumbnail && isPlaying) {\n      progressSaveInterval.current = setInterval(() => {\n        const currentTime = (simulatedProgress / 100) * durationSeconds;\n        saveProgress({\n          videoId,\n          progress: Math.min(simulatedProgress + 1, 100),\n          currentTime,\n          duration: durationSeconds,\n          lastWatched: new Date().toISOString(),\n          title,\n          thumbnail,\n        });\n        setSimulatedProgress(prev => Math.min(prev + 1, 100));\n      }, 10000);\n    }\n\n    return () => {\n      if (progressSaveInterval.current) {\n        clearInterval(progressSaveInterval.current);\n      }\n    };\n  }, [videoId, title, thumbnail, isPlaying, simulatedProgress, durationSeconds, saveProgress]);\n\n  useEffect(() => {\n    if (videoId && title && thumbnail) {\n      const currentTime = (simulatedProgress / 100) * durationSeconds;\n      saveProgress({\n        videoId,\n        progress: Math.max(simulatedProgress, 5),\n        currentTime,\n        duration: durationSeconds,\n        lastWatched: new Date().toISOString(),\n        title,\n        thumbnail,\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    updateSettings({\n      quality,\n      audioQuality,\n      playbackSpeed,\n      loop: isLooping,\n      muted: isMuted,\n      volume,\n      brightness,\n      theater: isTheaterMode,\n      miniPlayer: isPiPMode,\n      subtitles: showSubtitles,\n    });\n  }, [quality, audioQuality, playbackSpeed, isLooping, isMuted, volume, brightness, isTheaterMode, isPiPMode, showSubtitles, updateSettings]);\n\n  useEffect(() => {\n    return () => {\n      if (hideControlsTimeout.current) clearTimeout(hideControlsTimeout.current);\n      if (gestureIndicatorTimeout.current) clearTimeout(gestureIndicatorTimeout.current);\n      if (progressSaveInterval.current) clearInterval(progressSaveInterval.current);\n    };\n  }, []);\n\n  const showGestureIndicator = useCallback((type: typeof gestureIndicator.type, value: string, direction: typeof gestureIndicator.direction = null) => {\n    setGestureIndicator({ type, value, direction });\n    if (gestureIndicatorTimeout.current) {\n      clearTimeout(gestureIndicatorTimeout.current);\n    }\n    gestureIndicatorTimeout.current = setTimeout(() => {\n      setGestureIndicator({ type: null, value: \"\", direction: null });\n    }, 1000);\n  }, []);\n\n  const showControlsTemporarily = useCallback(() => {\n    if (isControlsLocked) return;\n    setShowControls(true);\n    if (hideControlsTimeout.current) {\n      clearTimeout(hideControlsTimeout.current);\n    }\n    hideControlsTimeout.current = setTimeout(() => {\n      if (!isControlsLocked) {\n        setShowControls(false);\n      }\n    }, 4000);\n  }, [isControlsLocked]);\n\n  const handleMouseMove = useCallback(() => {\n    showControlsTemporarily();\n  }, [showControlsTemporarily]);\n\n  const handleMouseLeave = useCallback(() => {\n    if (hideControlsTimeout.current) {\n      clearTimeout(hideControlsTimeout.current);\n    }\n    if (!isControlsLocked) {\n      setShowControls(false);\n    }\n  }, [isControlsLocked]);\n\n  const toggleFullscreen = useCallback(async () => {\n    if (!containerRef.current) return;\n    \n    try {\n      if (!document.fullscreenElement) {\n        await containerRef.current.requestFullscreen();\n        setIsFullscreen(true);\n      } else {\n        await document.exitFullscreen();\n        setIsFullscreen(false);\n      }\n    } catch (err) {\n      console.error('Fullscreen error:', err);\n    }\n  }, []);\n\n  const togglePiP = useCallback(async () => {\n    try {\n      if (document.pictureInPictureElement) {\n        await document.exitPictureInPicture();\n        setIsPiPMode(false);\n      } else {\n        setIsPiPMode(!isPiPMode);\n        showGestureIndicator(\"zoom\", isPiPMode ? \"PiP Off\" : \"PiP On\");\n      }\n    } catch (err) {\n      console.error('PiP error:', err);\n    }\n  }, [isPiPMode, showGestureIndicator]);\n\n  const handleSeekForward = useCallback(() => {\n    showGestureIndicator(\"seek\", \"+10s\", \"right\");\n  }, [showGestureIndicator]);\n\n  const handleSeekBackward = useCallback(() => {\n    showGestureIndicator(\"seek\", \"-10s\", \"left\");\n  }, [showGestureIndicator]);\n\n  const handleVolumeChange = useCallback((delta: number) => {\n    const newVolume = Math.max(0, Math.min(100, volume + delta * 100));\n    setVolume(newVolume);\n    setIsMuted(newVolume === 0);\n    showGestureIndicator(\"volume\", `${Math.round(newVolume)}%`, delta > 0 ? \"up\" : \"down\");\n  }, [volume, showGestureIndicator]);\n\n  const handleBrightnessChange = useCallback((delta: number) => {\n    const newBrightness = Math.max(10, Math.min(150, brightness + delta));\n    setBrightness(newBrightness);\n    showGestureIndicator(\"brightness\", `${Math.round(newBrightness)}%`, delta > 0 ? \"up\" : \"down\");\n  }, [brightness, showGestureIndicator]);\n\n  const handleTogglePlay = useCallback(() => {\n    setIsPlaying(!isPlaying);\n    showGestureIndicator(\"seek\", isPlaying ? \"Paused\" : \"Playing\");\n  }, [isPlaying, showGestureIndicator]);\n\n  const handleDoubleTapLeft = useCallback(() => {\n    handleSeekBackward();\n  }, [handleSeekBackward]);\n\n  const handleDoubleTapRight = useCallback(() => {\n    handleSeekForward();\n  }, [handleSeekForward]);\n\n  const handleLongPress = useCallback(() => {\n    setShowScreenshotPreview(true);\n    if (screenshots.length > 0) {\n      setCurrentScreenshot(0);\n    }\n  }, [screenshots]);\n\n  const handlePinchZoom = useCallback((scale: number) => {\n    if (scale > 1.2) {\n      setFitMode(\"cover\");\n      showGestureIndicator(\"zoom\", \"Zoom In\");\n    } else if (scale < 0.8) {\n      setFitMode(\"contain\");\n      showGestureIndicator(\"zoom\", \"Zoom Out\");\n    }\n  }, [showGestureIndicator]);\n\n  useVideoGestures(containerRef, {\n    onSeekForward: handleSeekForward,\n    onSeekBackward: handleSeekBackward,\n    onVolumeChange: handleVolumeChange,\n    onBrightnessChange: handleBrightnessChange,\n    onTogglePlay: handleTogglePlay,\n    onDoubleTapLeft: handleDoubleTapLeft,\n    onDoubleTapRight: handleDoubleTapRight,\n    onLongPress: handleLongPress,\n    onPinchZoom: handlePinchZoom,\n  });\n\n  const handleKeyDown = useCallback((e: KeyboardEvent) => {\n    if (document.activeElement?.tagName === 'INPUT' || \n        document.activeElement?.tagName === 'TEXTAREA') {\n      return;\n    }\n\n    switch (e.key.toLowerCase()) {\n      case 'f':\n        e.preventDefault();\n        toggleFullscreen();\n        break;\n      case 't':\n        e.preventDefault();\n        setIsTheaterMode(!isTheaterMode);\n        break;\n      case ' ':\n      case 'k':\n        e.preventDefault();\n        handleTogglePlay();\n        break;\n      case 'arrowup':\n        e.preventDefault();\n        handleBrightnessChange(10);\n        break;\n      case 'arrowdown':\n        e.preventDefault();\n        handleBrightnessChange(-10);\n        break;\n      case 'arrowleft':\n        e.preventDefault();\n        handleSeekBackward();\n        break;\n      case 'arrowright':\n        e.preventDefault();\n        handleSeekForward();\n        break;\n      case 'm':\n        e.preventDefault();\n        setIsMuted(!isMuted);\n        break;\n      case 'l':\n        e.preventDefault();\n        setIsControlsLocked(!isControlsLocked);\n        break;\n      case 'p':\n        e.preventDefault();\n        togglePiP();\n        break;\n      case 's':\n        e.preventDefault();\n        setShowStats(!showStats);\n        break;\n      case 'c':\n        e.preventDefault();\n        setShowSubtitles(!showSubtitles);\n        break;\n      case 'r':\n        e.preventDefault();\n        setIsLooping(!isLooping);\n        break;\n      case '0':\n      case '1':\n      case '2':\n      case '3':\n      case '4':\n      case '5':\n      case '6':\n      case '7':\n      case '8':\n      case '9':\n        e.preventDefault();\n        const percent = parseInt(e.key) * 10;\n        showGestureIndicator(\"seek\", `${percent}%`);\n        break;\n      case '+':\n      case '=':\n        e.preventDefault();\n        const nextSpeedIdx = SPEED_OPTIONS.findIndex(s => s.value === playbackSpeed);\n        if (nextSpeedIdx < SPEED_OPTIONS.length - 1) {\n          const newSpeed = SPEED_OPTIONS[nextSpeedIdx + 1].value;\n          setPlaybackSpeed(newSpeed);\n          showGestureIndicator(\"seek\", `${newSpeed}x`);\n        }\n        break;\n      case '-':\n        e.preventDefault();\n        const prevSpeedIdx = SPEED_OPTIONS.findIndex(s => s.value === playbackSpeed);\n        if (prevSpeedIdx > 0) {\n          const newSpeed = SPEED_OPTIONS[prevSpeedIdx - 1].value;\n          setPlaybackSpeed(newSpeed);\n          showGestureIndicator(\"seek\", `${newSpeed}x`);\n        }\n        break;\n    }\n  }, [brightness, isTheaterMode, toggleFullscreen, isMuted, isControlsLocked, showStats, showSubtitles, isLooping, playbackSpeed, handleTogglePlay, handleBrightnessChange, handleSeekBackward, handleSeekForward, togglePiP, showGestureIndicator]);\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [handleKeyDown]);\n\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      setIsFullscreen(!!document.fullscreenElement);\n    };\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    return () => document.removeEventListener('fullscreenchange', handleFullscreenChange);\n  }, []);\n\n  useEffect(() => {\n    if (!embedCode && !embedUrl) {\n      setHasError(true);\n      setIsLoading(false);\n    }\n  }, [embedCode, embedUrl]);\n\n  useEffect(() => {\n    const savedQuality = localStorage.getItem('blueberry_video_quality');\n    const savedAudio = localStorage.getItem('blueberry_audio_quality');\n    const savedSpeed = localStorage.getItem('blueberry_playback_speed');\n    \n    if (savedQuality) setQuality(savedQuality as VideoQuality);\n    if (savedAudio) setAudioQuality(savedAudio as AudioQuality);\n    if (savedSpeed) setPlaybackSpeed(parseFloat(savedSpeed) as PlaybackSpeed);\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem('blueberry_video_quality', quality);\n  }, [quality]);\n\n  useEffect(() => {\n    localStorage.setItem('blueberry_audio_quality', audioQuality);\n  }, [audioQuality]);\n\n  useEffect(() => {\n    localStorage.setItem('blueberry_playback_speed', String(playbackSpeed));\n  }, [playbackSpeed]);\n\n  const handleIframeLoad = () => {\n    setIsLoading(false);\n    setHasError(false);\n  };\n\n  const handleIframeError = () => {\n    setIsLoading(false);\n    setHasError(true);\n  };\n\n  const extractedEmbedSrc = useMemo(() => {\n    if (embedCode) {\n      return extractIframeSrc(embedCode);\n    }\n    return null;\n  }, [embedCode]);\n\n  const finalEmbedUrl = useMemo(() => {\n    const url = extractedEmbedSrc || embedUrl;\n    if (url) {\n      return url + (url.includes('?') ? '&' : '?') + 'autoplay=0';\n    }\n    return null;\n  }, [extractedEmbedSrc, embedUrl]);\n\n  const VolumeIcon = isMuted || volume === 0 ? VolumeX : volume < 50 ? Volume1 : Volume2;\n\n  if (hasError || (!embedCode && !embedUrl)) {\n    return (\n      <div \n        className=\"relative w-full aspect-video bg-black/90 rounded-xl flex flex-col items-center justify-center gap-4\"\n        data-testid=\"video-player-error\"\n      >\n        <div className=\"w-16 h-16 rounded-full bg-destructive/20 flex items-center justify-center\">\n          <AlertCircle className=\"w-8 h-8 text-destructive\" />\n        </div>\n        <p className=\"text-white text-lg font-medium\">Video unavailable</p>\n        <p className=\"text-white/60 text-sm\">This video cannot be played at this time</p>\n        <Button \n          variant=\"outline\" \n          onClick={() => window.location.reload()}\n          className=\"mt-2\"\n          data-testid=\"button-retry-video\"\n        >\n          <RefreshCw className=\"w-4 h-4 mr-2\" />\n          Try Again\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      ref={containerRef}\n      className={cn(\n        \"relative w-full bg-black group select-none touch-none\",\n        isTheaterMode ? \"aspect-[21/9]\" : \"aspect-video\",\n        isFullscreen && \"fixed inset-0 z-50\",\n        isMinimized && \"fixed bottom-4 right-4 w-80 aspect-video z-50 rounded-xl overflow-hidden shadow-2xl\"\n      )}\n      style={{ \n        filter: `brightness(${brightness}%)`,\n        objectFit: fitMode,\n      }}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      onTouchStart={showControlsTemporarily}\n      tabIndex={0}\n      data-testid=\"video-player-container\"\n    >\n      {isLoading && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-black/80 z-20\">\n          <div className=\"flex flex-col items-center gap-3\">\n            <Loader2 className=\"w-12 h-12 text-primary animate-spin\" />\n            <p className=\"text-white/80 text-sm\">Loading video...</p>\n          </div>\n        </div>\n      )}\n\n      {thumbnail && isLoading && (\n        <img \n          src={thumbnail} \n          alt={title}\n          className=\"absolute inset-0 w-full h-full object-cover opacity-30\"\n          data-testid=\"video-player-thumbnail\"\n        />\n      )}\n\n      <div className={cn(\n        \"absolute inset-0 w-full h-full\",\n        fitMode === \"cover\" && \"object-cover\",\n        fitMode === \"fill\" && \"object-fill\"\n      )}>\n        {finalEmbedUrl ? (\n          <iframe\n            src={finalEmbedUrl}\n            title={title}\n            className=\"absolute inset-0 w-full h-full border-0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen\"\n            allowFullScreen\n            onLoad={handleIframeLoad}\n            onError={handleIframeError}\n            data-testid=\"video-iframe\"\n          />\n        ) : null}\n      </div>\n\n      {gestureIndicator.type && (\n        <div className=\"absolute inset-0 flex items-center justify-center z-30 pointer-events-none\">\n          <div className=\"bg-black/70 backdrop-blur-sm rounded-xl px-6 py-4 flex flex-col items-center gap-2 animate-in fade-in zoom-in duration-200\">\n            {gestureIndicator.type === \"seek\" && (\n              gestureIndicator.direction === \"left\" ? (\n                <Rewind className=\"w-8 h-8 text-white\" />\n              ) : gestureIndicator.direction === \"right\" ? (\n                <FastForward className=\"w-8 h-8 text-white\" />\n              ) : (\n                <Play className=\"w-8 h-8 text-white\" />\n              )\n            )}\n            {gestureIndicator.type === \"volume\" && (\n              <VolumeIcon className=\"w-8 h-8 text-white\" />\n            )}\n            {gestureIndicator.type === \"brightness\" && (\n              <Sun className=\"w-8 h-8 text-white\" />\n            )}\n            {gestureIndicator.type === \"zoom\" && (\n              gestureIndicator.value.includes(\"In\") ? (\n                <ZoomIn className=\"w-8 h-8 text-white\" />\n              ) : (\n                <ZoomOut className=\"w-8 h-8 text-white\" />\n              )\n            )}\n            <span className=\"text-white font-medium text-lg\">{gestureIndicator.value}</span>\n          </div>\n        </div>\n      )}\n\n      {showScreenshotPreview && screenshots.length > 0 && (\n        <div className=\"absolute inset-0 bg-black/90 z-40 flex items-center justify-center\">\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            className=\"absolute left-4 top-1/2 -translate-y-1/2 text-white\"\n            onClick={() => setCurrentScreenshot((prev) => prev === 0 ? screenshots.length - 1 : prev - 1)}\n          >\n            <ChevronLeft className=\"w-8 h-8\" />\n          </Button>\n          <img \n            src={screenshots[currentScreenshot]} \n            alt={`Preview ${currentScreenshot + 1}`}\n            className=\"max-h-full max-w-full object-contain\"\n          />\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            className=\"absolute right-4 top-1/2 -translate-y-1/2 text-white\"\n            onClick={() => setCurrentScreenshot((prev) => (prev + 1) % screenshots.length)}\n          >\n            <ChevronRight className=\"w-8 h-8\" />\n          </Button>\n          <Button\n            size=\"sm\"\n            variant=\"ghost\"\n            className=\"absolute top-4 right-4 text-white\"\n            onClick={() => setShowScreenshotPreview(false)}\n          >\n            Close\n          </Button>\n          <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 text-white text-sm\">\n            {currentScreenshot + 1} / {screenshots.length}\n          </div>\n        </div>\n      )}\n\n      {showStats && (\n        <div className=\"absolute top-16 left-4 bg-black/80 backdrop-blur-sm rounded-lg p-4 z-30 text-xs text-white/80 space-y-1 font-mono\">\n          <div className=\"text-white font-semibold mb-2 flex items-center gap-2\">\n            <Info className=\"w-4 h-4\" />\n            Stats for Nerds\n          </div>\n          <div>Quality: {QUALITY_OPTIONS.find(q => q.value === quality)?.label}</div>\n          <div>Resolution: {stats.resolution}</div>\n          <div>Bitrate: {stats.bitrate}</div>\n          <div>FPS: {stats.fps}</div>\n          <div>Buffered: {stats.buffered}</div>\n          <div>Dropped frames: {stats.dropped}</div>\n          <div>Latency: {stats.latency}</div>\n          <div>Audio: {AUDIO_OPTIONS.find(a => a.value === audioQuality)?.bitrate}</div>\n          <div>Speed: {playbackSpeed}x</div>\n        </div>\n      )}\n\n      {isControlsLocked && (\n        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30\">\n          <Button\n            size=\"lg\"\n            variant=\"ghost\"\n            className=\"bg-black/50 text-white rounded-full p-4\"\n            onClick={() => setIsControlsLocked(false)}\n            data-testid=\"button-unlock-controls\"\n          >\n            <Lock className=\"w-8 h-8\" />\n          </Button>\n        </div>\n      )}\n\n      <div \n        className={cn(\n          \"absolute top-0 left-0 right-0 p-3 z-10 transition-opacity duration-300 flex items-center justify-between\",\n          showControls && !isControlsLocked ? \"opacity-100\" : \"opacity-0 pointer-events-none\"\n        )}\n      >\n        <div className=\"flex items-center gap-2\">\n          {quality !== \"auto\" && (\n            <Badge variant=\"secondary\" className=\"bg-primary/20 text-primary text-xs\">\n              {QUALITY_OPTIONS.find(q => q.value === quality)?.label}\n            </Badge>\n          )}\n          {playbackSpeed !== 1 && (\n            <Badge variant=\"secondary\" className=\"bg-orange-500/20 text-orange-400 text-xs\">\n              {playbackSpeed}x\n            </Badge>\n          )}\n          {showSubtitles && (\n            <Badge variant=\"secondary\" className=\"bg-blue-500/20 text-blue-400 text-xs\">\n              CC\n            </Badge>\n          )}\n          {isLooping && (\n            <Badge variant=\"secondary\" className=\"bg-green-500/20 text-green-400 text-xs\">\n              Loop\n            </Badge>\n          )}\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                size=\"icon\"\n                variant=\"ghost\"\n                className=\"bg-black/50 text-white hover:bg-black/70\"\n                data-testid=\"button-video-settings\"\n              >\n                <Settings className=\"w-5 h-5\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-56\">\n              <DropdownMenuLabel>Video Settings</DropdownMenuLabel>\n              <DropdownMenuSeparator />\n              \n              <DropdownMenuSub>\n                <DropdownMenuSubTrigger>\n                  <Tv className=\"w-4 h-4 mr-2\" />\n                  Quality: {QUALITY_OPTIONS.find(q => q.value === quality)?.label}\n                </DropdownMenuSubTrigger>\n                <DropdownMenuSubContent>\n                  {QUALITY_OPTIONS.map((option) => (\n                    <DropdownMenuItem\n                      key={option.value}\n                      onClick={() => setQuality(option.value)}\n                      className={quality === option.value ? \"bg-primary/20 text-primary\" : \"\"}\n                    >\n                      <div className=\"flex justify-between w-full\">\n                        <span>{option.label}</span>\n                        <span className=\"text-xs text-muted-foreground\">{option.resolution}</span>\n                      </div>\n                    </DropdownMenuItem>\n                  ))}\n                </DropdownMenuSubContent>\n              </DropdownMenuSub>\n\n              <DropdownMenuSub>\n                <DropdownMenuSubTrigger>\n                  <Volume2 className=\"w-4 h-4 mr-2\" />\n                  Audio: {AUDIO_OPTIONS.find(a => a.value === audioQuality)?.label}\n                </DropdownMenuSubTrigger>\n                <DropdownMenuSubContent>\n                  {AUDIO_OPTIONS.map((option) => (\n                    <DropdownMenuItem\n                      key={option.value}\n                      onClick={() => setAudioQuality(option.value)}\n                      className={audioQuality === option.value ? \"bg-primary/20 text-primary\" : \"\"}\n                    >\n                      <div className=\"flex justify-between w-full\">\n                        <span>{option.label}</span>\n                        <span className=\"text-xs text-muted-foreground\">{option.bitrate}</span>\n                      </div>\n                    </DropdownMenuItem>\n                  ))}\n                </DropdownMenuSubContent>\n              </DropdownMenuSub>\n\n              <DropdownMenuSub>\n                <DropdownMenuSubTrigger>\n                  <Gauge className=\"w-4 h-4 mr-2\" />\n                  Speed: {playbackSpeed}x\n                </DropdownMenuSubTrigger>\n                <DropdownMenuSubContent>\n                  {SPEED_OPTIONS.map((option) => (\n                    <DropdownMenuItem\n                      key={option.value}\n                      onClick={() => setPlaybackSpeed(option.value)}\n                      className={playbackSpeed === option.value ? \"bg-primary/20 text-primary\" : \"\"}\n                    >\n                      {option.label}\n                    </DropdownMenuItem>\n                  ))}\n                </DropdownMenuSubContent>\n              </DropdownMenuSub>\n\n              <DropdownMenuSeparator />\n\n              <DropdownMenuItem onClick={() => setIsTheaterMode(!isTheaterMode)}>\n                <Monitor className=\"w-4 h-4 mr-2\" />\n                Theater Mode\n                {isTheaterMode && <span className=\"ml-auto text-primary\">On</span>}\n              </DropdownMenuItem>\n\n              <DropdownMenuItem onClick={() => setShowSubtitles(!showSubtitles)}>\n                <Subtitles className=\"w-4 h-4 mr-2\" />\n                Subtitles\n                {showSubtitles && <span className=\"ml-auto text-primary\">On</span>}\n              </DropdownMenuItem>\n\n              <DropdownMenuItem onClick={() => setIsLooping(!isLooping)}>\n                <Repeat className=\"w-4 h-4 mr-2\" />\n                Loop\n                {isLooping && <span className=\"ml-auto text-primary\">On</span>}\n              </DropdownMenuItem>\n\n              <DropdownMenuItem onClick={() => setShowStats(!showStats)}>\n                <Info className=\"w-4 h-4 mr-2\" />\n                Stats for Nerds\n                {showStats && <span className=\"ml-auto text-primary\">On</span>}\n              </DropdownMenuItem>\n\n              <DropdownMenuSeparator />\n\n              <div className=\"px-2 py-2\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm flex items-center gap-2\">\n                    <Sun className=\"w-4 h-4\" />\n                    Brightness\n                  </span>\n                  <span className=\"text-xs text-muted-foreground\">{brightness}%</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Button \n                    size=\"icon\" \n                    variant=\"ghost\" \n                    className=\"h-6 w-6\" \n                    onClick={() => setBrightness(Math.max(10, brightness - 10))}\n                    data-testid=\"button-brightness-down\"\n                  >\n                    <ChevronDown className=\"w-4 h-4\" />\n                  </Button>\n                  <Slider\n                    value={[brightness]}\n                    min={10}\n                    max={150}\n                    onValueChange={([val]) => setBrightness(val)}\n                    className=\"flex-1\"\n                    data-testid=\"slider-brightness\"\n                  />\n                  <Button \n                    size=\"icon\" \n                    variant=\"ghost\" \n                    className=\"h-6 w-6\" \n                    onClick={() => setBrightness(Math.min(150, brightness + 10))}\n                    data-testid=\"button-brightness-up\"\n                  >\n                    <ChevronUp className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </div>\n\n              <div className=\"px-2 py-2\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm flex items-center gap-2\">\n                    <VolumeIcon className=\"w-4 h-4\" />\n                    Volume\n                  </span>\n                  <span className=\"text-xs text-muted-foreground\">{isMuted ? 0 : volume}%</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Button \n                    size=\"icon\" \n                    variant=\"ghost\" \n                    className=\"h-6 w-6\" \n                    onClick={() => setIsMuted(!isMuted)}\n                    data-testid=\"button-mute\"\n                  >\n                    <VolumeIcon className=\"w-4 h-4\" />\n                  </Button>\n                  <Slider\n                    value={[isMuted ? 0 : volume]}\n                    min={0}\n                    max={100}\n                    onValueChange={([val]) => {\n                      setVolume(val);\n                      setIsMuted(val === 0);\n                    }}\n                    className=\"flex-1\"\n                    data-testid=\"slider-volume\"\n                  />\n                </div>\n              </div>\n            </DropdownMenuContent>\n          </DropdownMenu>\n\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            className=\"bg-black/50 text-white hover:bg-black/70\"\n            onClick={() => setIsControlsLocked(!isControlsLocked)}\n            data-testid=\"button-lock-controls\"\n          >\n            {isControlsLocked ? <Lock className=\"w-5 h-5\" /> : <Unlock className=\"w-5 h-5\" />}\n          </Button>\n\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            className=\"bg-black/50 text-white hover:bg-black/70\"\n            onClick={togglePiP}\n            data-testid=\"button-pip\"\n          >\n            <PictureInPicture2 className=\"w-5 h-5\" />\n          </Button>\n\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            className={cn(\n              \"bg-black/50 text-white hover:bg-black/70\",\n              isTheaterMode && \"bg-primary/50\"\n            )}\n            onClick={() => setIsTheaterMode(!isTheaterMode)}\n            data-testid=\"button-theater-mode\"\n          >\n            <Monitor className=\"w-5 h-5\" />\n          </Button>\n\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            className=\"bg-black/50 text-white hover:bg-black/70\"\n            onClick={toggleFullscreen}\n            data-testid=\"button-fullscreen\"\n          >\n            {isFullscreen ? (\n              <Minimize className=\"w-5 h-5\" />\n            ) : (\n              <Maximize className=\"w-5 h-5\" />\n            )}\n          </Button>\n        </div>\n      </div>\n\n      <div \n        className={cn(\n          \"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/80 to-transparent z-10 transition-opacity duration-300\",\n          showControls && !isControlsLocked ? \"opacity-100\" : \"opacity-0 pointer-events-none\"\n        )}\n      >\n        <div className=\"flex items-center justify-between gap-4 text-white/80 text-xs mb-2\">\n          <div className=\"flex items-center gap-4\">\n            <Button\n              size=\"icon\"\n              variant=\"ghost\"\n              className=\"h-8 w-8 text-white hover:text-white\"\n              onClick={handleSeekBackward}\n              data-testid=\"button-seek-backward\"\n            >\n              <SkipBack className=\"w-4 h-4\" />\n            </Button>\n            <Button\n              size=\"icon\"\n              variant=\"ghost\"\n              className=\"h-10 w-10 text-white hover:text-white\"\n              onClick={handleTogglePlay}\n              data-testid=\"button-play-pause\"\n            >\n              {isPlaying ? <Pause className=\"w-6 h-6\" /> : <Play className=\"w-6 h-6\" />}\n            </Button>\n            <Button\n              size=\"icon\"\n              variant=\"ghost\"\n              className=\"h-8 w-8 text-white hover:text-white\"\n              onClick={handleSeekForward}\n              data-testid=\"button-seek-forward\"\n            >\n              <SkipForward className=\"w-4 h-4\" />\n            </Button>\n          </div>\n          \n          <div className=\"flex items-center gap-2 flex-1\">\n            <Button\n              size=\"icon\"\n              variant=\"ghost\"\n              className=\"h-8 w-8 text-white hover:text-white\"\n              onClick={() => setIsMuted(!isMuted)}\n              data-testid=\"button-volume-toggle\"\n            >\n              <VolumeIcon className=\"w-4 h-4\" />\n            </Button>\n            <Slider\n              value={[isMuted ? 0 : volume]}\n              min={0}\n              max={100}\n              onValueChange={([val]) => {\n                setVolume(val);\n                setIsMuted(val === 0);\n              }}\n              className=\"w-24\"\n              data-testid=\"slider-volume-bottom\"\n            />\n          </div>\n\n          <div className=\"flex items-center gap-2 text-white/60\">\n            <span>F: Fullscreen</span>\n            <span className=\"hidden md:inline\">T: Theater</span>\n            <span className=\"hidden md:inline\">M: Mute</span>\n            <span className=\"hidden md:inline\">L: Lock</span>\n            <span className=\"hidden lg:inline\">S: Stats</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default VideoPlayer;\n","path":null,"size_bytes":35963,"size_tokens":null},"client/src/pages/Categories.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Header } from \"@/components/Header\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { Footer } from \"@/components/Footer\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { \n  Grid3X3, List, Search, ArrowLeft, TrendingUp,\n  Folder, Star, Heart, Flame, Users, Video\n} from \"lucide-react\";\nimport type { Category } from \"@shared/schema\";\n\nconst categoryIcons: Record<string, any> = {\n  'star': Star,\n  'heart': Heart,\n  'flame': Flame,\n  'users': Users,\n  'video': Video,\n  'folder': Folder,\n};\n\nexport default function Categories() {\n  const { t } = useLanguage();\n  const [, navigate] = useLocation();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [filterQuery, setFilterQuery] = useState(\"\");\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n\n  const { data: categories = [], isLoading } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const filteredCategories = categories.filter(cat =>\n    cat.name.toLowerCase().includes(filterQuery.toLowerCase())\n  );\n\n  const sortedCategories = [...filteredCategories].sort((a, b) => b.count - a.count);\n\n  const handleCategoryClick = (categoryName: string | null) => {\n    if (categoryName) {\n      navigate(`/?category=${encodeURIComponent(categoryName)}`);\n    }\n  };\n\n  const getIcon = (iconName: string) => {\n    const Icon = categoryIcons[iconName] || Folder;\n    return <Icon className=\"w-6 h-6\" />;\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={handleCategoryClick}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-16\">\n        <div className=\"max-w-7xl mx-auto px-4 md:px-8 py-6\">\n          <div className=\"flex items-center gap-4 mb-6\">\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link href=\"/\" data-testid=\"button-back\">\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Link>\n            </Button>\n            <div className=\"flex-1\">\n              <h1 className=\"text-2xl md:text-3xl font-bold flex items-center gap-3\" data-testid=\"text-categories-title\">\n                <Grid3X3 className=\"w-8 h-8 text-primary\" />\n                {t.common.categories}\n              </h1>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                Browse {categories.length} categories\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\n            <div className=\"relative flex-1\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Search categories...\"\n                value={filterQuery}\n                onChange={(e) => setFilterQuery(e.target.value)}\n                className=\"pl-10\"\n                data-testid=\"input-search-categories\"\n              />\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                variant={viewMode === 'grid' ? 'default' : 'outline'}\n                size=\"icon\"\n                onClick={() => setViewMode('grid')}\n                data-testid=\"button-view-grid\"\n              >\n                <Grid3X3 className=\"w-4 h-4\" />\n              </Button>\n              <Button\n                variant={viewMode === 'list' ? 'default' : 'outline'}\n                size=\"icon\"\n                onClick={() => setViewMode('list')}\n                data-testid=\"button-view-list\"\n              >\n                <List className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          </div>\n\n          {isLoading ? (\n            <div className={viewMode === 'grid' \n              ? \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\"\n              : \"space-y-2\"\n            }>\n              {Array.from({ length: 20 }).map((_, i) => (\n                <Skeleton key={i} className={viewMode === 'grid' ? \"h-32 rounded-xl\" : \"h-16 rounded-lg\"} />\n              ))}\n            </div>\n          ) : viewMode === 'grid' ? (\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\">\n              {sortedCategories.map((category, index) => (\n                <Card\n                  key={category.id}\n                  className=\"p-4 cursor-pointer hover-elevate transition-all group\"\n                  onClick={() => handleCategoryClick(category.name)}\n                  data-testid={`category-card-${category.id}`}\n                >\n                  <div className=\"flex flex-col items-center text-center gap-3\">\n                    <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors\">\n                      {getIcon(category.icon)}\n                    </div>\n                    <div>\n                      <h3 className=\"font-medium text-sm line-clamp-1\">{category.name}</h3>\n                      <p className=\"text-xs text-muted-foreground mt-0.5\">\n                        {category.count.toLocaleString()} videos\n                      </p>\n                    </div>\n                    {index < 3 && (\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        <TrendingUp className=\"w-3 h-3 mr-1\" />\n                        Top\n                      </Badge>\n                    )}\n                  </div>\n                </Card>\n              ))}\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {sortedCategories.map((category, index) => (\n                <Card\n                  key={category.id}\n                  className=\"p-4 cursor-pointer hover-elevate transition-all\"\n                  onClick={() => handleCategoryClick(category.name)}\n                  data-testid={`category-list-${category.id}`}\n                >\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                      {getIcon(category.icon)}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"font-medium\">{category.name}</h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {category.count.toLocaleString()} videos\n                      </p>\n                    </div>\n                    {index < 3 && (\n                      <Badge variant=\"secondary\">\n                        <TrendingUp className=\"w-3 h-3 mr-1\" />\n                        Popular\n                      </Badge>\n                    )}\n                  </div>\n                </Card>\n              ))}\n            </div>\n          )}\n\n          {filteredCategories.length === 0 && !isLoading && (\n            <div className=\"text-center py-12\">\n              <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                <Search className=\"w-8 h-8 text-muted-foreground\" />\n              </div>\n              <h3 className=\"text-lg font-medium mb-2\">No categories found</h3>\n              <p className=\"text-muted-foreground\">\n                Try a different search term\n              </p>\n            </div>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":8121,"size_tokens":null},"client/src/lib/firebase.ts":{"content":"import { initializeApp } from \"firebase/app\";\nimport { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, User, sendPasswordResetEmail } from \"firebase/auth\";\nimport { getDatabase, ref, set, get, update, remove, onValue, push, child } from \"firebase/database\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDEBvzh8F4iIAG9NRlZT0ZQEgWHdgOPVzM\",\n  authDomain: \"blue-berry-748cb.firebaseapp.com\",\n  databaseURL: \"https://blue-berry-748cb-default-rtdb.firebaseio.com\",\n  projectId: \"blue-berry-748cb\",\n  storageBucket: \"blue-berry-748cb.firebasestorage.app\",\n  messagingSenderId: \"250482902334\",\n  appId: \"1:250482902334:web:02dfd510b6cca2ed96986f\",\n  measurementId: \"G-8142DGS5WG\"\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const database = getDatabase(app);\n\nexport interface UserProfile {\n  uid: string;\n  email: string;\n  username: string;\n  createdAt: string;\n  lastLoginAt: string;\n  preferences: {\n    darkMode: boolean;\n    autoplay: boolean;\n    quality: string;\n    notifications: boolean;\n  };\n}\n\nexport interface WatchHistoryItem {\n  videoId: string;\n  title: string;\n  thumbnail: string;\n  duration: string;\n  watchedAt: string;\n  progress: number;\n  lastPosition: number;\n}\n\nexport interface FavoriteItem {\n  videoId: string;\n  title: string;\n  thumbnail: string;\n  duration: string;\n  addedAt: string;\n}\n\nexport interface Playlist {\n  id: string;\n  name: string;\n  description: string;\n  createdAt: string;\n  videos: string[];\n  isPublic: boolean;\n}\n\nexport const firebaseAuth = {\n  signIn: async (email: string, password: string) => {\n    try {\n      const result = await signInWithEmailAndPassword(auth, email, password);\n      await updateLastLogin(result.user.uid);\n      return { success: true, user: result.user };\n    } catch (error: any) {\n      return { success: false, error: error.message };\n    }\n  },\n\n  signUp: async (email: string, password: string, username: string) => {\n    try {\n      const result = await createUserWithEmailAndPassword(auth, email, password);\n      await createUserProfile(result.user.uid, email, username);\n      return { success: true, user: result.user };\n    } catch (error: any) {\n      return { success: false, error: error.message };\n    }\n  },\n\n  signOut: async () => {\n    try {\n      await signOut(auth);\n      return { success: true };\n    } catch (error: any) {\n      return { success: false, error: error.message };\n    }\n  },\n\n  resetPassword: async (email: string) => {\n    try {\n      await sendPasswordResetEmail(auth, email);\n      return { success: true };\n    } catch (error: any) {\n      return { success: false, error: error.message };\n    }\n  },\n\n  onAuthChange: (callback: (user: User | null) => void) => {\n    return onAuthStateChanged(auth, callback);\n  }\n};\n\nexport const createUserProfile = async (uid: string, email: string, username: string) => {\n  const userRef = ref(database, `users/${uid}`);\n  const profile: UserProfile = {\n    uid,\n    email,\n    username,\n    createdAt: new Date().toISOString(),\n    lastLoginAt: new Date().toISOString(),\n    preferences: {\n      darkMode: true,\n      autoplay: true,\n      quality: 'auto',\n      notifications: true\n    }\n  };\n  await set(userRef, profile);\n  return profile;\n};\n\nexport const getUserProfile = async (uid: string): Promise<UserProfile | null> => {\n  const userRef = ref(database, `users/${uid}`);\n  const snapshot = await get(userRef);\n  if (snapshot.exists()) {\n    return snapshot.val() as UserProfile;\n  }\n  return null;\n};\n\nexport const updateUserProfile = async (uid: string, updates: Partial<UserProfile>) => {\n  const userRef = ref(database, `users/${uid}`);\n  await update(userRef, updates);\n};\n\nexport const updateUserPreferences = async (uid: string, preferences: Partial<UserProfile['preferences']>) => {\n  const prefsRef = ref(database, `users/${uid}/preferences`);\n  await update(prefsRef, preferences);\n};\n\nconst updateLastLogin = async (uid: string) => {\n  const userRef = ref(database, `users/${uid}`);\n  await update(userRef, { lastLoginAt: new Date().toISOString() });\n};\n\nexport const watchHistoryService = {\n  add: async (uid: string, item: WatchHistoryItem) => {\n    const historyRef = ref(database, `watchHistory/${uid}/${item.videoId}`);\n    await set(historyRef, item);\n  },\n\n  get: async (uid: string): Promise<WatchHistoryItem[]> => {\n    const historyRef = ref(database, `watchHistory/${uid}`);\n    const snapshot = await get(historyRef);\n    if (snapshot.exists()) {\n      const data = snapshot.val();\n      const items: WatchHistoryItem[] = Object.values(data);\n      return items.sort((a, b) => \n        new Date(b.watchedAt).getTime() - new Date(a.watchedAt).getTime()\n      );\n    }\n    return [];\n  },\n\n  updateProgress: async (uid: string, videoId: string, progress: number, lastPosition: number) => {\n    const historyRef = ref(database, `watchHistory/${uid}/${videoId}`);\n    await update(historyRef, { progress, lastPosition, watchedAt: new Date().toISOString() });\n  },\n\n  remove: async (uid: string, videoId: string) => {\n    const historyRef = ref(database, `watchHistory/${uid}/${videoId}`);\n    await remove(historyRef);\n  },\n\n  clear: async (uid: string) => {\n    const historyRef = ref(database, `watchHistory/${uid}`);\n    await remove(historyRef);\n  },\n\n  subscribe: (uid: string, callback: (items: WatchHistoryItem[]) => void) => {\n    const historyRef = ref(database, `watchHistory/${uid}`);\n    return onValue(historyRef, (snapshot) => {\n      if (snapshot.exists()) {\n        const data = snapshot.val();\n        const items: WatchHistoryItem[] = Object.values(data);\n        items.sort((a, b) => new Date(b.watchedAt).getTime() - new Date(a.watchedAt).getTime());\n        callback(items);\n      } else {\n        callback([]);\n      }\n    });\n  }\n};\n\nexport const favoritesService = {\n  add: async (uid: string, item: FavoriteItem) => {\n    const favRef = ref(database, `favorites/${uid}/${item.videoId}`);\n    await set(favRef, item);\n  },\n\n  get: async (uid: string): Promise<FavoriteItem[]> => {\n    const favRef = ref(database, `favorites/${uid}`);\n    const snapshot = await get(favRef);\n    if (snapshot.exists()) {\n      const data = snapshot.val();\n      const items: FavoriteItem[] = Object.values(data);\n      return items.sort((a, b) => \n        new Date(b.addedAt).getTime() - new Date(a.addedAt).getTime()\n      );\n    }\n    return [];\n  },\n\n  remove: async (uid: string, videoId: string) => {\n    const favRef = ref(database, `favorites/${uid}/${videoId}`);\n    await remove(favRef);\n  },\n\n  check: async (uid: string, videoId: string): Promise<boolean> => {\n    const favRef = ref(database, `favorites/${uid}/${videoId}`);\n    const snapshot = await get(favRef);\n    return snapshot.exists();\n  },\n\n  subscribe: (uid: string, callback: (items: FavoriteItem[]) => void) => {\n    const favRef = ref(database, `favorites/${uid}`);\n    return onValue(favRef, (snapshot) => {\n      if (snapshot.exists()) {\n        const data = snapshot.val();\n        const items: FavoriteItem[] = Object.values(data);\n        items.sort((a, b) => new Date(b.addedAt).getTime() - new Date(a.addedAt).getTime());\n        callback(items);\n      } else {\n        callback([]);\n      }\n    });\n  }\n};\n\nexport const watchLaterService = {\n  add: async (uid: string, item: FavoriteItem) => {\n    const wlRef = ref(database, `watchLater/${uid}/${item.videoId}`);\n    await set(wlRef, item);\n  },\n\n  get: async (uid: string): Promise<FavoriteItem[]> => {\n    const wlRef = ref(database, `watchLater/${uid}`);\n    const snapshot = await get(wlRef);\n    if (snapshot.exists()) {\n      const data = snapshot.val();\n      const items: FavoriteItem[] = Object.values(data);\n      return items.sort((a, b) => \n        new Date(b.addedAt).getTime() - new Date(a.addedAt).getTime()\n      );\n    }\n    return [];\n  },\n\n  remove: async (uid: string, videoId: string) => {\n    const wlRef = ref(database, `watchLater/${uid}/${videoId}`);\n    await remove(wlRef);\n  },\n\n  check: async (uid: string, videoId: string): Promise<boolean> => {\n    const wlRef = ref(database, `watchLater/${uid}/${videoId}`);\n    const snapshot = await get(wlRef);\n    return snapshot.exists();\n  },\n\n  subscribe: (uid: string, callback: (items: FavoriteItem[]) => void) => {\n    const wlRef = ref(database, `watchLater/${uid}`);\n    return onValue(wlRef, (snapshot) => {\n      if (snapshot.exists()) {\n        const data = snapshot.val();\n        const items: FavoriteItem[] = Object.values(data);\n        items.sort((a, b) => new Date(b.addedAt).getTime() - new Date(a.addedAt).getTime());\n        callback(items);\n      } else {\n        callback([]);\n      }\n    });\n  }\n};\n\nexport const playlistService = {\n  create: async (uid: string, name: string, description: string = ''): Promise<string> => {\n    const playlistsRef = ref(database, `playlists/${uid}`);\n    const newPlaylistRef = push(playlistsRef);\n    const playlist: Playlist = {\n      id: newPlaylistRef.key!,\n      name,\n      description,\n      createdAt: new Date().toISOString(),\n      videos: [],\n      isPublic: false\n    };\n    await set(newPlaylistRef, playlist);\n    return playlist.id;\n  },\n\n  get: async (uid: string): Promise<Playlist[]> => {\n    const playlistsRef = ref(database, `playlists/${uid}`);\n    const snapshot = await get(playlistsRef);\n    if (snapshot.exists()) {\n      return Object.values(snapshot.val());\n    }\n    return [];\n  },\n\n  addVideo: async (uid: string, playlistId: string, videoId: string) => {\n    const playlistRef = ref(database, `playlists/${uid}/${playlistId}/videos`);\n    const snapshot = await get(playlistRef);\n    const currentVideos = snapshot.exists() ? snapshot.val() : [];\n    if (!currentVideos.includes(videoId)) {\n      await set(playlistRef, [...currentVideos, videoId]);\n    }\n  },\n\n  removeVideo: async (uid: string, playlistId: string, videoId: string) => {\n    const playlistRef = ref(database, `playlists/${uid}/${playlistId}/videos`);\n    const snapshot = await get(playlistRef);\n    if (snapshot.exists()) {\n      const currentVideos = snapshot.val().filter((v: string) => v !== videoId);\n      await set(playlistRef, currentVideos);\n    }\n  },\n\n  delete: async (uid: string, playlistId: string) => {\n    const playlistRef = ref(database, `playlists/${uid}/${playlistId}`);\n    await remove(playlistRef);\n  },\n\n  update: async (uid: string, playlistId: string, updates: Partial<Playlist>) => {\n    const playlistRef = ref(database, `playlists/${uid}/${playlistId}`);\n    await update(playlistRef, updates);\n  }\n};\n\nexport default app;\n","path":null,"size_bytes":10590,"size_tokens":null},"client/src/context/PlaybackContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, useCallback, type ReactNode } from 'react';\n\ntype VideoQuality = \"auto\" | \"2160p\" | \"1440p\" | \"1080p\" | \"720p\" | \"480p\" | \"360p\" | \"240p\";\ntype AudioQuality = \"high\" | \"medium\" | \"low\";\ntype PlaybackSpeed = 0.25 | 0.5 | 0.75 | 1 | 1.25 | 1.5 | 1.75 | 2;\n\ninterface WatchProgress {\n  videoId: string;\n  progress: number;\n  currentTime: number;\n  duration: number;\n  lastWatched: string;\n  title: string;\n  thumbnail: string;\n}\n\ninterface PlaybackSettings {\n  quality: VideoQuality;\n  audioQuality: AudioQuality;\n  playbackSpeed: PlaybackSpeed;\n  autoplay: boolean;\n  autoplayNext: boolean;\n  loop: boolean;\n  muted: boolean;\n  volume: number;\n  brightness: number;\n  subtitles: boolean;\n  theater: boolean;\n  miniPlayer: boolean;\n  gesturesEnabled: boolean;\n  doubleTapSeek: number;\n  skipIntro: boolean;\n  skipCredits: boolean;\n}\n\ninterface PlaybackContextType {\n  settings: PlaybackSettings;\n  updateSettings: (updates: Partial<PlaybackSettings>) => void;\n  resetSettings: () => void;\n  watchProgress: WatchProgress[];\n  saveProgress: (progress: WatchProgress) => void;\n  getProgress: (videoId: string) => WatchProgress | null;\n  clearProgress: (videoId: string) => void;\n  clearAllProgress: () => void;\n  continueWatching: WatchProgress[];\n  recentlyWatched: WatchProgress[];\n}\n\nconst DEFAULT_SETTINGS: PlaybackSettings = {\n  quality: \"auto\",\n  audioQuality: \"high\",\n  playbackSpeed: 1,\n  autoplay: false,\n  autoplayNext: true,\n  loop: false,\n  muted: false,\n  volume: 100,\n  brightness: 100,\n  subtitles: false,\n  theater: false,\n  miniPlayer: false,\n  gesturesEnabled: true,\n  doubleTapSeek: 10,\n  skipIntro: false,\n  skipCredits: false,\n};\n\nconst SETTINGS_KEY = 'blueberry_playback_settings';\nconst PROGRESS_KEY = 'blueberry_watch_progress';\n\nconst PlaybackContext = createContext<PlaybackContextType | undefined>(undefined);\n\nexport function PlaybackProvider({ children }: { children: ReactNode }) {\n  const [settings, setSettings] = useState<PlaybackSettings>(() => {\n    if (typeof window !== 'undefined') {\n      const stored = localStorage.getItem(SETTINGS_KEY);\n      if (stored) {\n        try {\n          return { ...DEFAULT_SETTINGS, ...JSON.parse(stored) };\n        } catch {\n          return DEFAULT_SETTINGS;\n        }\n      }\n    }\n    return DEFAULT_SETTINGS;\n  });\n\n  const [watchProgress, setWatchProgress] = useState<WatchProgress[]>(() => {\n    if (typeof window !== 'undefined') {\n      const stored = localStorage.getItem(PROGRESS_KEY);\n      if (stored) {\n        try {\n          return JSON.parse(stored);\n        } catch {\n          return [];\n        }\n      }\n    }\n    return [];\n  });\n\n  useEffect(() => {\n    localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));\n  }, [settings]);\n\n  useEffect(() => {\n    localStorage.setItem(PROGRESS_KEY, JSON.stringify(watchProgress));\n  }, [watchProgress]);\n\n  const updateSettings = useCallback((updates: Partial<PlaybackSettings>) => {\n    setSettings(prev => ({ ...prev, ...updates }));\n  }, []);\n\n  const resetSettings = useCallback(() => {\n    setSettings(DEFAULT_SETTINGS);\n  }, []);\n\n  const saveProgress = useCallback((progress: WatchProgress) => {\n    setWatchProgress(prev => {\n      const filtered = prev.filter(p => p.videoId !== progress.videoId);\n      return [progress, ...filtered].slice(0, 100);\n    });\n  }, []);\n\n  const getProgress = useCallback((videoId: string): WatchProgress | null => {\n    return watchProgress.find(p => p.videoId === videoId) || null;\n  }, [watchProgress]);\n\n  const clearProgress = useCallback((videoId: string) => {\n    setWatchProgress(prev => prev.filter(p => p.videoId !== videoId));\n  }, []);\n\n  const clearAllProgress = useCallback(() => {\n    setWatchProgress([]);\n  }, []);\n\n  const continueWatching = watchProgress\n    .filter(p => p.progress > 5 && p.progress < 95)\n    .sort((a, b) => new Date(b.lastWatched).getTime() - new Date(a.lastWatched).getTime())\n    .slice(0, 20);\n\n  const recentlyWatched = watchProgress\n    .sort((a, b) => new Date(b.lastWatched).getTime() - new Date(a.lastWatched).getTime())\n    .slice(0, 30);\n\n  return (\n    <PlaybackContext.Provider\n      value={{\n        settings,\n        updateSettings,\n        resetSettings,\n        watchProgress,\n        saveProgress,\n        getProgress,\n        clearProgress,\n        clearAllProgress,\n        continueWatching,\n        recentlyWatched,\n      }}\n    >\n      {children}\n    </PlaybackContext.Provider>\n  );\n}\n\nexport function usePlayback() {\n  const context = useContext(PlaybackContext);\n  if (!context) {\n    throw new Error('usePlayback must be used within a PlaybackProvider');\n  }\n  return context;\n}\n","path":null,"size_bytes":4672,"size_tokens":null},"client/src/hooks/use-video-player.ts":{"content":"import { useState, useCallback, useRef, useEffect } from 'react';\n\nexport interface VideoPlayerState {\n  isPlaying: boolean;\n  isMuted: boolean;\n  volume: number;\n  currentTime: number;\n  duration: number;\n  progress: number;\n  playbackRate: number;\n  isFullscreen: boolean;\n  isTheaterMode: boolean;\n  isPiP: boolean;\n  brightness: number;\n  contrast: number;\n  isLooping: boolean;\n  quality: string;\n  isLoading: boolean;\n  hasError: boolean;\n  buffered: number;\n}\n\nexport interface VideoPlayerActions {\n  play: () => void;\n  pause: () => void;\n  togglePlay: () => void;\n  seek: (time: number) => void;\n  seekRelative: (delta: number) => void;\n  setVolume: (volume: number) => void;\n  toggleMute: () => void;\n  setPlaybackRate: (rate: number) => void;\n  toggleFullscreen: () => void;\n  toggleTheaterMode: () => void;\n  togglePiP: () => void;\n  setBrightness: (brightness: number) => void;\n  setContrast: (contrast: number) => void;\n  toggleLoop: () => void;\n  setQuality: (quality: string) => void;\n  skipForward: (seconds?: number) => void;\n  skipBackward: (seconds?: number) => void;\n}\n\nconst DEFAULT_SKIP_SECONDS = 10;\n\nconst PLAYBACK_RATES = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2];\nconst QUALITY_OPTIONS = ['auto', '1080p', '720p', '480p', '360p', '240p'];\n\nexport function useVideoPlayer(containerRef: React.RefObject<HTMLElement>) {\n  const [state, setState] = useState<VideoPlayerState>({\n    isPlaying: false,\n    isMuted: false,\n    volume: 1,\n    currentTime: 0,\n    duration: 0,\n    progress: 0,\n    playbackRate: 1,\n    isFullscreen: false,\n    isTheaterMode: false,\n    isPiP: false,\n    brightness: 100,\n    contrast: 100,\n    isLooping: false,\n    quality: 'auto',\n    isLoading: true,\n    hasError: false,\n    buffered: 0,\n  });\n\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n\n  const play = useCallback(() => {\n    videoRef.current?.play();\n    setState(prev => ({ ...prev, isPlaying: true }));\n  }, []);\n\n  const pause = useCallback(() => {\n    videoRef.current?.pause();\n    setState(prev => ({ ...prev, isPlaying: false }));\n  }, []);\n\n  const togglePlay = useCallback(() => {\n    if (state.isPlaying) {\n      pause();\n    } else {\n      play();\n    }\n  }, [state.isPlaying, play, pause]);\n\n  const seek = useCallback((time: number) => {\n    if (videoRef.current) {\n      videoRef.current.currentTime = Math.max(0, Math.min(time, state.duration));\n    }\n  }, [state.duration]);\n\n  const seekRelative = useCallback((delta: number) => {\n    if (videoRef.current) {\n      const newTime = videoRef.current.currentTime + delta;\n      videoRef.current.currentTime = Math.max(0, Math.min(newTime, state.duration));\n    }\n  }, [state.duration]);\n\n  const setVolume = useCallback((volume: number) => {\n    const clampedVolume = Math.max(0, Math.min(1, volume));\n    if (videoRef.current) {\n      videoRef.current.volume = clampedVolume;\n    }\n    setState(prev => ({ \n      ...prev, \n      volume: clampedVolume,\n      isMuted: clampedVolume === 0 \n    }));\n  }, []);\n\n  const toggleMute = useCallback(() => {\n    if (videoRef.current) {\n      videoRef.current.muted = !state.isMuted;\n    }\n    setState(prev => ({ ...prev, isMuted: !prev.isMuted }));\n  }, [state.isMuted]);\n\n  const setPlaybackRate = useCallback((rate: number) => {\n    if (videoRef.current) {\n      videoRef.current.playbackRate = rate;\n    }\n    setState(prev => ({ ...prev, playbackRate: rate }));\n  }, []);\n\n  const toggleFullscreen = useCallback(async () => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    try {\n      if (!document.fullscreenElement) {\n        await container.requestFullscreen();\n        setState(prev => ({ ...prev, isFullscreen: true }));\n      } else {\n        await document.exitFullscreen();\n        setState(prev => ({ ...prev, isFullscreen: false }));\n      }\n    } catch (err) {\n      console.error('Fullscreen error:', err);\n    }\n  }, [containerRef]);\n\n  const toggleTheaterMode = useCallback(() => {\n    setState(prev => ({ ...prev, isTheaterMode: !prev.isTheaterMode }));\n  }, []);\n\n  const togglePiP = useCallback(async () => {\n    try {\n      if (!document.pictureInPictureElement && videoRef.current) {\n        await videoRef.current.requestPictureInPicture();\n        setState(prev => ({ ...prev, isPiP: true }));\n      } else if (document.pictureInPictureElement) {\n        await document.exitPictureInPicture();\n        setState(prev => ({ ...prev, isPiP: false }));\n      }\n    } catch (err) {\n      console.error('PiP error:', err);\n    }\n  }, []);\n\n  const setBrightness = useCallback((brightness: number) => {\n    const clampedBrightness = Math.max(10, Math.min(200, brightness));\n    setState(prev => ({ ...prev, brightness: clampedBrightness }));\n  }, []);\n\n  const setContrast = useCallback((contrast: number) => {\n    const clampedContrast = Math.max(50, Math.min(200, contrast));\n    setState(prev => ({ ...prev, contrast: clampedContrast }));\n  }, []);\n\n  const toggleLoop = useCallback(() => {\n    if (videoRef.current) {\n      videoRef.current.loop = !state.isLooping;\n    }\n    setState(prev => ({ ...prev, isLooping: !prev.isLooping }));\n  }, [state.isLooping]);\n\n  const setQuality = useCallback((quality: string) => {\n    setState(prev => ({ ...prev, quality }));\n  }, []);\n\n  const skipForward = useCallback((seconds = DEFAULT_SKIP_SECONDS) => {\n    seekRelative(seconds);\n  }, [seekRelative]);\n\n  const skipBackward = useCallback((seconds = DEFAULT_SKIP_SECONDS) => {\n    seekRelative(-seconds);\n  }, [seekRelative]);\n\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      setState(prev => ({ ...prev, isFullscreen: !!document.fullscreenElement }));\n    };\n\n    const handlePiPChange = () => {\n      setState(prev => ({ ...prev, isPiP: !!document.pictureInPictureElement }));\n    };\n\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    document.addEventListener('enterpictureinpicture', handlePiPChange);\n    document.addEventListener('leavepictureinpicture', handlePiPChange);\n\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n      document.removeEventListener('enterpictureinpicture', handlePiPChange);\n      document.removeEventListener('leavepictureinpicture', handlePiPChange);\n    };\n  }, []);\n\n  const actions: VideoPlayerActions = {\n    play,\n    pause,\n    togglePlay,\n    seek,\n    seekRelative,\n    setVolume,\n    toggleMute,\n    setPlaybackRate,\n    toggleFullscreen,\n    toggleTheaterMode,\n    togglePiP,\n    setBrightness,\n    setContrast,\n    toggleLoop,\n    setQuality,\n    skipForward,\n    skipBackward,\n  };\n\n  return {\n    state,\n    actions,\n    videoRef,\n    playbackRates: PLAYBACK_RATES,\n    qualityOptions: QUALITY_OPTIONS,\n  };\n}\n\nexport function useKeyboardShortcuts(\n  actions: VideoPlayerActions,\n  state: VideoPlayerState,\n  enabled = true\n) {\n  useEffect(() => {\n    if (!enabled) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement) {\n        return;\n      }\n\n      switch (e.key.toLowerCase()) {\n        case ' ':\n        case 'k':\n          e.preventDefault();\n          actions.togglePlay();\n          break;\n        case 'f':\n          e.preventDefault();\n          actions.toggleFullscreen();\n          break;\n        case 't':\n          e.preventDefault();\n          actions.toggleTheaterMode();\n          break;\n        case 'p':\n          e.preventDefault();\n          actions.togglePiP();\n          break;\n        case 'm':\n          e.preventDefault();\n          actions.toggleMute();\n          break;\n        case 'l':\n          e.preventDefault();\n          actions.toggleLoop();\n          break;\n        case 'arrowleft':\n          e.preventDefault();\n          if (e.shiftKey) {\n            actions.skipBackward(30);\n          } else {\n            actions.skipBackward(10);\n          }\n          break;\n        case 'arrowright':\n          e.preventDefault();\n          if (e.shiftKey) {\n            actions.skipForward(30);\n          } else {\n            actions.skipForward(10);\n          }\n          break;\n        case 'arrowup':\n          e.preventDefault();\n          if (e.shiftKey) {\n            actions.setBrightness(state.brightness + 10);\n          } else {\n            actions.setVolume(state.volume + 0.1);\n          }\n          break;\n        case 'arrowdown':\n          e.preventDefault();\n          if (e.shiftKey) {\n            actions.setBrightness(state.brightness - 10);\n          } else {\n            actions.setVolume(state.volume - 0.1);\n          }\n          break;\n        case 'j':\n          e.preventDefault();\n          actions.skipBackward(10);\n          break;\n        case '>':\n          e.preventDefault();\n          const currentIndex = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2].indexOf(state.playbackRate);\n          if (currentIndex < 7) {\n            actions.setPlaybackRate([0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2][currentIndex + 1]);\n          }\n          break;\n        case '<':\n          e.preventDefault();\n          const currIndex = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2].indexOf(state.playbackRate);\n          if (currIndex > 0) {\n            actions.setPlaybackRate([0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2][currIndex - 1]);\n          }\n          break;\n        case '0':\n        case '1':\n        case '2':\n        case '3':\n        case '4':\n        case '5':\n        case '6':\n        case '7':\n        case '8':\n        case '9':\n          e.preventDefault();\n          const percent = parseInt(e.key) / 10;\n          actions.seek(state.duration * percent);\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [actions, state, enabled]);\n}\n","path":null,"size_bytes":9826,"size_tokens":null},"client/src/pages/PerformerDetail.tsx":{"content":"import { useState } from \"react\";\nimport { useParams, useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { VideoGrid } from \"@/components/VideoGrid\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { ArrowLeft, Heart, Share2, Video, Eye, Star, SlidersHorizontal } from \"lucide-react\";\nimport type { Category, PaginatedVideos, Performer } from \"@shared/schema\";\n\ntype SortOption = \"popular\" | \"newest\" | \"longest\";\n\nexport default function PerformerDetail() {\n  const { name } = useParams<{ name: string }>();\n  const [, navigate] = useLocation();\n  const { t } = useLanguage();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const [sortBy, setSortBy] = useState<SortOption>(\"popular\");\n  const [isFollowing, setIsFollowing] = useState(false);\n\n  const performerName = decodeURIComponent(name || \"\");\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const { data: performers = [] } = useQuery<Performer[]>({\n    queryKey: [\"/api/performers\"],\n  });\n\n  const { data: videosData, isLoading } = useQuery<PaginatedVideos>({\n    queryKey: [`/api/videos/performer/${performerName}?page=${page}`],\n  });\n\n  const performer = performers.find(\n    (p) => p.name.toLowerCase() === performerName.toLowerCase()\n  );\n\n  const videos = videosData?.videos || [];\n\n  const sortedVideos = [...videos].sort((a, b) => {\n    switch (sortBy) {\n      case \"newest\":\n        return 0;\n      case \"longest\":\n        return b.durationSeconds - a.durationSeconds;\n      case \"popular\":\n      default:\n        return b.viewsCount - a.viewsCount;\n    }\n  });\n\n  const totalViews = videos.reduce((acc, v) => acc + v.viewsCount, 0);\n  const avgRating = 4.5;\n\n  const handlePrevPage = () => {\n    if (page > 1) setPage(page - 1);\n  };\n\n  const handleNextPage = () => {\n    if (videosData?.hasNext) setPage(page + 1);\n  };\n\n  const handleShare = () => {\n    if (navigator.share) {\n      navigator.share({\n        title: performerName,\n        url: window.location.href,\n      });\n    } else {\n      navigator.clipboard.writeText(window.location.href);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory=\"\"\n        onCategorySelect={(cat) => cat && navigate(`/category/${encodeURIComponent(cat)}`)}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-20 pb-8 px-4 md:px-8\">\n        <div className=\"max-w-7xl mx-auto\">\n          <Button\n            variant=\"ghost\"\n            onClick={() => navigate(\"/performers\")}\n            className=\"mb-6\"\n            data-testid=\"button-back-performers\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            All Performers\n          </Button>\n\n          <div className=\"bg-gradient-to-r from-primary/10 via-background to-accent/10 rounded-2xl p-6 md:p-8 mb-8\">\n            <div className=\"flex flex-col md:flex-row items-center md:items-start gap-6\">\n              <Avatar className=\"w-32 h-32 md:w-40 md:h-40 border-4 border-background shadow-xl\">\n                <AvatarImage src=\"\" alt={performerName} />\n                <AvatarFallback className=\"text-4xl bg-primary/20\">\n                  {performerName.charAt(0).toUpperCase()}\n                </AvatarFallback>\n              </Avatar>\n\n              <div className=\"flex-1 text-center md:text-left\">\n                <h1 className=\"text-3xl md:text-4xl font-bold mb-2\" data-testid=\"text-performer-name\">\n                  {performerName}\n                </h1>\n\n                <div className=\"flex flex-wrap justify-center md:justify-start items-center gap-4 text-sm text-muted-foreground mb-4\">\n                  <div className=\"flex items-center gap-1\">\n                    <Video className=\"w-4 h-4\" />\n                    <span>{performer?.videoCount || videos.length} videos</span>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <Eye className=\"w-4 h-4\" />\n                    <span>{(totalViews / 1000000).toFixed(1)}M views</span>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <Star className=\"w-4 h-4 fill-yellow-500 text-yellow-500\" />\n                    <span>{avgRating.toFixed(1)}</span>\n                  </div>\n                </div>\n\n                <div className=\"flex flex-wrap justify-center md:justify-start gap-3\">\n                  <Button\n                    variant={isFollowing ? \"secondary\" : \"default\"}\n                    onClick={() => setIsFollowing(!isFollowing)}\n                    data-testid=\"button-follow\"\n                  >\n                    <Heart className={`w-4 h-4 mr-2 ${isFollowing ? \"fill-current\" : \"\"}`} />\n                    {isFollowing ? \"Following\" : \"Follow\"}\n                  </Button>\n                  <Button variant=\"outline\" onClick={handleShare} data-testid=\"button-share\">\n                    <Share2 className=\"w-4 h-4 mr-2\" />\n                    Share\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6\">\n            <h2 className=\"text-xl font-semibold\">Videos</h2>\n\n            <Select value={sortBy} onValueChange={(v) => setSortBy(v as SortOption)}>\n              <SelectTrigger className=\"w-[160px]\" data-testid=\"select-sort\">\n                <SlidersHorizontal className=\"w-4 h-4 mr-2\" />\n                <SelectValue placeholder=\"Sort by\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"popular\">Most Popular</SelectItem>\n                <SelectItem value=\"newest\">Newest</SelectItem>\n                <SelectItem value=\"longest\">Longest</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          {isLoading ? (\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n              {Array.from({ length: 10 }).map((_, i) => (\n                <div key={i} className=\"space-y-2\">\n                  <Skeleton className=\"aspect-video rounded-lg\" />\n                  <Skeleton className=\"h-4 w-3/4\" />\n                  <Skeleton className=\"h-3 w-1/2\" />\n                </div>\n              ))}\n            </div>\n          ) : sortedVideos.length === 0 ? (\n            <div className=\"text-center py-20\">\n              <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                <Video className=\"w-10 h-10 text-muted-foreground\" />\n              </div>\n              <h2 className=\"text-xl font-semibold mb-2\">No videos found</h2>\n              <p className=\"text-muted-foreground mb-6\">\n                There are no videos from this performer yet\n              </p>\n              <Button onClick={() => navigate(\"/performers\")} variant=\"outline\">\n                Browse Performers\n              </Button>\n            </div>\n          ) : (\n            <>\n              <VideoGrid videos={sortedVideos} />\n\n              {videosData && videosData.totalPages > 1 && (\n                <div className=\"flex items-center justify-center gap-4 mt-8\">\n                  <Button\n                    variant=\"outline\"\n                    onClick={handlePrevPage}\n                    disabled={page === 1}\n                    data-testid=\"button-prev-page\"\n                  >\n                    Previous\n                  </Button>\n                  <span className=\"text-sm text-muted-foreground\">\n                    Page {page} of {videosData.totalPages}\n                  </span>\n                  <Button\n                    variant=\"outline\"\n                    onClick={handleNextPage}\n                    disabled={!videosData.hasNext}\n                    data-testid=\"button-next-page\"\n                  >\n                    Next\n                  </Button>\n                </div>\n              )}\n            </>\n          )}\n\n          {performers.length > 0 && (\n            <div className=\"mt-12\">\n              <h2 className=\"text-xl font-semibold mb-4\">Related Performers</h2>\n              <div className=\"flex gap-4 overflow-x-auto pb-4\">\n                {performers\n                  .filter((p) => p.name !== performerName)\n                  .slice(0, 8)\n                  .map((p) => (\n                    <button\n                      key={p.id}\n                      onClick={() => navigate(`/performer/${encodeURIComponent(p.name)}`)}\n                      className=\"flex flex-col items-center gap-2 min-w-[100px] hover-elevate p-3 rounded-lg\"\n                      data-testid={`performer-card-${p.id}`}\n                    >\n                      <Avatar className=\"w-16 h-16\">\n                        <AvatarFallback className=\"bg-muted\">\n                          {p.name.charAt(0).toUpperCase()}\n                        </AvatarFallback>\n                      </Avatar>\n                      <span className=\"text-sm font-medium text-center truncate w-full\">\n                        {p.name}\n                      </span>\n                    </button>\n                  ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":10175,"size_tokens":null},"client/src/pages/PlaybackSettings.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { \n  Play, Volume2, Monitor, Gauge, RotateCcw, Save, \n  Maximize, Repeat, FastForward, Rewind, SkipForward\n} from \"lucide-react\";\nimport type { Category } from \"@shared/schema\";\n\ninterface PlaybackSettings {\n  defaultQuality: string;\n  autoplay: boolean;\n  autoplayNext: boolean;\n  defaultVolume: number;\n  defaultPlaybackRate: number;\n  theaterModeDefault: boolean;\n  showProgressBar: boolean;\n  rememberPosition: boolean;\n  skipIntroEnabled: boolean;\n  skipIntroDuration: number;\n  loopVideo: boolean;\n  hideControls: boolean;\n  hideControlsDelay: number;\n}\n\nconst STORAGE_KEY = \"blueberry_playback_settings\";\n\nconst defaultSettings: PlaybackSettings = {\n  defaultQuality: \"auto\",\n  autoplay: false,\n  autoplayNext: true,\n  defaultVolume: 80,\n  defaultPlaybackRate: 1,\n  theaterModeDefault: false,\n  showProgressBar: true,\n  rememberPosition: true,\n  skipIntroEnabled: false,\n  skipIntroDuration: 30,\n  loopVideo: false,\n  hideControls: true,\n  hideControlsDelay: 3,\n};\n\nconst playbackRates = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2];\nconst qualityOptions = [\"auto\", \"1080p\", \"720p\", \"480p\", \"360p\"];\n\nexport default function PlaybackSettings() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [settings, setSettings] = useState<PlaybackSettings>(defaultSettings);\n  const [hasChanges, setHasChanges] = useState(false);\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  useEffect(() => {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      try {\n        setSettings({ ...defaultSettings, ...JSON.parse(stored) });\n      } catch {\n        setSettings(defaultSettings);\n      }\n    }\n  }, []);\n\n  const updateSetting = <K extends keyof PlaybackSettings>(\n    key: K,\n    value: PlaybackSettings[K]\n  ) => {\n    setSettings((prev) => ({ ...prev, [key]: value }));\n    setHasChanges(true);\n  };\n\n  const handleSave = () => {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(settings));\n    setHasChanges(false);\n    toast({\n      title: \"Settings saved\",\n      description: \"Your playback preferences have been saved\",\n    });\n  };\n\n  const handleReset = () => {\n    setSettings(defaultSettings);\n    localStorage.removeItem(STORAGE_KEY);\n    setHasChanges(false);\n    toast({\n      title: \"Settings reset\",\n      description: \"Playback settings have been reset to defaults\",\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-20 pb-8 px-4 md:px-8\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h1 className=\"text-3xl font-bold flex items-center gap-3\" data-testid=\"text-playback-title\">\n                <Play className=\"w-8 h-8 text-primary\" />\n                Playback Settings\n              </h1>\n              <p className=\"text-muted-foreground mt-1\">\n                Configure video playback preferences\n              </p>\n            </div>\n          </div>\n\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Monitor className=\"w-5 h-5\" />\n                  Quality & Display\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div>\n                  <Label className=\"mb-3 block\">Default Video Quality</Label>\n                  <Select\n                    value={settings.defaultQuality}\n                    onValueChange={(val) => updateSetting(\"defaultQuality\", val)}\n                  >\n                    <SelectTrigger data-testid=\"select-quality\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {qualityOptions.map((q) => (\n                        <SelectItem key={q} value={q}>\n                          {q === \"auto\" ? \"Auto (Recommended)\" : q}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"theater-default\" className=\"cursor-pointer\">\n                    <div>\n                      <p>Theater Mode by Default</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Open videos in theater mode\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"theater-default\"\n                    checked={settings.theaterModeDefault}\n                    onCheckedChange={(val) => updateSetting(\"theaterModeDefault\", val)}\n                    data-testid=\"switch-theater-default\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"show-progress\" className=\"cursor-pointer\">\n                    <div>\n                      <p>Show Progress Bar</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Display video progress in thumbnails\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"show-progress\"\n                    checked={settings.showProgressBar}\n                    onCheckedChange={(val) => updateSetting(\"showProgressBar\", val)}\n                    data-testid=\"switch-show-progress\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <FastForward className=\"w-5 h-5\" />\n                  Autoplay\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"autoplay\" className=\"cursor-pointer\">\n                    <div>\n                      <p>Autoplay Videos</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Automatically start playing when opening a video\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"autoplay\"\n                    checked={settings.autoplay}\n                    onCheckedChange={(val) => updateSetting(\"autoplay\", val)}\n                    data-testid=\"switch-autoplay\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"autoplay-next\" className=\"cursor-pointer\">\n                    <div>\n                      <p>Autoplay Next Video</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Play related videos automatically after a video ends\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"autoplay-next\"\n                    checked={settings.autoplayNext}\n                    onCheckedChange={(val) => updateSetting(\"autoplayNext\", val)}\n                    data-testid=\"switch-autoplay-next\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"loop\" className=\"cursor-pointer\">\n                    <div className=\"flex items-center gap-2\">\n                      <Repeat className=\"w-4 h-4\" />\n                      <div>\n                        <p>Loop Video</p>\n                        <p className=\"text-xs text-muted-foreground font-normal\">\n                          Repeat the video when it ends\n                        </p>\n                      </div>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"loop\"\n                    checked={settings.loopVideo}\n                    onCheckedChange={(val) => updateSetting(\"loopVideo\", val)}\n                    data-testid=\"switch-loop\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Volume2 className=\"w-5 h-5\" />\n                  Audio\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <Label>Default Volume</Label>\n                    <span className=\"text-sm text-muted-foreground\">{settings.defaultVolume}%</span>\n                  </div>\n                  <Slider\n                    value={[settings.defaultVolume]}\n                    min={0}\n                    max={100}\n                    onValueChange={([val]) => updateSetting(\"defaultVolume\", val)}\n                    data-testid=\"slider-volume\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Gauge className=\"w-5 h-5\" />\n                  Speed\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label className=\"mb-3 block\">Default Playback Speed</Label>\n                  <Select\n                    value={settings.defaultPlaybackRate.toString()}\n                    onValueChange={(val) => updateSetting(\"defaultPlaybackRate\", parseFloat(val))}\n                  >\n                    <SelectTrigger data-testid=\"select-playback-rate\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {playbackRates.map((rate) => (\n                        <SelectItem key={rate} value={rate.toString()}>\n                          {rate === 1 ? \"Normal\" : `${rate}x`}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <SkipForward className=\"w-5 h-5\" />\n                  Skip & Resume\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"remember-position\" className=\"cursor-pointer\">\n                    <div>\n                      <p>Remember Playback Position</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Continue where you left off\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"remember-position\"\n                    checked={settings.rememberPosition}\n                    onCheckedChange={(val) => updateSetting(\"rememberPosition\", val)}\n                    data-testid=\"switch-remember-position\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"skip-intro\" className=\"cursor-pointer\">\n                    <div>\n                      <p>Skip Intro</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Show skip intro button at start of videos\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"skip-intro\"\n                    checked={settings.skipIntroEnabled}\n                    onCheckedChange={(val) => updateSetting(\"skipIntroEnabled\", val)}\n                    data-testid=\"switch-skip-intro\"\n                  />\n                </div>\n\n                {settings.skipIntroEnabled && (\n                  <div>\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <Label>Skip Duration</Label>\n                      <span className=\"text-sm text-muted-foreground\">{settings.skipIntroDuration}s</span>\n                    </div>\n                    <Slider\n                      value={[settings.skipIntroDuration]}\n                      min={5}\n                      max={120}\n                      step={5}\n                      onValueChange={([val]) => updateSetting(\"skipIntroDuration\", val)}\n                      data-testid=\"slider-skip-duration\"\n                    />\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Maximize className=\"w-5 h-5\" />\n                  Controls\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"hide-controls\" className=\"cursor-pointer\">\n                    <div>\n                      <p>Auto-hide Controls</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Hide player controls after inactivity\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"hide-controls\"\n                    checked={settings.hideControls}\n                    onCheckedChange={(val) => updateSetting(\"hideControls\", val)}\n                    data-testid=\"switch-hide-controls\"\n                  />\n                </div>\n\n                {settings.hideControls && (\n                  <div>\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <Label>Hide After</Label>\n                      <span className=\"text-sm text-muted-foreground\">{settings.hideControlsDelay}s</span>\n                    </div>\n                    <Slider\n                      value={[settings.hideControlsDelay]}\n                      min={1}\n                      max={10}\n                      onValueChange={([val]) => updateSetting(\"hideControlsDelay\", val)}\n                      data-testid=\"slider-hide-delay\"\n                    />\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            <div className=\"flex gap-4\">\n              <Button\n                variant=\"outline\"\n                onClick={handleReset}\n                className=\"flex-1\"\n                data-testid=\"button-reset-playback\"\n              >\n                <RotateCcw className=\"w-4 h-4 mr-2\" />\n                Reset to Defaults\n              </Button>\n              <Button\n                onClick={handleSave}\n                disabled={!hasChanges}\n                className=\"flex-1\"\n                data-testid=\"button-save-playback\"\n              >\n                <Save className=\"w-4 h-4 mr-2\" />\n                Save Changes\n              </Button>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":16842,"size_tokens":null},"client/src/pages/Feedback.tsx":{"content":"import { useState } from \"react\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { MessageSquare, Send, Bug, Lightbulb, ThumbsUp, Star, CheckCircle2 } from \"lucide-react\";\nimport type { Category } from \"@shared/schema\";\n\ntype FeedbackType = \"bug\" | \"feature\" | \"general\" | \"praise\";\n\nconst feedbackTypes: { value: FeedbackType; label: string; icon: typeof Bug; color: string }[] = [\n  { value: \"bug\", label: \"Report Bug\", icon: Bug, color: \"text-red-500\" },\n  { value: \"feature\", label: \"Feature Request\", icon: Lightbulb, color: \"text-yellow-500\" },\n  { value: \"general\", label: \"General Feedback\", icon: MessageSquare, color: \"text-blue-500\" },\n  { value: \"praise\", label: \"Send Praise\", icon: ThumbsUp, color: \"text-green-500\" },\n];\n\nexport default function Feedback() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [feedbackType, setFeedbackType] = useState<FeedbackType>(\"general\");\n  const [subject, setSubject] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [rating, setRating] = useState(0);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!message.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter your feedback message\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    await new Promise((resolve) => setTimeout(resolve, 1500));\n\n    setIsSubmitting(false);\n    setIsSubmitted(true);\n\n    toast({\n      title: \"Feedback submitted\",\n      description: \"Thank you for your feedback! We appreciate it.\",\n    });\n  };\n\n  const handleReset = () => {\n    setFeedbackType(\"general\");\n    setSubject(\"\");\n    setMessage(\"\");\n    setEmail(\"\");\n    setRating(0);\n    setIsSubmitted(false);\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-20 pb-8 px-4 md:px-8\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"text-center mb-8\">\n            <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-primary/10 flex items-center justify-center\">\n              <MessageSquare className=\"w-10 h-10 text-primary\" />\n            </div>\n            <h1 className=\"text-3xl font-bold mb-2\" data-testid=\"text-feedback-title\">\n              Send Feedback\n            </h1>\n            <p className=\"text-muted-foreground\">\n              Help us improve by sharing your thoughts\n            </p>\n          </div>\n\n          {isSubmitted ? (\n            <Card>\n              <CardContent className=\"py-12 text-center\">\n                <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-green-500/20 flex items-center justify-center\">\n                  <CheckCircle2 className=\"w-8 h-8 text-green-500\" />\n                </div>\n                <h2 className=\"text-xl font-semibold mb-2\">Thank you!</h2>\n                <p className=\"text-muted-foreground mb-6\">\n                  Your feedback has been submitted successfully. We appreciate you taking the time to help us improve.\n                </p>\n                <Button onClick={handleReset}>Send Another</Button>\n              </CardContent>\n            </Card>\n          ) : (\n            <Card>\n              <CardHeader>\n                <CardTitle>Your Feedback</CardTitle>\n                <CardDescription>\n                  Select a feedback type and share your thoughts\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n                    {feedbackTypes.map((type) => (\n                      <button\n                        key={type.value}\n                        type=\"button\"\n                        onClick={() => setFeedbackType(type.value)}\n                        className={`p-4 rounded-lg border-2 transition-all ${\n                          feedbackType === type.value\n                            ? \"border-primary bg-primary/10\"\n                            : \"border-border hover:border-primary/50\"\n                        }`}\n                        data-testid={`button-feedback-type-${type.value}`}\n                      >\n                        <type.icon className={`w-6 h-6 mx-auto mb-2 ${type.color}`} />\n                        <span className=\"text-sm font-medium block\">{type.label}</span>\n                      </button>\n                    ))}\n                  </div>\n\n                  {feedbackType === \"praise\" && (\n                    <div>\n                      <Label className=\"mb-3 block\">Rate your experience</Label>\n                      <div className=\"flex gap-2\">\n                        {[1, 2, 3, 4, 5].map((star) => (\n                          <button\n                            key={star}\n                            type=\"button\"\n                            onClick={() => setRating(star)}\n                            className=\"p-1\"\n                            data-testid={`button-star-${star}`}\n                          >\n                            <Star\n                              className={`w-8 h-8 transition-colors ${\n                                star <= rating\n                                  ? \"fill-yellow-500 text-yellow-500\"\n                                  : \"text-muted-foreground\"\n                              }`}\n                            />\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  <div>\n                    <Label htmlFor=\"subject\">Subject (optional)</Label>\n                    <Input\n                      id=\"subject\"\n                      placeholder=\"Brief summary of your feedback\"\n                      value={subject}\n                      onChange={(e) => setSubject(e.target.value)}\n                      className=\"mt-2\"\n                      data-testid=\"input-feedback-subject\"\n                    />\n                  </div>\n\n                  <div>\n                    <Label htmlFor=\"message\">Message *</Label>\n                    <Textarea\n                      id=\"message\"\n                      placeholder={\n                        feedbackType === \"bug\"\n                          ? \"Please describe the bug and steps to reproduce it...\"\n                          : feedbackType === \"feature\"\n                          ? \"Describe the feature you'd like to see...\"\n                          : \"Share your thoughts with us...\"\n                      }\n                      value={message}\n                      onChange={(e) => setMessage(e.target.value)}\n                      className=\"mt-2 min-h-[150px]\"\n                      data-testid=\"textarea-feedback-message\"\n                    />\n                  </div>\n\n                  <div>\n                    <Label htmlFor=\"email\">Email (optional)</Label>\n                    <Input\n                      id=\"email\"\n                      type=\"email\"\n                      placeholder=\"Your email for follow-up\"\n                      value={email}\n                      onChange={(e) => setEmail(e.target.value)}\n                      className=\"mt-2\"\n                      data-testid=\"input-feedback-email\"\n                    />\n                    <p className=\"text-xs text-muted-foreground mt-1\">\n                      We may contact you for more details if needed\n                    </p>\n                  </div>\n\n                  <Button\n                    type=\"submit\"\n                    className=\"w-full\"\n                    disabled={isSubmitting || !message.trim()}\n                    data-testid=\"button-submit-feedback\"\n                  >\n                    {isSubmitting ? (\n                      \"Submitting...\"\n                    ) : (\n                      <>\n                        <Send className=\"w-4 h-4 mr-2\" />\n                        Submit Feedback\n                      </>\n                    )}\n                  </Button>\n                </form>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":9560,"size_tokens":null},"client/src/pages/AccessibilitySettings.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { \n  Accessibility, Eye, Volume2, Type, Contrast, \n  MousePointer, Keyboard, RotateCcw, Save\n} from \"lucide-react\";\nimport type { Category } from \"@shared/schema\";\n\ninterface AccessibilitySettings {\n  fontSize: number;\n  highContrast: boolean;\n  reduceMotion: boolean;\n  screenReader: boolean;\n  keyboardNavigation: boolean;\n  autoplayVideos: boolean;\n  mutedByDefault: boolean;\n  colorBlindMode: string;\n  cursorSize: string;\n  focusIndicator: boolean;\n}\n\nconst STORAGE_KEY = \"blueberry_accessibility\";\n\nconst defaultSettings: AccessibilitySettings = {\n  fontSize: 100,\n  highContrast: false,\n  reduceMotion: false,\n  screenReader: false,\n  keyboardNavigation: true,\n  autoplayVideos: false,\n  mutedByDefault: false,\n  colorBlindMode: \"none\",\n  cursorSize: \"default\",\n  focusIndicator: true,\n};\n\nexport default function AccessibilitySettings() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [settings, setSettings] = useState<AccessibilitySettings>(defaultSettings);\n  const [hasChanges, setHasChanges] = useState(false);\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  useEffect(() => {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      try {\n        setSettings({ ...defaultSettings, ...JSON.parse(stored) });\n      } catch {\n        setSettings(defaultSettings);\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    document.documentElement.style.fontSize = `${settings.fontSize}%`;\n    \n    if (settings.highContrast) {\n      document.documentElement.classList.add(\"high-contrast\");\n    } else {\n      document.documentElement.classList.remove(\"high-contrast\");\n    }\n\n    if (settings.reduceMotion) {\n      document.documentElement.classList.add(\"reduce-motion\");\n    } else {\n      document.documentElement.classList.remove(\"reduce-motion\");\n    }\n  }, [settings]);\n\n  const updateSetting = <K extends keyof AccessibilitySettings>(\n    key: K,\n    value: AccessibilitySettings[K]\n  ) => {\n    setSettings((prev) => ({ ...prev, [key]: value }));\n    setHasChanges(true);\n  };\n\n  const handleSave = () => {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(settings));\n    setHasChanges(false);\n    toast({\n      title: \"Settings saved\",\n      description: \"Your accessibility preferences have been saved\",\n    });\n  };\n\n  const handleReset = () => {\n    setSettings(defaultSettings);\n    localStorage.removeItem(STORAGE_KEY);\n    setHasChanges(false);\n    toast({\n      title: \"Settings reset\",\n      description: \"Accessibility settings have been reset to defaults\",\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-20 pb-8 px-4 md:px-8\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h1 className=\"text-3xl font-bold flex items-center gap-3\" data-testid=\"text-accessibility-title\">\n                <Accessibility className=\"w-8 h-8 text-primary\" />\n                Accessibility\n              </h1>\n              <p className=\"text-muted-foreground mt-1\">\n                Customize your experience for better accessibility\n              </p>\n            </div>\n          </div>\n\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Eye className=\"w-5 h-5\" />\n                  Visual\n                </CardTitle>\n                <CardDescription>\n                  Adjust visual settings for better readability\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div>\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <Label className=\"flex items-center gap-2\">\n                      <Type className=\"w-4 h-4\" />\n                      Font Size\n                    </Label>\n                    <span className=\"text-sm text-muted-foreground\">{settings.fontSize}%</span>\n                  </div>\n                  <Slider\n                    value={[settings.fontSize]}\n                    min={75}\n                    max={150}\n                    step={5}\n                    onValueChange={([val]) => updateSetting(\"fontSize\", val)}\n                    data-testid=\"slider-font-size\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"high-contrast\" className=\"flex items-center gap-2 cursor-pointer\">\n                    <Contrast className=\"w-4 h-4\" />\n                    <div>\n                      <p>High Contrast</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Increase color contrast for better visibility\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"high-contrast\"\n                    checked={settings.highContrast}\n                    onCheckedChange={(val) => updateSetting(\"highContrast\", val)}\n                    data-testid=\"switch-high-contrast\"\n                  />\n                </div>\n\n                <div>\n                  <Label className=\"mb-3 block\">Color Blind Mode</Label>\n                  <Select\n                    value={settings.colorBlindMode}\n                    onValueChange={(val) => updateSetting(\"colorBlindMode\", val)}\n                  >\n                    <SelectTrigger data-testid=\"select-colorblind\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"none\">None</SelectItem>\n                      <SelectItem value=\"protanopia\">Protanopia (Red-weak)</SelectItem>\n                      <SelectItem value=\"deuteranopia\">Deuteranopia (Green-weak)</SelectItem>\n                      <SelectItem value=\"tritanopia\">Tritanopia (Blue-weak)</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div>\n                  <Label className=\"mb-3 block\">Cursor Size</Label>\n                  <Select\n                    value={settings.cursorSize}\n                    onValueChange={(val) => updateSetting(\"cursorSize\", val)}\n                  >\n                    <SelectTrigger data-testid=\"select-cursor-size\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"default\">Default</SelectItem>\n                      <SelectItem value=\"large\">Large</SelectItem>\n                      <SelectItem value=\"extra-large\">Extra Large</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <MousePointer className=\"w-5 h-5\" />\n                  Motion & Animation\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"reduce-motion\" className=\"flex items-center gap-2 cursor-pointer\">\n                    <div>\n                      <p>Reduce Motion</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Minimize animations and transitions\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"reduce-motion\"\n                    checked={settings.reduceMotion}\n                    onCheckedChange={(val) => updateSetting(\"reduceMotion\", val)}\n                    data-testid=\"switch-reduce-motion\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Keyboard className=\"w-5 h-5\" />\n                  Navigation\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"keyboard-nav\" className=\"flex items-center gap-2 cursor-pointer\">\n                    <div>\n                      <p>Enhanced Keyboard Navigation</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Improved focus management for keyboard users\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"keyboard-nav\"\n                    checked={settings.keyboardNavigation}\n                    onCheckedChange={(val) => updateSetting(\"keyboardNavigation\", val)}\n                    data-testid=\"switch-keyboard-nav\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"focus-indicator\" className=\"flex items-center gap-2 cursor-pointer\">\n                    <div>\n                      <p>Focus Indicator</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Show visible focus ring on interactive elements\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"focus-indicator\"\n                    checked={settings.focusIndicator}\n                    onCheckedChange={(val) => updateSetting(\"focusIndicator\", val)}\n                    data-testid=\"switch-focus-indicator\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"screen-reader\" className=\"flex items-center gap-2 cursor-pointer\">\n                    <div>\n                      <p>Screen Reader Optimization</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Optimize content for screen readers\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"screen-reader\"\n                    checked={settings.screenReader}\n                    onCheckedChange={(val) => updateSetting(\"screenReader\", val)}\n                    data-testid=\"switch-screen-reader\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Volume2 className=\"w-5 h-5\" />\n                  Media\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"autoplay\" className=\"flex items-center gap-2 cursor-pointer\">\n                    <div>\n                      <p>Autoplay Videos</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Automatically play videos when viewing\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"autoplay\"\n                    checked={settings.autoplayVideos}\n                    onCheckedChange={(val) => updateSetting(\"autoplayVideos\", val)}\n                    data-testid=\"switch-autoplay\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"muted-default\" className=\"flex items-center gap-2 cursor-pointer\">\n                    <div>\n                      <p>Muted by Default</p>\n                      <p className=\"text-xs text-muted-foreground font-normal\">\n                        Start videos muted\n                      </p>\n                    </div>\n                  </Label>\n                  <Switch\n                    id=\"muted-default\"\n                    checked={settings.mutedByDefault}\n                    onCheckedChange={(val) => updateSetting(\"mutedByDefault\", val)}\n                    data-testid=\"switch-muted-default\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            <div className=\"flex gap-4\">\n              <Button\n                variant=\"outline\"\n                onClick={handleReset}\n                className=\"flex-1\"\n                data-testid=\"button-reset-accessibility\"\n              >\n                <RotateCcw className=\"w-4 h-4 mr-2\" />\n                Reset to Defaults\n              </Button>\n              <Button\n                onClick={handleSave}\n                disabled={!hasChanges}\n                className=\"flex-1\"\n                data-testid=\"button-save-accessibility\"\n              >\n                <Save className=\"w-4 h-4 mr-2\" />\n                Save Changes\n              </Button>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":14614,"size_tokens":null},"client/src/pages/Downloads.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { \n  Download, Play, Trash2, FolderOpen, Cloud, \n  HardDrive, AlertCircle, CheckCircle2, Pause\n} from \"lucide-react\";\nimport type { Category } from \"@shared/schema\";\n\ninterface DownloadedVideo {\n  id: string;\n  videoId: string;\n  title: string;\n  thumbnail: string;\n  duration: string;\n  size: string;\n  downloadedAt: string;\n  status: \"completed\" | \"downloading\" | \"paused\" | \"error\";\n  progress: number;\n}\n\nconst STORAGE_KEY = \"blueberry_downloads\";\n\nexport default function Downloads() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [, navigate] = useLocation();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [downloads, setDownloads] = useState<DownloadedVideo[]>([]);\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  useEffect(() => {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      try {\n        setDownloads(JSON.parse(stored));\n      } catch {\n        setDownloads([]);\n      }\n    }\n  }, []);\n\n  const handleDelete = (id: string) => {\n    const updated = downloads.filter((d) => d.id !== id);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(updated));\n    setDownloads(updated);\n    toast({\n      title: \"Download removed\",\n      description: \"The downloaded video has been deleted\",\n    });\n  };\n\n  const handleClearAll = () => {\n    localStorage.removeItem(STORAGE_KEY);\n    setDownloads([]);\n    toast({\n      title: \"Downloads cleared\",\n      description: \"All downloaded videos have been removed\",\n    });\n  };\n\n  const getStatusIcon = (status: DownloadedVideo[\"status\"]) => {\n    switch (status) {\n      case \"completed\":\n        return <CheckCircle2 className=\"w-4 h-4 text-green-500\" />;\n      case \"downloading\":\n        return <Download className=\"w-4 h-4 text-blue-500 animate-bounce\" />;\n      case \"paused\":\n        return <Pause className=\"w-4 h-4 text-yellow-500\" />;\n      case \"error\":\n        return <AlertCircle className=\"w-4 h-4 text-red-500\" />;\n    }\n  };\n\n  const completedDownloads = downloads.filter((d) => d.status === \"completed\");\n  const activeDownloads = downloads.filter((d) => d.status !== \"completed\");\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-20 pb-8 px-4 md:px-8\">\n        <div className=\"max-w-5xl mx-auto\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h1 className=\"text-3xl font-bold flex items-center gap-3\" data-testid=\"text-downloads-title\">\n                <Download className=\"w-8 h-8 text-primary\" />\n                Downloads\n              </h1>\n              <p className=\"text-muted-foreground mt-1\">\n                Your downloaded videos for offline viewing\n              </p>\n            </div>\n            {downloads.length > 0 && (\n              <Button variant=\"outline\" onClick={handleClearAll} data-testid=\"button-clear-downloads\">\n                <Trash2 className=\"w-4 h-4 mr-2\" />\n                Clear All\n              </Button>\n            )}\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center\">\n                    <HardDrive className=\"w-6 h-6 text-primary\" />\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Storage Used</p>\n                    <p className=\"text-2xl font-bold\">0 MB</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-12 h-12 rounded-full bg-green-500/10 flex items-center justify-center\">\n                    <CheckCircle2 className=\"w-6 h-6 text-green-500\" />\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Downloaded</p>\n                    <p className=\"text-2xl font-bold\">{completedDownloads.length}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-12 h-12 rounded-full bg-blue-500/10 flex items-center justify-center\">\n                    <Cloud className=\"w-6 h-6 text-blue-500\" />\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">In Progress</p>\n                    <p className=\"text-2xl font-bold\">{activeDownloads.length}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {downloads.length === 0 ? (\n            <div className=\"text-center py-20\">\n              <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                <FolderOpen className=\"w-10 h-10 text-muted-foreground\" />\n              </div>\n              <h2 className=\"text-xl font-semibold mb-2\">No downloads yet</h2>\n              <p className=\"text-muted-foreground mb-6 max-w-md mx-auto\">\n                Download videos to watch them offline. Downloads are saved locally to your device.\n              </p>\n              <p className=\"text-sm text-muted-foreground mb-4\">\n                Note: Video downloads are currently not available due to content restrictions.\n              </p>\n              <Button onClick={() => navigate(\"/\")} variant=\"outline\">\n                Browse Videos\n              </Button>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {activeDownloads.length > 0 && (\n                <div>\n                  <h2 className=\"text-lg font-semibold mb-4\">Active Downloads</h2>\n                  <div className=\"space-y-3\">\n                    {activeDownloads.map((download) => (\n                      <Card key={download.id} data-testid={`download-active-${download.id}`}>\n                        <CardContent className=\"p-4\">\n                          <div className=\"flex items-center gap-4\">\n                            <div className=\"relative w-32 aspect-video rounded-lg overflow-hidden bg-muted\">\n                              <img\n                                src={download.thumbnail}\n                                alt={download.title}\n                                className=\"w-full h-full object-cover\"\n                              />\n                              <div className=\"absolute inset-0 flex items-center justify-center bg-black/50\">\n                                {getStatusIcon(download.status)}\n                              </div>\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <h3 className=\"font-medium truncate\">{download.title}</h3>\n                              <p className=\"text-sm text-muted-foreground\">\n                                {download.duration} - {download.size}\n                              </p>\n                              <div className=\"mt-2\">\n                                <div className=\"flex items-center justify-between text-xs mb-1\">\n                                  <span>{download.progress}%</span>\n                                  <Badge variant=\"secondary\" className=\"text-xs\">\n                                    {download.status}\n                                  </Badge>\n                                </div>\n                                <Progress value={download.progress} className=\"h-1\" />\n                              </div>\n                            </div>\n                            <div className=\"flex gap-2\">\n                              {download.status === \"downloading\" && (\n                                <Button size=\"icon\" variant=\"ghost\">\n                                  <Pause className=\"w-4 h-4\" />\n                                </Button>\n                              )}\n                              {download.status === \"paused\" && (\n                                <Button size=\"icon\" variant=\"ghost\">\n                                  <Play className=\"w-4 h-4\" />\n                                </Button>\n                              )}\n                              <Button\n                                size=\"icon\"\n                                variant=\"ghost\"\n                                onClick={() => handleDelete(download.id)}\n                              >\n                                <Trash2 className=\"w-4 h-4\" />\n                              </Button>\n                            </div>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {completedDownloads.length > 0 && (\n                <div>\n                  <h2 className=\"text-lg font-semibold mb-4\">Completed</h2>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {completedDownloads.map((download) => (\n                      <Card\n                        key={download.id}\n                        className=\"group cursor-pointer hover-elevate\"\n                        onClick={() => navigate(`/video/${download.videoId}`)}\n                        data-testid={`download-completed-${download.id}`}\n                      >\n                        <div className=\"aspect-video relative rounded-t-lg overflow-hidden bg-muted\">\n                          <img\n                            src={download.thumbnail}\n                            alt={download.title}\n                            className=\"w-full h-full object-cover\"\n                          />\n                          <div className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                            <Play className=\"w-12 h-12 text-white\" />\n                          </div>\n                          <Badge\n                            variant=\"secondary\"\n                            className=\"absolute bottom-2 right-2 bg-black/70 text-white\"\n                          >\n                            {download.duration}\n                          </Badge>\n                        </div>\n                        <CardContent className=\"p-4\">\n                          <h3 className=\"font-medium truncate mb-1\">{download.title}</h3>\n                          <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n                            <span>{download.size}</span>\n                            <Button\n                              size=\"icon\"\n                              variant=\"ghost\"\n                              className=\"h-8 w-8\"\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleDelete(download.id);\n                              }}\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </Button>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":12745,"size_tokens":null},"client/src/hooks/use-gestures.ts":{"content":"import { useState, useEffect, useCallback, useRef } from 'react';\n\nexport interface SwipeState {\n  direction: 'left' | 'right' | 'up' | 'down' | null;\n  distance: number;\n  velocity: number;\n}\n\nexport interface PinchState {\n  scale: number;\n  isActive: boolean;\n}\n\nexport interface LongPressState {\n  isActive: boolean;\n  duration: number;\n}\n\nexport interface DoubleTapState {\n  isActive: boolean;\n  position: { x: number; y: number } | null;\n}\n\ninterface TouchPoint {\n  x: number;\n  y: number;\n  time: number;\n}\n\ninterface GestureOptions {\n  swipeThreshold?: number;\n  longPressDelay?: number;\n  doubleTapDelay?: number;\n  onSwipe?: (direction: 'left' | 'right' | 'up' | 'down', distance: number, velocity: number) => void;\n  onSwipeLeft?: (distance: number, velocity: number) => void;\n  onSwipeRight?: (distance: number, velocity: number) => void;\n  onSwipeUp?: (distance: number, velocity: number) => void;\n  onSwipeDown?: (distance: number, velocity: number) => void;\n  onPinch?: (scale: number) => void;\n  onLongPress?: () => void;\n  onDoubleTap?: (position: { x: number; y: number }) => void;\n  onTap?: (position: { x: number; y: number }) => void;\n  onPan?: (deltaX: number, deltaY: number) => void;\n}\n\nexport function useGestures(elementRef: React.RefObject<HTMLElement>, options: GestureOptions = {}) {\n  const {\n    swipeThreshold = 50,\n    longPressDelay = 500,\n    doubleTapDelay = 300,\n    onSwipe,\n    onSwipeLeft,\n    onSwipeRight,\n    onSwipeUp,\n    onSwipeDown,\n    onPinch,\n    onLongPress,\n    onDoubleTap,\n    onTap,\n    onPan,\n  } = options;\n\n  const [swipeState, setSwipeState] = useState<SwipeState>({ direction: null, distance: 0, velocity: 0 });\n  const [pinchState, setPinchState] = useState<PinchState>({ scale: 1, isActive: false });\n  const [longPressState, setLongPressState] = useState<LongPressState>({ isActive: false, duration: 0 });\n  const [doubleTapState, setDoubleTapState] = useState<DoubleTapState>({ isActive: false, position: null });\n\n  const touchStart = useRef<TouchPoint | null>(null);\n  const touchEnd = useRef<TouchPoint | null>(null);\n  const longPressTimer = useRef<NodeJS.Timeout | null>(null);\n  const lastTap = useRef<{ time: number; position: { x: number; y: number } } | null>(null);\n  const initialPinchDistance = useRef<number | null>(null);\n\n  const getDistance = (touch1: Touch, touch2: Touch): number => {\n    return Math.hypot(touch2.clientX - touch1.clientX, touch2.clientY - touch1.clientY);\n  };\n\n  const clearLongPressTimer = useCallback(() => {\n    if (longPressTimer.current) {\n      clearTimeout(longPressTimer.current);\n      longPressTimer.current = null;\n    }\n    setLongPressState({ isActive: false, duration: 0 });\n  }, []);\n\n  const handleTouchStart = useCallback((e: TouchEvent) => {\n    clearLongPressTimer();\n\n    if (e.touches.length === 2 && onPinch) {\n      initialPinchDistance.current = getDistance(e.touches[0], e.touches[1]);\n      setPinchState({ scale: 1, isActive: true });\n      return;\n    }\n\n    if (e.touches.length === 1) {\n      const touch = e.touches[0];\n      const now = Date.now();\n      \n      touchStart.current = {\n        x: touch.clientX,\n        y: touch.clientY,\n        time: now,\n      };\n\n      if (lastTap.current && now - lastTap.current.time < doubleTapDelay) {\n        const position = { x: touch.clientX, y: touch.clientY };\n        setDoubleTapState({ isActive: true, position });\n        onDoubleTap?.(position);\n        lastTap.current = null;\n        setTimeout(() => setDoubleTapState({ isActive: false, position: null }), 200);\n        return;\n      }\n\n      if (onLongPress) {\n        longPressTimer.current = setTimeout(() => {\n          setLongPressState({ isActive: true, duration: longPressDelay });\n          onLongPress();\n        }, longPressDelay);\n      }\n    }\n  }, [clearLongPressTimer, doubleTapDelay, longPressDelay, onDoubleTap, onLongPress, onPinch]);\n\n  const handleTouchMove = useCallback((e: TouchEvent) => {\n    if (e.touches.length === 2 && initialPinchDistance.current && onPinch) {\n      const currentDistance = getDistance(e.touches[0], e.touches[1]);\n      const scale = currentDistance / initialPinchDistance.current;\n      setPinchState({ scale, isActive: true });\n      onPinch(scale);\n      return;\n    }\n\n    if (e.touches.length === 1 && touchStart.current) {\n      clearLongPressTimer();\n      \n      const touch = e.touches[0];\n      const deltaX = touch.clientX - touchStart.current.x;\n      const deltaY = touch.clientY - touchStart.current.y;\n\n      onPan?.(deltaX, deltaY);\n\n      touchEnd.current = {\n        x: touch.clientX,\n        y: touch.clientY,\n        time: Date.now(),\n      };\n    }\n  }, [clearLongPressTimer, onPan, onPinch]);\n\n  const handleTouchEnd = useCallback((e: TouchEvent) => {\n    clearLongPressTimer();\n\n    if (pinchState.isActive) {\n      setPinchState({ scale: 1, isActive: false });\n      initialPinchDistance.current = null;\n      return;\n    }\n\n    if (touchStart.current && touchEnd.current) {\n      const deltaX = touchEnd.current.x - touchStart.current.x;\n      const deltaY = touchEnd.current.y - touchStart.current.y;\n      const deltaTime = touchEnd.current.time - touchStart.current.time;\n      const velocity = Math.hypot(deltaX, deltaY) / deltaTime;\n\n      const absX = Math.abs(deltaX);\n      const absY = Math.abs(deltaY);\n\n      if (absX > swipeThreshold || absY > swipeThreshold) {\n        let direction: 'left' | 'right' | 'up' | 'down';\n        let distance: number;\n\n        if (absX > absY) {\n          direction = deltaX > 0 ? 'right' : 'left';\n          distance = absX;\n          if (direction === 'left') onSwipeLeft?.(distance, velocity);\n          if (direction === 'right') onSwipeRight?.(distance, velocity);\n        } else {\n          direction = deltaY > 0 ? 'down' : 'up';\n          distance = absY;\n          if (direction === 'up') onSwipeUp?.(distance, velocity);\n          if (direction === 'down') onSwipeDown?.(distance, velocity);\n        }\n\n        setSwipeState({ direction, distance, velocity });\n        onSwipe?.(direction, distance, velocity);\n        \n        setTimeout(() => setSwipeState({ direction: null, distance: 0, velocity: 0 }), 300);\n      } else if (absX < 10 && absY < 10) {\n        const now = Date.now();\n        lastTap.current = {\n          time: now,\n          position: { x: touchStart.current.x, y: touchStart.current.y },\n        };\n        onTap?.({ x: touchStart.current.x, y: touchStart.current.y });\n      }\n    } else if (touchStart.current) {\n      const now = Date.now();\n      lastTap.current = {\n        time: now,\n        position: { x: touchStart.current.x, y: touchStart.current.y },\n      };\n      onTap?.({ x: touchStart.current.x, y: touchStart.current.y });\n    }\n\n    touchStart.current = null;\n    touchEnd.current = null;\n  }, [clearLongPressTimer, onSwipe, onSwipeDown, onSwipeLeft, onSwipeRight, onSwipeUp, onTap, pinchState.isActive, swipeThreshold]);\n\n  useEffect(() => {\n    const element = elementRef.current;\n    if (!element) return;\n\n    element.addEventListener('touchstart', handleTouchStart, { passive: true });\n    element.addEventListener('touchmove', handleTouchMove, { passive: true });\n    element.addEventListener('touchend', handleTouchEnd, { passive: true });\n\n    return () => {\n      element.removeEventListener('touchstart', handleTouchStart);\n      element.removeEventListener('touchmove', handleTouchMove);\n      element.removeEventListener('touchend', handleTouchEnd);\n      clearLongPressTimer();\n    };\n  }, [elementRef, handleTouchStart, handleTouchMove, handleTouchEnd, clearLongPressTimer]);\n\n  return {\n    swipeState,\n    pinchState,\n    longPressState,\n    doubleTapState,\n  };\n}\n\nexport function useSwipe(\n  elementRef: React.RefObject<HTMLElement>,\n  onSwipe: (direction: 'left' | 'right' | 'up' | 'down') => void,\n  threshold = 50\n) {\n  return useGestures(elementRef, {\n    swipeThreshold: threshold,\n    onSwipe: (direction) => onSwipe(direction),\n  });\n}\n\nexport function usePullToRefresh(\n  elementRef: React.RefObject<HTMLElement>,\n  onRefresh: () => Promise<void>,\n  threshold = 100\n) {\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [pullDistance, setPullDistance] = useState(0);\n\n  const handlePan = useCallback((deltaX: number, deltaY: number) => {\n    if (deltaY > 0 && !isRefreshing) {\n      setPullDistance(Math.min(deltaY, threshold * 1.5));\n    }\n  }, [isRefreshing, threshold]);\n\n  const handleSwipeDown = useCallback(async (distance: number) => {\n    if (distance >= threshold && !isRefreshing) {\n      setIsRefreshing(true);\n      await onRefresh();\n      setIsRefreshing(false);\n    }\n    setPullDistance(0);\n  }, [threshold, isRefreshing, onRefresh]);\n\n  useGestures(elementRef, {\n    onPan: handlePan,\n    onSwipeDown: handleSwipeDown,\n  });\n\n  return { isRefreshing, pullDistance, progress: Math.min(pullDistance / threshold, 1) };\n}\n\nexport function useInfiniteScroll(\n  containerRef: React.RefObject<HTMLElement>,\n  onLoadMore: () => void,\n  options: { threshold?: number; enabled?: boolean } = {}\n) {\n  const { threshold = 200, enabled = true } = options;\n  const isLoading = useRef(false);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container || !enabled) return;\n\n    const handleScroll = () => {\n      if (isLoading.current) return;\n\n      const { scrollTop, scrollHeight, clientHeight } = container;\n      const distanceFromBottom = scrollHeight - scrollTop - clientHeight;\n\n      if (distanceFromBottom < threshold) {\n        isLoading.current = true;\n        onLoadMore();\n        setTimeout(() => {\n          isLoading.current = false;\n        }, 1000);\n      }\n    };\n\n    container.addEventListener('scroll', handleScroll, { passive: true });\n    return () => container.removeEventListener('scroll', handleScroll);\n  }, [containerRef, onLoadMore, threshold, enabled]);\n}\n\nexport function useHorizontalSwipe(\n  elementRef: React.RefObject<HTMLElement>,\n  callbacks: {\n    onSwipeLeft?: () => void;\n    onSwipeRight?: () => void;\n  }\n) {\n  return useGestures(elementRef, {\n    onSwipeLeft: callbacks.onSwipeLeft ? () => callbacks.onSwipeLeft!() : undefined,\n    onSwipeRight: callbacks.onSwipeRight ? () => callbacks.onSwipeRight!() : undefined,\n  });\n}\n\nexport function useVideoGestures(\n  elementRef: React.RefObject<HTMLElement>,\n  callbacks: {\n    onSeekForward?: () => void;\n    onSeekBackward?: () => void;\n    onVolumeChange?: (delta: number) => void;\n    onBrightnessChange?: (delta: number) => void;\n    onTogglePlay?: () => void;\n    onDoubleTapLeft?: () => void;\n    onDoubleTapRight?: () => void;\n    onLongPress?: () => void;\n    onPinchZoom?: (scale: number) => void;\n  }\n) {\n  const containerWidth = useRef(0);\n  \n  useEffect(() => {\n    if (elementRef.current) {\n      containerWidth.current = elementRef.current.clientWidth;\n    }\n  }, [elementRef]);\n\n  return useGestures(elementRef, {\n    onDoubleTap: (position) => {\n      if (containerWidth.current > 0) {\n        const isLeftSide = position.x < containerWidth.current / 2;\n        if (isLeftSide) {\n          callbacks.onDoubleTapLeft?.();\n        } else {\n          callbacks.onDoubleTapRight?.();\n        }\n      }\n    },\n    onSwipeLeft: () => callbacks.onSeekForward?.(),\n    onSwipeRight: () => callbacks.onSeekBackward?.(),\n    onSwipeUp: (distance) => {\n      const delta = distance / 100;\n      callbacks.onVolumeChange?.(delta);\n      callbacks.onBrightnessChange?.(delta * 10);\n    },\n    onSwipeDown: (distance) => {\n      const delta = -distance / 100;\n      callbacks.onVolumeChange?.(delta);\n      callbacks.onBrightnessChange?.(delta * 10);\n    },\n    onTap: callbacks.onTogglePlay ? () => callbacks.onTogglePlay!() : undefined,\n    onLongPress: callbacks.onLongPress,\n    onPinch: callbacks.onPinchZoom,\n  });\n}\n","path":null,"size_bytes":11786,"size_tokens":null},"client/src/pages/CategoryDetail.tsx":{"content":"import { useState } from \"react\";\nimport { useParams, useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { VideoGrid } from \"@/components/VideoGrid\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { ArrowLeft, Filter, Grid, LayoutGrid, SlidersHorizontal } from \"lucide-react\";\nimport type { Category, PaginatedVideos } from \"@shared/schema\";\n\ntype SortOption = \"popular\" | \"newest\" | \"longest\" | \"shortest\";\ntype ViewMode = \"grid\" | \"large\";\n\nexport default function CategoryDetail() {\n  const { name } = useParams<{ name: string }>();\n  const [, navigate] = useLocation();\n  const { t } = useLanguage();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const [sortBy, setSortBy] = useState<SortOption>(\"popular\");\n  const [viewMode, setViewMode] = useState<ViewMode>(\"grid\");\n\n  const categoryName = decodeURIComponent(name || \"\");\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const { data: videosData, isLoading } = useQuery<PaginatedVideos>({\n    queryKey: [`/api/videos/category/${categoryName}?page=${page}`],\n  });\n\n  const currentCategory = categories.find(\n    (c) => c.name.toLowerCase() === categoryName.toLowerCase()\n  );\n\n  const videos = videosData?.videos || [];\n\n  const sortedVideos = [...videos].sort((a, b) => {\n    switch (sortBy) {\n      case \"newest\":\n        return 0;\n      case \"longest\":\n        return b.durationSeconds - a.durationSeconds;\n      case \"shortest\":\n        return a.durationSeconds - b.durationSeconds;\n      case \"popular\":\n      default:\n        return b.viewsCount - a.viewsCount;\n    }\n  });\n\n  const handlePrevPage = () => {\n    if (page > 1) setPage(page - 1);\n  };\n\n  const handleNextPage = () => {\n    if (videosData?.hasNext) setPage(page + 1);\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={categoryName || \"\"}\n        onCategorySelect={(cat) => cat && navigate(`/category/${encodeURIComponent(cat)}`)}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-20 pb-8 px-4 md:px-8\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"mb-6\">\n            <Button\n              variant=\"ghost\"\n              onClick={() => navigate(\"/categories\")}\n              className=\"mb-4\"\n              data-testid=\"button-back-categories\"\n            >\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              All Categories\n            </Button>\n\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n              <div>\n                <h1 className=\"text-3xl font-bold\" data-testid=\"text-category-title\">\n                  {categoryName}\n                </h1>\n                {currentCategory && (\n                  <p className=\"text-muted-foreground mt-1\">\n                    {currentCategory.count.toLocaleString()} videos\n                  </p>\n                )}\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                <Select value={sortBy} onValueChange={(v) => setSortBy(v as SortOption)}>\n                  <SelectTrigger className=\"w-[160px]\" data-testid=\"select-sort\">\n                    <SlidersHorizontal className=\"w-4 h-4 mr-2\" />\n                    <SelectValue placeholder=\"Sort by\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"popular\">Most Popular</SelectItem>\n                    <SelectItem value=\"newest\">Newest</SelectItem>\n                    <SelectItem value=\"longest\">Longest</SelectItem>\n                    <SelectItem value=\"shortest\">Shortest</SelectItem>\n                  </SelectContent>\n                </Select>\n\n                <div className=\"flex bg-muted rounded-lg p-1\">\n                  <Button\n                    variant={viewMode === \"grid\" ? \"secondary\" : \"ghost\"}\n                    size=\"icon\"\n                    onClick={() => setViewMode(\"grid\")}\n                    data-testid=\"button-view-grid\"\n                  >\n                    <Grid className=\"w-4 h-4\" />\n                  </Button>\n                  <Button\n                    variant={viewMode === \"large\" ? \"secondary\" : \"ghost\"}\n                    size=\"icon\"\n                    onClick={() => setViewMode(\"large\")}\n                    data-testid=\"button-view-large\"\n                  >\n                    <LayoutGrid className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {isLoading ? (\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n              {Array.from({ length: 20 }).map((_, i) => (\n                <div key={i} className=\"space-y-2\">\n                  <Skeleton className=\"aspect-video rounded-lg\" />\n                  <Skeleton className=\"h-4 w-3/4\" />\n                  <Skeleton className=\"h-3 w-1/2\" />\n                </div>\n              ))}\n            </div>\n          ) : sortedVideos.length === 0 ? (\n            <div className=\"text-center py-20\">\n              <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                <Filter className=\"w-10 h-10 text-muted-foreground\" />\n              </div>\n              <h2 className=\"text-xl font-semibold mb-2\">No videos found</h2>\n              <p className=\"text-muted-foreground mb-6\">\n                There are no videos in this category yet\n              </p>\n              <Button onClick={() => navigate(\"/categories\")} variant=\"outline\">\n                Browse Categories\n              </Button>\n            </div>\n          ) : (\n            <>\n              <VideoGrid videos={sortedVideos} />\n\n              {videosData && videosData.totalPages > 1 && (\n                <div className=\"flex items-center justify-center gap-4 mt-8\">\n                  <Button\n                    variant=\"outline\"\n                    onClick={handlePrevPage}\n                    disabled={page === 1}\n                    data-testid=\"button-prev-page\"\n                  >\n                    Previous\n                  </Button>\n                  <span className=\"text-sm text-muted-foreground\">\n                    Page {page} of {videosData.totalPages}\n                  </span>\n                  <Button\n                    variant=\"outline\"\n                    onClick={handleNextPage}\n                    disabled={!videosData.hasNext}\n                    data-testid=\"button-next-page\"\n                  >\n                    Next\n                  </Button>\n                </div>\n              )}\n            </>\n          )}\n\n          {categories.length > 0 && (\n            <div className=\"mt-12\">\n              <h2 className=\"text-xl font-semibold mb-4\">Related Categories</h2>\n              <div className=\"flex flex-wrap gap-2\">\n                {categories\n                  .filter((c) => c.name !== categoryName)\n                  .slice(0, 12)\n                  .map((cat) => (\n                    <Badge\n                      key={cat.id}\n                      variant=\"secondary\"\n                      className=\"cursor-pointer hover-elevate px-4 py-2\"\n                      onClick={() => navigate(`/category/${encodeURIComponent(cat.name)}`)}\n                      data-testid={`badge-category-${cat.id}`}\n                    >\n                      {cat.name}\n                      <span className=\"ml-2 text-muted-foreground\">({cat.count})</span>\n                    </Badge>\n                  ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":8503,"size_tokens":null},"client/src/pages/Help.tsx":{"content":"import { useState } from \"react\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport {\n  HelpCircle,\n  Search,\n  Play,\n  User,\n  Shield,\n  Bookmark,\n  Settings,\n  MessageCircle,\n  Mail,\n  ExternalLink,\n} from \"lucide-react\";\nimport type { Category } from \"@shared/schema\";\n\nconst faqs = [\n  {\n    category: \"playback\",\n    icon: Play,\n    questions: [\n      {\n        q: \"Why won't the video play?\",\n        a: \"Videos may not play due to browser restrictions, slow internet, or ad blockers. Try refreshing the page, disabling ad blockers, or switching browsers. Make sure your browser is up to date.\",\n      },\n      {\n        q: \"How do I change video quality?\",\n        a: \"Video quality is automatically adjusted based on your internet speed. Some videos may have quality options in the embedded player controls.\",\n      },\n      {\n        q: \"Can I download videos?\",\n        a: \"Video downloads are not supported at this time. You can use the Watch Later feature to save videos for easy access later.\",\n      },\n      {\n        q: \"How do I use fullscreen mode?\",\n        a: \"Click the fullscreen button in the video player, or press 'F' on your keyboard. Press Escape or 'F' again to exit fullscreen.\",\n      },\n    ],\n  },\n  {\n    category: \"account\",\n    icon: User,\n    questions: [\n      {\n        q: \"How do I create an account?\",\n        a: \"Click the 'Sign Up' button in the header and fill in your details. You can also sign in with Google or other providers.\",\n      },\n      {\n        q: \"How do I reset my password?\",\n        a: \"Click 'Forgot Password' on the login page and enter your email. We'll send you a link to reset your password.\",\n      },\n      {\n        q: \"Can I delete my account?\",\n        a: \"Yes, you can delete your account from the Settings page. Note that this action is permanent and cannot be undone.\",\n      },\n    ],\n  },\n  {\n    category: \"privacy\",\n    icon: Shield,\n    questions: [\n      {\n        q: \"Is my viewing history private?\",\n        a: \"Yes, your viewing history is stored locally on your device and is not shared. You can clear your history at any time from the History page.\",\n      },\n      {\n        q: \"How do I clear my watch history?\",\n        a: \"Go to Settings > Privacy & Security and click 'Clear Watch History'. You can also clear individual items from the History page.\",\n      },\n      {\n        q: \"What data do you collect?\",\n        a: \"We collect minimal data necessary for the service. See our Privacy Policy for full details on data collection and usage.\",\n      },\n    ],\n  },\n  {\n    category: \"features\",\n    icon: Bookmark,\n    questions: [\n      {\n        q: \"How do I save videos for later?\",\n        a: \"Click the bookmark icon on any video to add it to your Watch Later list. Access your saved videos from the Watch Later page.\",\n      },\n      {\n        q: \"How do favorites work?\",\n        a: \"Click the heart icon to add a video to your favorites. Favorites are stored locally and can be accessed from the Favorites page.\",\n      },\n      {\n        q: \"Can I create playlists?\",\n        a: \"Yes! Go to the Playlists page to create and manage your custom playlists. You can add videos to playlists from the video page.\",\n      },\n    ],\n  },\n];\n\nexport default function Help() {\n  const { t } = useLanguage();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [helpSearch, setHelpSearch] = useState(\"\");\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const filteredFaqs = faqs\n    .map((category) => ({\n      ...category,\n      questions: category.questions.filter(\n        (q) =>\n          q.q.toLowerCase().includes(helpSearch.toLowerCase()) ||\n          q.a.toLowerCase().includes(helpSearch.toLowerCase())\n      ),\n    }))\n    .filter((category) => category.questions.length > 0);\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-20 pb-8 px-4 md:px-8\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"text-center mb-12\">\n            <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-primary/10 flex items-center justify-center\">\n              <HelpCircle className=\"w-10 h-10 text-primary\" />\n            </div>\n            <h1 className=\"text-3xl font-bold mb-2\" data-testid=\"text-help-title\">\n              Help Center\n            </h1>\n            <p className=\"text-muted-foreground max-w-md mx-auto\">\n              Find answers to common questions or contact our support team\n            </p>\n          </div>\n\n          <div className=\"relative mb-8\">\n            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <Input\n              type=\"search\"\n              placeholder=\"Search for help...\"\n              value={helpSearch}\n              onChange={(e) => setHelpSearch(e.target.value)}\n              className=\"pl-12 h-12 text-lg\"\n              data-testid=\"input-help-search\"\n            />\n          </div>\n\n          {filteredFaqs.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-muted-foreground\">No results found for \"{helpSearch}\"</p>\n              <Button variant=\"ghost\" onClick={() => setHelpSearch(\"\")}>\n                Clear search\n              </Button>\n            </div>\n          ) : (\n            <div className=\"space-y-6\">\n              {filteredFaqs.map((category) => (\n                <Card key={category.category} data-testid={`card-faq-${category.category}`}>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"flex items-center gap-2 text-lg\">\n                      <category.icon className=\"w-5 h-5 text-primary\" />\n                      {category.category.charAt(0).toUpperCase() + category.category.slice(1)}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <Accordion type=\"single\" collapsible className=\"w-full\">\n                      {category.questions.map((faq, index) => (\n                        <AccordionItem\n                          key={index}\n                          value={`${category.category}-${index}`}\n                          data-testid={`accordion-item-${category.category}-${index}`}\n                        >\n                          <AccordionTrigger className=\"text-left\">\n                            {faq.q}\n                          </AccordionTrigger>\n                          <AccordionContent className=\"text-muted-foreground\">\n                            {faq.a}\n                          </AccordionContent>\n                        </AccordionItem>\n                      ))}\n                    </Accordion>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n\n          <Card className=\"mt-8\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <MessageCircle className=\"w-5 h-5 text-primary\" />\n                Still need help?\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground mb-4\">\n                Can't find what you're looking for? Contact our support team.\n              </p>\n              <div className=\"flex flex-wrap gap-4\">\n                <Button variant=\"outline\" asChild>\n                  <a href=\"/contact\">\n                    <Mail className=\"w-4 h-4 mr-2\" />\n                    Contact Support\n                  </a>\n                </Button>\n                <Button variant=\"outline\" asChild>\n                  <a href=\"/feedback\">\n                    <MessageCircle className=\"w-4 h-4 mr-2\" />\n                    Send Feedback\n                  </a>\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"mt-6\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Settings className=\"w-5 h-5 text-primary\" />\n                Keyboard Shortcuts\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {[\n                  { key: \"F\", desc: \"Toggle fullscreen\" },\n                  { key: \"T\", desc: \"Toggle theater mode\" },\n                  { key: \"M\", desc: \"Toggle mute\" },\n                  { key: \"Space / K\", desc: \"Play/Pause\" },\n                  { key: \"J\", desc: \"Rewind 10 seconds\" },\n                  { key: \"L\", desc: \"Forward 10 seconds\" },\n                  { key: \"Arrow Up/Down\", desc: \"Volume up/down\" },\n                  { key: \"0-9\", desc: \"Seek to 0%-90%\" },\n                ].map((shortcut) => (\n                  <div\n                    key={shortcut.key}\n                    className=\"flex items-center justify-between p-3 bg-muted/50 rounded-lg\"\n                  >\n                    <span className=\"text-sm\">{shortcut.desc}</span>\n                    <kbd className=\"px-2 py-1 bg-background border rounded text-sm font-mono\">\n                      {shortcut.key}\n                    </kbd>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":10308,"size_tokens":null},"client/src/pages/Playlists.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { SideDrawer } from \"@/components/SideDrawer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Plus, List, Play, Trash2, Edit2, Lock, Globe, MoreVertical, Video } from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport type { Category } from \"@shared/schema\";\n\ninterface Playlist {\n  id: string;\n  name: string;\n  description: string;\n  isPrivate: boolean;\n  videos: string[];\n  thumbnails: string[];\n  createdAt: string;\n  updatedAt: string;\n}\n\nconst PLAYLISTS_STORAGE_KEY = \"blueberry_playlists\";\n\nexport default function Playlists() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const { isAuthenticated } = useAuth();\n  const [, navigate] = useLocation();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [playlists, setPlaylists] = useState<Playlist[]>([]);\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [newPlaylistName, setNewPlaylistName] = useState(\"\");\n  const [newPlaylistDescription, setNewPlaylistDescription] = useState(\"\");\n  const [isPrivate, setIsPrivate] = useState(false);\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  useEffect(() => {\n    const stored = localStorage.getItem(PLAYLISTS_STORAGE_KEY);\n    if (stored) {\n      try {\n        setPlaylists(JSON.parse(stored));\n      } catch {\n        setPlaylists([]);\n      }\n    }\n  }, []);\n\n  const savePlaylists = (updated: Playlist[]) => {\n    localStorage.setItem(PLAYLISTS_STORAGE_KEY, JSON.stringify(updated));\n    setPlaylists(updated);\n  };\n\n  const handleCreatePlaylist = () => {\n    if (!newPlaylistName.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a playlist name\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const newPlaylist: Playlist = {\n      id: Date.now().toString(),\n      name: newPlaylistName.trim(),\n      description: newPlaylistDescription.trim(),\n      isPrivate,\n      videos: [],\n      thumbnails: [],\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n\n    savePlaylists([newPlaylist, ...playlists]);\n    setNewPlaylistName(\"\");\n    setNewPlaylistDescription(\"\");\n    setIsPrivate(false);\n    setIsCreateDialogOpen(false);\n    toast({\n      title: \"Playlist created\",\n      description: `\"${newPlaylist.name}\" has been created`,\n    });\n  };\n\n  const handleDeletePlaylist = (id: string) => {\n    const updated = playlists.filter((p) => p.id !== id);\n    savePlaylists(updated);\n    toast({\n      title: \"Playlist deleted\",\n      description: \"The playlist has been removed\",\n    });\n  };\n\n  const filteredPlaylists = playlists.filter((p) =>\n    p.name.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header\n        onMenuClick={() => setIsDrawerOpen(true)}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      <SideDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        categories={categories}\n        selectedCategory={null}\n        onCategorySelect={() => {}}\n        favoritesCount={0}\n      />\n\n      <main className=\"flex-1 pt-20 pb-8 px-4 md:px-8\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h1 className=\"text-3xl font-bold\" data-testid=\"text-playlists-title\">\n                My Playlists\n              </h1>\n              <p className=\"text-muted-foreground mt-1\">\n                Organize your favorite videos into playlists\n              </p>\n            </div>\n\n            <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n              <DialogTrigger asChild>\n                <Button data-testid=\"button-create-playlist\">\n                  <Plus className=\"w-4 h-4 mr-2\" />\n                  New Playlist\n                </Button>\n              </DialogTrigger>\n              <DialogContent>\n                <DialogHeader>\n                  <DialogTitle>Create New Playlist</DialogTitle>\n                  <DialogDescription>\n                    Give your playlist a name and optional description\n                  </DialogDescription>\n                </DialogHeader>\n                <div className=\"space-y-4 py-4\">\n                  <div>\n                    <Input\n                      placeholder=\"Playlist name\"\n                      value={newPlaylistName}\n                      onChange={(e) => setNewPlaylistName(e.target.value)}\n                      data-testid=\"input-playlist-name\"\n                    />\n                  </div>\n                  <div>\n                    <Input\n                      placeholder=\"Description (optional)\"\n                      value={newPlaylistDescription}\n                      onChange={(e) => setNewPlaylistDescription(e.target.value)}\n                      data-testid=\"input-playlist-description\"\n                    />\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Button\n                      variant={isPrivate ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={() => setIsPrivate(true)}\n                      data-testid=\"button-private\"\n                    >\n                      <Lock className=\"w-4 h-4 mr-1\" />\n                      Private\n                    </Button>\n                    <Button\n                      variant={!isPrivate ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={() => setIsPrivate(false)}\n                      data-testid=\"button-public\"\n                    >\n                      <Globe className=\"w-4 h-4 mr-1\" />\n                      Public\n                    </Button>\n                  </div>\n                </div>\n                <DialogFooter>\n                  <Button variant=\"outline\" onClick={() => setIsCreateDialogOpen(false)}>\n                    Cancel\n                  </Button>\n                  <Button onClick={handleCreatePlaylist} data-testid=\"button-confirm-create\">\n                    Create\n                  </Button>\n                </DialogFooter>\n              </DialogContent>\n            </Dialog>\n          </div>\n\n          {filteredPlaylists.length === 0 ? (\n            <div className=\"text-center py-20\">\n              <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\n                <List className=\"w-10 h-10 text-muted-foreground\" />\n              </div>\n              <h2 className=\"text-xl font-semibold mb-2\">No playlists yet</h2>\n              <p className=\"text-muted-foreground mb-6\">\n                Create your first playlist to organize your favorite videos\n              </p>\n              <Button onClick={() => setIsCreateDialogOpen(true)}>\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Create Playlist\n              </Button>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {filteredPlaylists.map((playlist) => (\n                <Card\n                  key={playlist.id}\n                  className=\"group cursor-pointer hover-elevate\"\n                  onClick={() => navigate(`/playlist/${playlist.id}`)}\n                  data-testid={`card-playlist-${playlist.id}`}\n                >\n                  <div className=\"aspect-video bg-muted relative overflow-hidden rounded-t-lg\">\n                    {playlist.thumbnails.length > 0 ? (\n                      <div className=\"grid grid-cols-2 gap-0.5 absolute inset-0\">\n                        {playlist.thumbnails.slice(0, 4).map((thumb, i) => (\n                          <img\n                            key={i}\n                            src={thumb}\n                            alt=\"\"\n                            className=\"w-full h-full object-cover\"\n                          />\n                        ))}\n                      </div>\n                    ) : (\n                      <div className=\"absolute inset-0 flex items-center justify-center\">\n                        <Video className=\"w-12 h-12 text-muted-foreground/50\" />\n                      </div>\n                    )}\n                    <div className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                      <Play className=\"w-12 h-12 text-white\" />\n                    </div>\n                    <Badge\n                      variant=\"secondary\"\n                      className=\"absolute bottom-2 right-2 bg-black/70 text-white\"\n                    >\n                      {playlist.videos.length} videos\n                    </Badge>\n                  </div>\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start justify-between gap-2\">\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"font-semibold truncate\">{playlist.name}</h3>\n                        {playlist.description && (\n                          <p className=\"text-sm text-muted-foreground truncate mt-1\">\n                            {playlist.description}\n                          </p>\n                        )}\n                        <div className=\"flex items-center gap-2 mt-2 text-xs text-muted-foreground\">\n                          {playlist.isPrivate ? (\n                            <Lock className=\"w-3 h-3\" />\n                          ) : (\n                            <Globe className=\"w-3 h-3\" />\n                          )}\n                          <span>{playlist.isPrivate ? \"Private\" : \"Public\"}</span>\n                        </div>\n                      </div>\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild onClick={(e) => e.stopPropagation()}>\n                          <Button size=\"icon\" variant=\"ghost\">\n                            <MoreVertical className=\"w-4 h-4\" />\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"end\">\n                          <DropdownMenuItem>\n                            <Edit2 className=\"w-4 h-4 mr-2\" />\n                            Edit\n                          </DropdownMenuItem>\n                          <DropdownMenuItem\n                            className=\"text-destructive\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleDeletePlaylist(playlist.id);\n                            }}\n                          >\n                            <Trash2 className=\"w-4 h-4 mr-2\" />\n                            Delete\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":12042,"size_tokens":null}},"version":2}